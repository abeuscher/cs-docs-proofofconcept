!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ContentstackUIExtension=t():e.ContentstackUIExtension=t()}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.transform=function(e){return function(){switch(this._query[e]=this._query[e]||{},arguments.length){case 1:if(Array.isArray(arguments[0])||"string"==typeof arguments[0]){var t=this._query[e].BASE||[];return t=t.concat(arguments[0]),this._query[e].BASE=t,this}throw Error("Kindly provide valid parameters");case 2:if("string"!=typeof arguments[0]||!Array.isArray(arguments[1])&&"string"!=typeof arguments[1])throw Error("Kindly provide valid parameters");var n=this._query[e][arguments[0]]||[];return n=n.concat(arguments[1]),this._query[e][arguments[0]]=n,this;default:throw Error("Kindly provide valid parameters")}}},t.merge=function(e,t){if(e&&t)for(var n in t)e[n]=t[n];return e},t.mergeDeep=function(e,t){var n=this;return function e(t,r){for(var o in r)"object"==n._type(r[o])&&n._type(t[o])==n._type(r[o])?e(t[o],r[o]):"array"==n._type(r[o])&&n._type(t[o])==n._type(r[o])?t[o]=t[o].concat(r[o]):t[o]=r[o]}(e,t),e},t._type=function(e){var t=void 0===e?"undefined":r(e);switch(t){case"object":t,Array.isArray(e)&&(t="array");break;default:t}return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));var i=function(){function e(t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._connection=t,this._query={},this.only=o.transform("only"),this.except=o.transform("except"),this}return r(e,[{key:"includeReference",value:function(e){if(Array.isArray(e))for(var t=0;t<e.length;t++)this._query.include=this._query.include||[],this._query.include=this._query.include.concat(e[t]);else{if("string"!=typeof e)throw Error("Argument should be a String or an Array.");for(var n=0;n<arguments.length;n++)this._query.include=this._query.include||[],this._query.include=this._query.include.concat(arguments[n])}return this}},{key:"language",value:function(e){if(e&&"string"==typeof e)return this._query.locale=e,this;throw Error("Argument should be a String.")}},{key:"addQuery",value:function(e,t){if(e&&t&&"string"==typeof e)return this._query[e]=t,this;throw Error("First argument should be a String.")}},{key:"includeSchema",value:function(){return this._query.include_schema=!0,this}},{key:"includeContentType",value:function(){return this._query.include_content_type=!0,this}},{key:"includeOwner",value:function(){return this._query.include_owner=!0,this}},{key:"addParam",value:function(e,t){if(e&&t&&"string"==typeof e&&"string"==typeof t)return this._query[e]=t,this;throw Error("Kindly provide valid parameters.")}},{key:"fetch",value:function(){if(this.entry_uid){var e={uid:this.entry_uid,content_type_uid:this.content_type_uid,params:this._query,action:"getEntry"};return this._connection.sendToParent("stackQuery",e).then(a).catch(u)}return Promise.reject("Kindly provide an entry uid. e.g. .Entry('bltsomething123')")}}]),e}();function a(e){return"string"==typeof e.data?Promise.reject(e.data):Promise.resolve(e.data)}function u(e){return Promise.reject(e)}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.uid=t.data.uid,this.data_type=t.data.schema.data_type,this.schema=t.data.schema,this._data=t.data.value,this._connection=n,this._self=t.data.self||!1;var o=this;r.on("updateFields",function(e){var t=o.uid.split("."),n=e.data;t.forEach(function(e){n&&(n=n[e])}),o._data!==n&&(o._data=n)})}return r(e,[{key:"setData",value:function(e){var t=this,n=this,r={data:e,uid:n.uid,self:n._self};return this._connection.sendToParent("setData",r).then(function(){return t._data=e,Promise.resolve(n)}).catch(function(e){return Promise.reject(e)})}},{key:"getData",value:function(){return this._data}},{key:"setFocus",value:function(){return this._connection.sendToParent("focus")}}]),e}();t.default=o},function(e,t,n){"use strict";e.exports=n(11),e.exports.default=e.exports},function(e,t,n){"use strict";var r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(t){function i(){}var a=i.prototype,u=t.EventEmitter;function s(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function c(e){return function(){return this[e].apply(this,arguments)}}a.getListeners=function(e){var t,n,r=this._getEvents();if(e instanceof RegExp)for(n in t={},r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n]);else t=r[e]||(r[e]=[]);return t},a.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},a.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&((t={})[e]=n),t||n},a.addListener=function(e,t){if(!function e(t){return"function"==typeof t||t instanceof RegExp||!(!t||"object"!==(void 0===t?"undefined":o(t)))&&e(t.listener)}(t))throw new TypeError("listener must be a function");var n,r=this.getListenersAsObject(e),i="object"===(void 0===t?"undefined":o(t));for(n in r)r.hasOwnProperty(n)&&-1===s(r[n],t)&&r[n].push(i?t:{listener:t,once:!1});return this},a.on=c("addListener"),a.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},a.once=c("addOnceListener"),a.defineEvent=function(e){return this.getListeners(e),this},a.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},a.removeListener=function(e,t){var n,r,o=this.getListenersAsObject(e);for(r in o)o.hasOwnProperty(r)&&-1!==(n=s(o[r],t))&&o[r].splice(n,1);return this},a.off=c("removeListener"),a.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},a.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},a.manipulateListeners=function(e,t,n){var r,i,a=e?this.removeListener:this.addListener,u=e?this.removeListeners:this.addListeners;if("object"!==(void 0===t?"undefined":o(t))||t instanceof RegExp)for(r=n.length;r--;)a.call(this,t,n[r]);else for(r in t)t.hasOwnProperty(r)&&(i=t[r])&&("function"==typeof i?a.call(this,r,i):u.call(this,r,i));return this},a.removeEvent=function(e){var t,n=void 0===e?"undefined":o(e),r=this._getEvents();if("string"===n)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},a.removeAllListeners=c("removeEvent"),a.emitEvent=function(e,t){var n,r,o,i,a=this.getListenersAsObject(e);for(i in a)if(a.hasOwnProperty(i))for(n=a[i].slice(0),o=0;o<n.length;o++)!0===(r=n[o]).once&&this.removeListener(e,r.listener),r.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,r.listener);return this},a.trigger=c("emitEvent"),a.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},a.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},a._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},a._getEvents=function(){return this._events||(this._events={})},i.noConflict=function(){return t.EventEmitter=u,i},void 0===(r=function(){return i}.call(t,n,t,e))||(e.exports=r)}({})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){return e&&e.__esModule?e:{default:e}}(n(2));var i=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.content_type=t.data.content_type,this._data=t.data.entry,this.locale=t.data.locale,this._connection=n,this._emitter=r;var o=this;this._emitter.on("entrySave",function(e){o._data=e.data})}return r(e,[{key:"getData",value:function(){return this._data}},{key:"getField",value:function(e){var t=e.split("."),n=this._data,r=this.content_type.schema;try{var i=!1;t.forEach(function(e,o){if(i)i=!1;else{if(!(r=r.find(function(t){return t.uid===e})))throw Error("schema not found");n=n[e],"group"===r.data_type&&!1===r.multiple&&t.length!==o+1?r=r.schema:"group"===r.data_type&&!0===r.multiple&&t.length!==o+1&&(r=r.schema,n=n[t[o+1]],i=!0)}})}catch(e){throw Error("Invalid uid, Field not found")}var a={data:{uid:e,value:n,schema:r,data_type:r.data_type}};return new o.default(a,this._connection,this._emitter)}},{key:"onSave",value:function(e){if(!e||"function"!=typeof e)throw Error("Callback must be a function");this._emitter.on("entrySave",function(t){e(t.data)})}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),a=function(e){return e&&e.__esModule?e:{default:e}}(n(1));var u={compare:function(e){return function(t,n){if(t&&n&&"string"==typeof t&&void 0!==n)return this._query.query[t]=this._query.query.file_size||{},this._query.query[t][e]=n,this;throw Error("Kindly provide valid parameters.")}},contained:function(e){var t=e?"$in":"$nin";return function(e,n){if(e&&n&&"string"==typeof e&&Array.isArray(n))return this._query.query[e]=this._query.query[e]||{},this._query.query[e][t]=this._query.query[e][t]||[],this._query.query[e][t]=this._query.query[e][t].concat(n),this;throw Error("Kindly provide valid parameters.")}},exists:function(e){return function(t){if(t&&"string"==typeof t)return this._query.query[t]=this._query.query[t]||{},this._query.query[t].$exists=e,this;throw Error("Kindly provide valid parameters.")}},logical:function(e){return function(){for(var t=[],n=0,r=arguments.length;n<r;n++)arguments[n]instanceof s&&arguments[n]._query.query?t.push(arguments[n]._query.query):"object"===o(arguments[n])&&t.push(arguments[n]);return this._query.query[e]?this._query.query[e]=this._query.query[e].concat(t):this._query.query[e]=t,this}},sort:function(e){return function(t){if(t&&"string"==typeof t)return this._query[e]=t,this;throw Error("Argument should be a string.")}},pagination:function(e){return function(t){if("number"==typeof t)return this._query[e]=t,this;throw Error("Argument should be a number.")}}},s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._connection=e,n._query=n._query,n._query.query=n._query.query||{},n.lessThan=u.compare("$lt"),n.lessThanOrEqualTo=u.compare("$lte"),n.greaterThan=u.compare("$gt"),n.greaterThanOrEqualTo=u.compare("$gte"),n.notEqualTo=u.compare("$ne"),n.containedIn=u.contained(!0),n.notContainedIn=u.contained(!1),n.exists=u.exists(!0),n.notExists=u.exists(!1),n.ascending=u.sort("asc"),n.descending=u.sort("desc"),n.beforeUid=u.sort("before_uid"),n.afterUid=u.sort("after_uid"),n.skip=u.pagination("skip"),n.limit=u.pagination("limit"),n.or=u.logical("$or"),n.and=u.logical("$and"),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"equalTo",value:function(e,t){if(e&&"string"==typeof e)return this._query.query[e]=t,this;throw Error("Kindly provide valid parameters.")}},{key:"where",value:function(e,t){if(e&&"string"==typeof e)return this._query.query[e]=t,this;throw Error("Kindly provide valid parameters.")}},{key:"count",value:function(){this._query.count=!0;var e={content_type_uid:this.content_type_uid,params:this._query};return e.action=this.type&&"asset"===this.type?"getAssets":"getEntries",this._connection.sendToParent("stackQuery",e).then(c).catch(f)}},{key:"query",value:function(e){if("object"===(void 0===e?"undefined":o(e)))return this._query.query=i.mergeDeep(this._query.query,e),this;throw Error("Kindly provide valid parameters")}},{key:"tags",value:function(e){if(Array.isArray(e))return this._query.tags=e,this;throw Error("Kindly provide valid parameters")}},{key:"includeCount",value:function(){return this._query.include_count=!0,this}},{key:"addParam",value:function(e,t){if(e&&t&&"string"==typeof e&&"string"==typeof t)return this._query[e]=t,this;throw Error("Kindly provide valid parameters.")}},{key:"getQuery",value:function(){return this._query.query}},{key:"regex",value:function(e,t,n){if(e&&t&&"string"==typeof e&&"string"==typeof t)return this._query.query[e]={$regex:t},n&&(this._query.query[e].$options=n),this;throw Error("Kindly provide valid parameters.")}},{key:"search",value:function(e){if(e&&"string"==typeof e)return this._query.typeahead=e,this;throw Error("Kindly provide valid parameters.")}},{key:"find",value:function(){var e={content_type_uid:this.content_type_uid,params:this._query};return e.action=this.type&&"asset"===this.type?"getAssets":"getEntries",this._connection.sendToParent("stackQuery",e).then(c).catch(f)}},{key:"findOne",value:function(){this.singleEntry=!0,this._query.limit=1;var e={content_type_uid:this.content_type_uid,params:this._query};return e.action=this.type&&"asset"===this.type?"getAssets":"getEntries",this._connection.sendToParent("stackQuery",e).then(c).catch(f)}}]),t}();function c(e){return"string"==typeof e.data?Promise.reject(e.data):Promise.resolve(e.data)}function f(e){return Promise.reject(e)}t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));var i=function(){function e(t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._connection=t,this._query={},this.only=o.transform("only"),this}return r(e,[{key:"addParam",value:function(e,t){if(e&&"string"==typeof e&&t&&"string"==typeof t)return this._query[e]=t,this;throw Error("Kindly provide valid parameters.")}},{key:"fetch",value:function(){var e={uid:this.asset_uid,params:this._query,action:"getAsset"};return this._connection.sendToParent("stackQuery",e).then(a).catch(u)}}]),e}();function a(e){return"string"==typeof e.data?Promise.reject(e.data):Promise.resolve(e.data)}function u(e){return Promise.reject(e)}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),i=s(n(1)),a=s(n(7)),u=s(n(6));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._connection=n,this._data=t}return r(e,[{key:"getData",value:function(){return this._data}},{key:"ContentType",value:function(e){return e&&"string"==typeof e&&(this.content_type_uid=e,this.type="contentType"),this}},{key:"Entry",value:function(e){var t=new i.default(this._connection);return e&&"string"==typeof e&&(t.entry_uid=e),o.merge(t,this)}},{key:"Assets",value:function(e){if(this.type="asset",e&&"string"==typeof e){var t=new a.default;return t.asset_uid=e,o.merge(t,this)}return this}},{key:"Query",value:function(){var e=new u.default(this._connection);return o.merge(e,this)}},{key:"getContentType",value:function(e,t){if(!e)return Promise.reject("uid is required");var n={uid:e,params:t=t||{},action:"getContentType"};return this._connection.sendToParent("stackQuery",n).then(f).catch(d)}},{key:"getContentTypes",value:function(e,t){e=e||{},(t=t||{}).query=e;var n={params:t,action:"getContentTypes"};return this._connection.sendToParent("stackQuery",n).then(f).catch(d)}},{key:"getEnvironment",value:function(e,t){if(!e)return Promise.reject("name is required");var n={name:e,params:t=t||{},action:"getEnvironment"};return this._connection.sendToParent("stackQuery",n).then(f).catch(d)}},{key:"getEnvironments",value:function(e,t){e=e||{},(t=t||{}).query=e;var n={params:t,action:"getEnvironments"};return this._connection.sendToParent("stackQuery",n).then(f).catch(d)}},{key:"getLocale",value:function(e,t){if(!e)return Promise.reject("code is required");var n={code:e,params:t=t||{},action:"getLocale"};return this._connection.sendToParent("stackQuery",n).then(f).catch(d)}},{key:"getLocales",value:function(e,t){e=e||{},(t=t||{}).query=e;var n={params:t,action:"getLocales"};return this._connection.sendToParent("stackQuery",n).then(f).catch(d)}}]),e}();function f(e){return"string"==typeof e.data?Promise.reject(e.data):Promise.resolve(e.data)}function d(e){return Promise.reject(e)}t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o={attributes:!0,childList:!0,subtree:!0},i=void 0,a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._connection=t,this._height,this._autoResizingEnabled=!1}return r(e,[{key:"updateHeight",value:function(e){return e&&!isNaN(e)||(e=Math.ceil(document.documentElement.getBoundingClientRect().height)),this._height===e?Promise.resolve():(this._height=e,this._connection.sendToParent("resize",e))}},{key:"enableAutoResizing",value:function(){return this._autoResizingEnabled?this:(this._autoResizingEnabled=!0,(i=new MutationObserver(this.updateHeight.bind(this))).observe(window.document.body,o),this)}},{key:"disableAutoResizing",value:function(){return this._autoResizingEnabled?(this._autoResizingEnabled=!1,i.disconnect(),this):this}}]),e}();t.default=a},function(e,t,n){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";(function(e){var n,r,o,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(a,u){"object"==i(t)&&"object"==i(e)?e.exports=u():(r=[],void 0===(o="function"==typeof(n=u)?n.apply(t,r):n)||(e.exports=o))}("undefined"!=typeof self&&self,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/index.js")}({"./node_modules/cross-domain-utils/src/index.js":function(e,t,n){var r=n("./node_modules/cross-domain-utils/src/utils.js");n.d(t,"getActualDomain",function(){return r.a}),n.d(t,"getAncestor",function(){return r.b}),n.d(t,"getDomain",function(){return r.c}),n.d(t,"getUserAgent",function(){return r.d}),n.d(t,"isActuallySameDomain",function(){return r.e}),n.d(t,"isAncestor",function(){return r.f}),n.d(t,"isIframe",function(){return r.g}),n.d(t,"isPopup",function(){return r.h}),n.d(t,"isWindow",function(){return r.i}),n.d(t,"isWindowClosed",function(){return r.j}),n.d(t,"matchDomain",function(){return r.k}),n.d(t,"stringifyDomainPattern",function(){return r.l});var o=n("./node_modules/cross-domain-utils/src/types.js");n.n(o)},"./node_modules/cross-domain-utils/src/types.js":function(e,t){},"./node_modules/cross-domain-utils/src/utils.js":function(e,t,n){function r(e){return"[object RegExp]"===Object.prototype.toString.call(e)}t.a=f,t.c=d,t.e=l,t.j=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{if(e===window)return!1}catch(e){return!0}try{if(!e)return!0}catch(e){return!0}try{if(e.closed)return!0}catch(e){return!e||e.message!==i}if(t&&function(e){if(!l(e))return!1;try{if(e===window)return!0;if(a(e)&&c(e))return!0;if(d(window)===d(e))return!0}catch(e){}return!1}(e))try{if(e.mockclosed)return!0}catch(e){}try{if(!e.parent||!e.top)return!0}catch(e){}var n=function(e,t){for(var n=0;n<e.length;n++)try{if(e[n]===t)return n}catch(e){}return-1}(p,e);if(-1!==n){var r=v[n];if(r&&function(e){if(!e.contentWindow)return!0;if(!e.parentNode)return!0;var t=e.ownerDocument;return!(!t||!t.body||t.body.contains(e))}(r))return!0}return!1},t.d=function(e){return(e=e||window).navigator.mockUserAgent||e.navigator.userAgent},t.b=_,t.f=function(e,t){var n=_(t);if(n)return n===e;if(t===e)return!1;if(function(e){if(e){try{if(e.top)return e.top}catch(e){}if(u(e)===e)return e;try{if(h(window,e)&&window.top)return window.top}catch(e){}try{if(h(e,window)&&window.top)return window.top}catch(e){}for(var t=0,n=function e(t){for(var n=[],r=0,o=y(t),i=null==o?0:o.length;r<i;r++){var a=o[r];n.push(a);for(var u=0,s=e(a),c=null==s?0:s.length;u<c;u++){var f=s[u];n.push(f)}}return n}(e),r=null==n?0:n.length;t<r;t++){var o=n[t];try{if(o.top)return o.top}catch(e){}if(u(o)===o)return o}}}(t)===t)return!1;for(var r=0,o=y(e),i=null==o?0:o.length;r<i;r++)if(o[r]===t)return!0;return!1},t.h=function(){return Boolean(s(window))},t.g=function(){return Boolean(u(window))},t.k=function e(t,n){if("string"==typeof t){if("string"==typeof n)return t===o.WILDCARD||n===t;if(r(n))return!1;if(Array.isArray(n))return!1}return r(t)?r(n)?t.toString()===n.toString():!Array.isArray(n)&&Boolean(n.match(t)):!!Array.isArray(t)&&(Array.isArray(n)?JSON.stringify(t)===JSON.stringify(n):!r(n)&&t.some(function(t){return e(t,n)}))},t.l=function(e){return Array.isArray(e)?"("+e.join(" | ")+")":r(e)?"RegExp("+e.toString():e.toString()},t.i=function(e){try{if(e===window)return!0}catch(e){if(e&&e.message===i)return!0}try{if("[object Window]"===Object.prototype.toString.call(e))return!0}catch(e){if(e&&e.message===i)return!0}try{if(window.Window&&e instanceof window.Window)return!0}catch(e){if(e&&e.message===i)return!0}try{if(e&&e.self===e)return!0}catch(e){if(e&&e.message===i)return!0}try{if(e&&e.parent===e)return!0}catch(e){if(e&&e.message===i)return!0}try{if(e&&e.top===e)return!0}catch(e){if(e&&e.message===i)return!0}try{e&&e.__cross_domain_utils_window_check__}catch(e){return!0}return!1};var o={MOCK_PROTOCOL:"mock:",FILE_PROTOCOL:"file:",ABOUT_PROTOCOL:"about:",WILDCARD:"*"},i="Call was rejected by callee.\r\n";function a(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:window).location.protocol===o.ABOUT_PROTOCOL}function u(e){if(e)try{if(e.parent&&e.parent!==e)return e.parent}catch(e){}}function s(e){if(e&&!u(e))try{return e.opener}catch(e){}}function c(e){try{return e&&e.location&&e.location.href,!0}catch(e){}return!1}function f(e){var t=(e=e||window).location;if(!t)throw new Error("Can not read window location");var n=t.protocol;if(!n)throw new Error("Can not read window protocol");if(n===o.FILE_PROTOCOL)return o.FILE_PROTOCOL+"//";if(n===o.ABOUT_PROTOCOL){var r=u(e);return r&&c(r)?f(r):o.ABOUT_PROTOCOL+"//"}var i=t.host;if(!i)throw new Error("Can not read window host");return n+"//"+i}function d(e){var t=f(e=e||window);return t&&e.mockDomain&&0===e.mockDomain.indexOf(o.MOCK_PROTOCOL)?e.mockDomain:t}function l(e){try{if(e===window)return!0}catch(e){}try{var t=Object.getOwnPropertyDescriptor(e,"location");if(t&&!1===t.enumerable)return!1}catch(e){}try{if(a(e)&&c(e))return!0}catch(e){}try{if(f(e)===f(window))return!0}catch(e){}return!1}function h(e,t){if(!e||!t)return!1;var n=u(t);return n?n===e:-1!==function(e){var t=[];try{for(;e.parent!==e;)t.push(e.parent),e=e.parent}catch(e){}return t}(t).indexOf(e)}function y(e){var t=[],n=void 0;try{n=e.frames}catch(t){n=e}var r=void 0;try{r=n.length}catch(e){}if(0===r)return t;if(r){for(var o=0;o<r;o++){var i=void 0;try{i=n[o]}catch(e){continue}t.push(i)}return t}for(var a=0;a<100;a++){var u=void 0;try{u=n[a]}catch(e){return t}if(!u)return t;t.push(u)}return t}var p=[],v=[];function _(e){return s(e=e||window)||u(e)||void 0}},"./src/index.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),n.d({},"WeakMap",function(){return f});var r={};n.d(r,"cleanUpWindow",function(){return re}),n.d(r,"Promise",function(){return b}),n.d(r,"bridge",function(){return oe}),n.d(r,"init",function(){return ie}),n.d(r,"parent",function(){return ne}),n.d(r,"send",function(){return z}),n.d(r,"request",function(){return Y}),n.d(r,"sendToParent",function(){return Q}),n.d(r,"client",function(){return J}),n.d(r,"on",function(){return V}),n.d(r,"listen",function(){return $}),n.d(r,"once",function(){return X}),n.d(r,"listener",function(){return ee}),n.d(r,"CONFIG",function(){return h}),n.d(r,"CONSTANTS",function(){return d}),n.d(r,"disable",function(){return te});var o=n("./node_modules/cross-domain-utils/src/index.js");function a(e,t){for(var n=0;n<e.length;n++)try{if(e[n]===t)return n}catch(e){}return-1}var u,s=Object.defineProperty,c=Date.now()%1e9,f=function(){function e(){if(function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),c+=1,this.name="__weakmap_"+(1e9*Math.random()>>>0)+"__"+c,function(){if(!window.WeakMap)return!1;if(!window.Object.freeze)return!1;try{var e=new window.WeakMap,t={};return window.Object.freeze(t),e.set(t,"__testvalue__"),"__testvalue__"===e.get(t)}catch(e){return!1}}())try{this.weakmap=new window.WeakMap}catch(e){}this.keys=[],this.values=[]}return e.prototype._cleanupClosedWindows=function(){for(var e=this.weakmap,t=this.keys,n=0;n<t.length;n++){var r=t[n];if(Object(o.isWindow)(r)&&Object(o.isWindowClosed)(r)){if(e)try{e.delete(r)}catch(e){}t.splice(n,1),this.values.splice(n,1),n-=1}}},e.prototype.isSafeToReadWrite=function(e){if(Object(o.isWindow)(e))return!1;try{e&&e.self,e&&e[this.name]}catch(e){return!1}return!0},e.prototype.set=function(e,t){if(!e)throw new Error("WeakMap expected key");var n=this.weakmap;if(n)try{n.set(e,t)}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e)){var r=this.name,o=e[r];o&&o[0]===e?o[1]=t:s(e,r,{value:[e,t],writable:!0})}else{this._cleanupClosedWindows();var i=this.keys,u=this.values,c=a(i,e);-1===c?(i.push(e),u.push(t)):u[c]=t}},e.prototype.get=function(e){if(!e)throw new Error("WeakMap expected key");var t=this.weakmap;if(t)try{if(t.has(e))return t.get(e)}catch(e){delete this.weakmap}if(!this.isSafeToReadWrite(e)){this._cleanupClosedWindows();var n=a(this.keys,e);if(-1===n)return;return this.values[n]}var r=e[this.name];if(r&&r[0]===e)return r[1]},e.prototype.delete=function(e){if(!e)throw new Error("WeakMap expected key");var t=this.weakmap;if(t)try{t.delete(e)}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e)){var n=e[this.name];n&&n[0]===e&&(n[0]=n[1]=void 0)}else{this._cleanupClosedWindows();var r=this.keys,o=a(r,e);-1!==o&&(r.splice(o,1),this.values.splice(o,1))}},e.prototype.has=function(e){if(!e)throw new Error("WeakMap expected key");var t=this.weakmap;if(t)try{return t.has(e)}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e)){var n=e[this.name];return!(!n||n[0]!==e)}return this._cleanupClosedWindows(),-1!==a(this.keys,e)},e}(),d={POST_MESSAGE_TYPE:{REQUEST:"postrobot_message_request",RESPONSE:"postrobot_message_response",ACK:"postrobot_message_ack"},POST_MESSAGE_ACK:{SUCCESS:"success",ERROR:"error"},POST_MESSAGE_NAMES:{METHOD:"postrobot_method",HELLO:"postrobot_ready",OPEN_TUNNEL:"postrobot_open_tunnel"},WINDOW_TYPES:{FULLPAGE:"fullpage",POPUP:"popup",IFRAME:"iframe"},WINDOW_PROPS:{POSTROBOT:"__postRobot__"},SERIALIZATION_TYPES:{METHOD:"postrobot_method",ERROR:"postrobot_error",PROMISE:"postrobot_promise",ZALGO_PROMISE:"postrobot_zalgo_promise",REGEX:"regex"},SEND_STRATEGIES:{POST_MESSAGE:"postrobot_post_message",BRIDGE:"postrobot_bridge",GLOBAL:"postrobot_global"},MOCK_PROTOCOL:"mock:",FILE_PROTOCOL:"file:",BRIDGE_NAME_PREFIX:"__postrobot_bridge__",POSTROBOT_PROXY:"__postrobot_proxy__",WILDCARD:"*"},l={METHOD:"postrobot_method",HELLO:"postrobot_hello",OPEN_TUNNEL:"postrobot_open_tunnel"},h=(Object.keys(l).map(function(e){return l[e]}),{ALLOW_POSTMESSAGE_POPUP:!("__ALLOW_POSTMESSAGE_POPUP__"in window)||window.__ALLOW_POSTMESSAGE_POPUP__,BRIDGE_TIMEOUT:5e3,CHILD_WINDOW_TIMEOUT:5e3,ACK_TIMEOUT:-1!==window.navigator.userAgent.match(/MSIE/i)?2e3:1e3,RES_TIMEOUT:-1,ALLOWED_POST_MESSAGE_METHODS:(u={},u[d.SEND_STRATEGIES.POST_MESSAGE]=!0,u[d.SEND_STRATEGIES.BRIDGE]=!0,u[d.SEND_STRATEGIES.GLOBAL]=!0,u),ALLOW_SAME_ORIGIN:!1});0===window.location.href.indexOf(d.FILE_PROTOCOL)&&(h.ALLOW_POSTMESSAGE_POPUP=!0);var y="function"==typeof Symbol&&"symbol"==i(Symbol.iterator)?function(e){return void 0===e?"undefined":i(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":i(e)};function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(t>=3)return"stringifyError stack overflow";try{if(!e)return"<unknown error: "+Object.prototype.toString.call(e)+">";if("string"==typeof e)return e;if(e instanceof Error){var n=e&&e.stack,r=e&&e.message;if(n&&r)return-1!==n.indexOf(r)?n:r+"\n"+n;if(n)return n;if(r)return r}return"function"==typeof e.toString?e.toString():Object.prototype.toString.call(e)}catch(e){return"Error while stringifying error: "+p(e,t+1)}}var v=function(e){if(!e)return e;var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}};function _(){}function m(){var e="0123456789abcdef";return"xxxxxxxxxx".replace(/./g,function(){return e.charAt(Math.floor(Math.random()*e.length))})}function w(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(n>=100)throw new Error("Self-referential object passed, or object contained too many layers");var r=void 0;if("object"!==(void 0===e?"undefined":y(e))||null===e||Array.isArray(e)){if(!Array.isArray(e))throw new TypeError("Invalid type: "+(void 0===e?"undefined":y(e)));r=[]}else r={};return function(e,t){Array.isArray(e)?function(e,t){for(var n=0;n<e.length;n++)t(e[n],n)}(e,t):"object"===(void 0===e?"undefined":y(e))&&null!==e&&function(e,t){for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)}(e,t)}(e,function(e,o){var i=t(e,o);void 0!==i?r[o]=i:"object"===(void 0===e?"undefined":y(e))&&null!==e?r[o]=w(e,t,n+1):r[o]=e}),r}function g(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function E(e){try{if(!e)return!1;if("undefined"!=typeof Promise&&e instanceof Promise)return!0;if("undefined"!=typeof window&&window.Window&&e instanceof window.Window)return!1;if("undefined"!=typeof window&&window.constructor&&e instanceof window.constructor)return!1;var t={}.toString;if(t){var n=t.call(e);if("[object Window]"===n||"[object global]"===n||"[object DOMWindow]"===n)return!1}if("function"==typeof e.then)return!0}catch(e){return!1}return!1}function O(){var e=void 0;if("undefined"!=typeof window)e=window;else{if("undefined"==typeof window)throw new TypeError("Can not find global");e=window}var t=e.__zalgopromise__=e.__zalgopromise__||{};return t.flushPromises=t.flushPromises||[],t.activeCount=t.activeCount||0,t.possiblyUnhandledPromiseHandlers=t.possiblyUnhandledPromiseHandlers||[],t.dispatchedErrors=t.dispatchedErrors||[],t}var b=function(){function e(t){var n=this;if(function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.resolved=!1,this.rejected=!1,this.errorHandled=!1,this.handlers=[],t){var r=void 0,o=void 0,i=!1,a=!1,u=!1;try{t(function(e){u?n.resolve(e):(i=!0,r=e)},function(e){u?n.reject(e):(a=!0,o=e)})}catch(e){return void this.reject(e)}u=!0,i?this.resolve(r):a&&this.reject(o)}}return e.prototype.resolve=function(e){if(this.resolved||this.rejected)return this;if(E(e))throw new Error("Can not resolve promise with another promise");return this.resolved=!0,this.value=e,this.dispatch(),this},e.prototype.reject=function(e){var t=this;if(this.resolved||this.rejected)return this;if(E(e))throw new Error("Can not reject promise with another promise");if(!e){var n=e&&"function"==typeof e.toString?e.toString():Object.prototype.toString.call(e);e=new Error("Expected reject to be called with Error, got "+n)}return this.rejected=!0,this.error=e,this.errorHandled||setTimeout(function(){t.errorHandled||function(e,t){if(-1===O().dispatchedErrors.indexOf(e)){O().dispatchedErrors.push(e),setTimeout(function(){throw e},1);for(var n=0;n<O().possiblyUnhandledPromiseHandlers.length;n++)O().possiblyUnhandledPromiseHandlers[n](e,t)}}(e,t)},1),this.dispatch(),this},e.prototype.asyncReject=function(e){this.errorHandled=!0,this.reject(e)},e.prototype.dispatch=function(){var t=this,n=this.dispatching,r=this.resolved,o=this.rejected,i=this.handlers;if(!n&&(r||o)){this.dispatching=!0,O().activeCount+=1;for(var a=function(n){var a=i[n],u=a.onSuccess,s=a.onError,c=a.promise,f=void 0;if(r)try{f=u?u(t.value):t.value}catch(e){return c.reject(e),"continue"}else if(o){if(!s)return c.reject(t.error),"continue";try{f=s(t.error)}catch(e){return c.reject(e),"continue"}}f instanceof e&&(f.resolved||f.rejected)?(f.resolved?c.resolve(f.value):c.reject(f.error),f.errorHandled=!0):E(f)?f instanceof e&&(f.resolved||f.rejected)?f.resolved?c.resolve(f.value):c.reject(f.error):f.then(function(e){c.resolve(e)},function(e){c.reject(e)}):c.resolve(f)},u=0;u<i.length;u++)a(u);i.length=0,this.dispatching=!1,O().activeCount-=1,0===O().activeCount&&e.flushQueue()}},e.prototype.then=function(t,n){if(t&&"function"!=typeof t&&!t.call)throw new Error("Promise.then expected a function for success handler");if(n&&"function"!=typeof n&&!n.call)throw new Error("Promise.then expected a function for error handler");var r=new e;return this.handlers.push({promise:r,onSuccess:t,onError:n}),this.errorHandled=!0,this.dispatch(),r},e.prototype.catch=function(e){return this.then(void 0,e)},e.prototype.finally=function(t){if(t&&"function"!=typeof t&&!t.call)throw new Error("Promise.finally expected a function");return this.then(function(n){return e.try(t).then(function(){return n})},function(n){return e.try(t).then(function(){throw n})})},e.prototype.timeout=function(e,t){var n=this;if(this.resolved||this.rejected)return this;var r=setTimeout(function(){n.resolved||n.rejected||n.reject(t||new Error("Promise timed out after "+e+"ms"))},e);return this.then(function(e){return clearTimeout(r),e})},e.prototype.toPromise=function(){if("undefined"==typeof Promise)throw new TypeError("Could not find Promise");return Promise.resolve(this)},e.resolve=function(t){return t instanceof e?t:E(t)?new e(function(e,n){return t.then(e,n)}):(new e).resolve(t)},e.reject=function(t){return(new e).reject(t)},e.all=function(t){var n=new e,r=t.length,o=[];if(!r)return n.resolve(o),n;for(var i=function(i){var a=t[i];if(a instanceof e){if(a.resolved)return o[i]=a.value,r-=1,"continue"}else if(!E(a))return o[i]=a,r-=1,"continue";e.resolve(a).then(function(e){o[i]=e,0==(r-=1)&&n.resolve(o)},function(e){n.reject(e)})},a=0;a<t.length;a++)i(a);return 0===r&&n.resolve(o),n},e.hash=function(t){var n={};return e.all(Object.keys(t).map(function(r){return e.resolve(t[r]).then(function(e){n[r]=e})})).then(function(){return n})},e.map=function(t,n){return e.all(t.map(n))},e.onPossiblyUnhandledException=function(e){return function(e){return O().possiblyUnhandledPromiseHandlers.push(e),{cancel:function(){O().possiblyUnhandledPromiseHandlers.splice(O().possiblyUnhandledPromiseHandlers.indexOf(e),1)}}}(e)},e.try=function(t,n,r){if(t&&"function"!=typeof t&&!t.call)throw new Error("Promise.try expected a function");var o=void 0;try{o=t.apply(n,r||[])}catch(t){return e.reject(t)}return e.resolve(o)},e.delay=function(t){return new e(function(e){setTimeout(e,t)})},e.isPromise=function(t){return!!(t&&t instanceof e)||E(t)},e.flush=function(){var t=new e;return O().flushPromises.push(t),0===O().activeCount&&e.flushQueue(),t},e.flushQueue=function(){var e=O().flushPromises;O().flushPromises=[];for(var t=0,n=null==e?0:e.length;t<n;t++)e[t].resolve()},e}(),S=window[d.WINDOW_PROPS.POSTROBOT]=window[d.WINDOW_PROPS.POSTROBOT]||{};S.registerSelf=function(){};var P="function"==typeof Symbol&&"symbol"==i(Symbol.iterator)?function(e){return void 0===e?"undefined":i(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":i(e)};S.methods=S.methods||new f;var T=v(function(){S.on(d.POST_MESSAGE_NAMES.METHOD,{origin:d.WILDCARD},function(e){var t=e.source,n=e.origin,r=e.data,i=S.methods.get(t);if(!i)throw new Error("Could not find any methods this window has privileges to call");var a=i[r.id];if(!a)throw new Error("Could not find method with id: "+r.id);if(!Object(o.matchDomain)(a.domain,n))throw new Error("Method domain "+a.domain+" does not match origin "+n);return b.try(function(){return a.method.apply({source:t,origin:n,data:r},r.args)}).then(function(e){return{result:e,id:r.id,name:r.name}})})});function A(e,t){return"object"===(void 0===e?"undefined":P(e))&&null!==e&&e.__type__===t}function j(e,t,n,r){var o=m(),i=S.methods.get(e);return i||(i={},S.methods.set(e,i)),i[o]={domain:t,method:n},{__type__:d.SERIALIZATION_TYPES.METHOD,__id__:o,__name__:r}}function R(e,t,n){function r(){var r=Array.prototype.slice.call(arguments);return S.send(e,d.POST_MESSAGE_NAMES.METHOD,{id:n.__id__,name:n.__name__,args:r},{domain:t,timeout:-1}).then(function(e){return e.data.result},function(e){throw e})}return r.__name__=n.__name__,r.__xdomain__=!0,r.source=e,r.origin=t,r}function L(e,t,n){return new b(function(r,o){return R(e,t,n.__then__)(r,o)})}function k(e){return S.send(e,d.POST_MESSAGE_NAMES.HELLO,{},{domain:d.WILDCARD,timeout:-1}).then(function(e){return{origin:e.origin}})}S.readyPromises=S.readyPromises||new f;var I={};I[d.SEND_STRATEGIES.POST_MESSAGE]=function(e,t,n){(Array.isArray(n)?n:"string"==typeof n?[n]:[d.WILDCARD]).map(function(t){if(0===t.indexOf(d.MOCK_PROTOCOL)){if(window.location.protocol===d.FILE_PROTOCOL)return d.WILDCARD;if(!Object(o.isActuallySameDomain)(e))throw new Error("Attempting to send messsage to mock domain "+t+", but window is actually cross-domain");return Object(o.getActualDomain)(e)}return 0===t.indexOf(d.FILE_PROTOCOL)?d.WILDCARD:t}).forEach(function(n){return e.postMessage(t,n)})};var C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function D(e,t,n){return b.try(function(){var r;if(t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=m(),i=Object(o.isPopup)()?d.WINDOW_TYPES.POPUP:Object(o.isIframe)()?d.WINDOW_TYPES.IFRAME:d.WINDOW_TYPES.FULLPAGE,a=Object(o.getDomain)(window);return C({},t,n,{sourceDomain:a,id:t.id||r,windowType:i})}(e,t,{data:function(e,n,r){return w({obj:t.data},function(t,r){return"function"==typeof t?j(e,n,t,r.toString()):t instanceof Error?(o=t,{__type__:d.SERIALIZATION_TYPES.ERROR,__message__:p(o),__code__:o.code}):window.Promise&&t instanceof window.Promise?function(e,t,n,r){return{__type__:d.SERIALIZATION_TYPES.PROMISE,__then__:j(e,t,function(e,t){return n.then(e,t)},r+".then")}}(e,n,t,r.toString()):b.isPromise(t)?function(e,t,n,r){return{__type__:d.SERIALIZATION_TYPES.ZALGO_PROMISE,__then__:j(e,t,function(e,t){return n.then(e,t)},r+".then")}}(e,n,t,r.toString()):g(t)?(i=t,{__type__:d.SERIALIZATION_TYPES.REGEX,__source__:i.source}):void 0;var o,i}).obj}(e,n),domain:n}),e===window&&!h.ALLOW_SAME_ORIGIN)throw new Error("Attemping to send message to self");if(Object(o.isWindowClosed)(e))throw new Error("Window is closed");var i=[],a=function(e,t,n){var r=void 0,o=void 0;try{if("{}"!==JSON.stringify({})&&(r=Object.prototype.toJSON,delete Object.prototype.toJSON),"{}"!==JSON.stringify({}))throw new Error("Can not correctly serialize JSON objects");if("[]"!==JSON.stringify([])&&(o=Array.prototype.toJSON,delete Array.prototype.toJSON),"[]"!==JSON.stringify([]))throw new Error("Can not correctly serialize JSON objects")}catch(e){throw new Error("Can not repair JSON.stringify: "+e.message)}var i=JSON.stringify.call(this,e,null,2);try{r&&(Object.prototype.toJSON=r),o&&(Array.prototype.toJSON=o)}catch(e){throw new Error("Can not repair JSON.stringify: "+e.message)}return i}(((r={})[d.WINDOW_PROPS.POSTROBOT]=t,r));return b.map(Object.keys(I),function(t){return b.try(function(){if(!h.ALLOWED_POST_MESSAGE_METHODS[t])throw new Error("Strategy disallowed: "+t);return I[t](e,a,n)}).then(function(){return i.push(t+": success"),!0},function(e){return i.push(t+": "+p(e)+"\n"),!1})}).then(function(e){var n=e.some(Boolean),r=t.type+" "+t.name+" "+(n?"success":"error")+":\n  - "+i.join("\n  - ")+"\n";if(!n)throw new Error(r)})})}S.responseListeners=S.responseListeners||{},S.requestListeners=S.requestListeners||{},S.WINDOW_WILDCARD=S.WINDOW_WILDCARD||new function(){},S.erroredResponseListeners=S.erroredResponseListeners||{};var q,W="__domain_regex__";function M(e){return S.responseListeners[e]}function x(e){delete S.responseListeners[e]}function N(e){return Boolean(S.erroredResponseListeners[e])}function G(e){var t=e.name,n=e.win,r=e.domain;if(n===d.WILDCARD&&(n=null),r===d.WILDCARD&&(r=null),!t)throw new Error("Name required to get request listener");var i=S.requestListeners[t];if(i)for(var a=0,u=[n,S.WINDOW_WILDCARD],s=null==u?0:u.length;a<s;a++){var c=u[a],f=c&&i.get(c);if(f){if(r&&"string"==typeof r){if(f[r])return f[r];if(f[W])for(var l=0,h=f[W],y=null==h?0:h.length;l<y;l++){var p=h[l],v=p.regex,_=p.listener;if(Object(o.matchDomain)(v,r))return _}}if(f[d.WILDCARD])return f[d.WILDCARD]}}}var U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H=((q={})[d.POST_MESSAGE_TYPE.ACK]=function(e,t,n){if(!N(n.hash)){var r=M(n.hash);if(!r)throw new Error("No handler found for post message ack for message: "+n.name+" from "+t+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!Object(o.matchDomain)(r.domain,t))throw new Error("Ack origin "+t+" does not match domain "+r.domain.toString());r.ack=!0}},q[d.POST_MESSAGE_TYPE.REQUEST]=function(e,t,n){var r=G({name:n.name,win:e,domain:t});function i(r){return n.fireAndForget||Object(o.isWindowClosed)(e)?b.resolve():D(e,U({target:n.originalSource,hash:n.hash,name:n.name},r),t)}return b.all([i({type:d.POST_MESSAGE_TYPE.ACK}),b.try(function(){if(!r)throw new Error("No handler found for post message: "+n.name+" from "+t+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!Object(o.matchDomain)(r.domain,t))throw new Error("Request origin "+t+" does not match domain "+r.domain.toString());var i=n.data;return r.handler({source:e,origin:t,data:i})}).then(function(e){return i({type:d.POST_MESSAGE_TYPE.RESPONSE,ack:d.POST_MESSAGE_ACK.SUCCESS,data:e})},function(e){var t=p(e).replace(/^Error: /,""),n=e.code;return i({type:d.POST_MESSAGE_TYPE.RESPONSE,ack:d.POST_MESSAGE_ACK.ERROR,error:t,code:n})})]).then(_).catch(function(e){if(r&&r.handleError)return r.handleError(e);throw e})},q[d.POST_MESSAGE_TYPE.RESPONSE]=function(e,t,n){if(!N(n.hash)){var r=M(n.hash);if(!r)throw new Error("No handler found for post message response for message: "+n.name+" from "+t+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!Object(o.matchDomain)(r.domain,t))throw new Error("Response origin "+t+" does not match domain "+Object(o.stringifyDomainPattern)(r.domain));if(x(n.hash),n.ack===d.POST_MESSAGE_ACK.ERROR){var i=new Error(n.error);return n.code&&(i.code=n.code),r.respond(i,null)}if(n.ack===d.POST_MESSAGE_ACK.SUCCESS){var a=n.data||n.response;return r.respond(null,{source:e,origin:t,data:a})}}},q),K="function"==typeof Symbol&&"symbol"==i(Symbol.iterator)?function(e){return void 0===e?"undefined":i(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":i(e)};function F(e){if(!window||window.closed)throw new Error("Message recieved in closed window");try{if(!e.source)return}catch(e){return}var t=e.source,n=e.origin,r=function(e){var t,n=void 0;try{t=e,n=JSON.parse(t)}catch(e){return}if(n&&"object"===(void 0===n?"undefined":K(n))&&null!==n&&(n=n[d.WINDOW_PROPS.POSTROBOT])&&"object"===(void 0===n?"undefined":K(n))&&null!==n&&n.type&&"string"==typeof n.type&&H[n.type])return n}(e.data);if(r){if(!r.sourceDomain||"string"!=typeof r.sourceDomain)throw new Error("Expected message to have sourceDomain");0!==r.sourceDomain.indexOf(d.MOCK_PROTOCOL)&&0!==r.sourceDomain.indexOf(d.FILE_PROTOCOL)||(n=r.sourceDomain),-1===S.receivedMessages.indexOf(r.id)&&(S.receivedMessages.push(r.id),Object(o.isWindowClosed)(t)&&!r.fireAndForget||(r.data&&(r.data=function(e,t,n){return w({obj:r.data},function(n){if("object"===(void 0===n?"undefined":P(n))&&null!==n)return A(n,d.SERIALIZATION_TYPES.METHOD)?R(e,t,n):A(n,d.SERIALIZATION_TYPES.ERROR)?function(e,t,n){var r=new Error(n.__message__);return n.__code__&&(r.code=n.__code__),r}(0,0,n):A(n,d.SERIALIZATION_TYPES.PROMISE)?function(e,t,n){return window.Promise?new window.Promise(function(r,o){return R(e,t,n.__then__)(r,o)}):L(e,t,n)}(e,t,n):A(n,d.SERIALIZATION_TYPES.ZALGO_PROMISE)?L(e,t,n):A(n,d.SERIALIZATION_TYPES.REGEX)?function(e,t,n){return new RegExp(n.__source__)}(0,0,n):void 0}).obj}(t,n)),H[r.type](t,n,r)))}}function B(e){try{e.source}catch(e){return}F({source:e.source||e.sourceElement,origin:e.origin||e.originalEvent&&e.originalEvent.origin,data:e.data})}function Y(e){return b.try(function(){if(!e.name)throw new Error("Expected options.name");var t=e.name,n=void 0,r=void 0;if("string"==typeof e.window){var i=document.getElementById(e.window);if(!i)throw new Error("Expected options.window "+Object.prototype.toString.call(e.window)+" to be a valid element id");if("iframe"!==i.tagName.toLowerCase())throw new Error("Expected options.window "+Object.prototype.toString.call(e.window)+" to be an iframe");if(!i.contentWindow)throw new Error("Iframe must have contentWindow.  Make sure it has a src attribute and is in the DOM.");n=i.contentWindow}else if(e.window instanceof HTMLIFrameElement){if("iframe"!==e.window.tagName.toLowerCase())throw new Error("Expected options.window "+Object.prototype.toString.call(e.window)+" to be an iframe");if(e.window&&!e.window.contentWindow)throw new Error("Iframe must have contentWindow.  Make sure it has a src attribute and is in the DOM.");e.window&&e.window.contentWindow&&(n=e.window.contentWindow)}else n=e.window;if(!n)throw new Error("Expected options.window to be a window object, iframe, or iframe element id.");var a=n;r=e.domain||d.WILDCARD;var u=e.name+"_"+m();if(Object(o.isWindowClosed)(a))throw new Error("Target window is closed");var s=!1,c=S.requestPromises.get(a);c||(c=[],S.requestPromises.set(a,c));var f=b.try(function(){if(Object(o.isAncestor)(window,a))return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Window",r=S.readyPromises.get(e);return r||(r=new b,S.readyPromises.set(e,r),-1!==t&&setTimeout(function(){return r.reject(new Error(n+" did not load after "+t+"ms"))},t),r)}(a,e.timeout||h.CHILD_WINDOW_TIMEOUT)}).then(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).origin;if(g(r)&&!e)return k(a)}).then(function(){var n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).origin;if(g(r)){if(!Object(o.matchDomain)(r,n))throw new Error("Remote window domain "+n+" does not match regex: "+r.toString());r=n}if("string"!=typeof r&&!Array.isArray(r))throw new TypeError("Expected domain to be a string or array");var i=r;return new b(function(n,r){var l=void 0;if(e.fireAndForget||function(e,t){S.responseListeners[e]=t}(u,l={name:t,window:a,domain:i,respond:function(e,t){e||(s=!0,c.splice(c.indexOf(f,1))),e?r(e):n(t)}}),D(a,{type:d.POST_MESSAGE_TYPE.REQUEST,hash:u,name:t,data:e.data,fireAndForget:e.fireAndForget},i).catch(r),e.fireAndForget)return n();var y=h.ACK_TIMEOUT,p=e.timeout||h.RES_TIMEOUT,v=100;setTimeout(function n(){if(!s){if(Object(o.isWindowClosed)(a))return l.ack?r(new Error("Window closed for "+t+" before response")):r(new Error("Window closed for "+t+" before ack"));if(y=Math.max(y-v,0),-1!==p&&(p=Math.max(p-v,0)),l.ack){if(-1===p)return;v=Math.min(p,2e3)}else{if(0===y)return r(new Error("No ack for postMessage "+t+" in "+Object(o.getDomain)()+" in "+h.ACK_TIMEOUT+"ms"));if(0===p)return r(new Error("No response for postMessage "+t+" in "+Object(o.getDomain)()+" in "+(e.timeout||h.RES_TIMEOUT)+"ms"))}setTimeout(n,v)}},v)})});return f.catch(function(){!function(e){S.erroredResponseListeners[e]=!0}(u),x(u)}),c.push(f),f})}function z(e,t,n,r){return(r=r||{}).window=e,r.name=t,r.data=n,Y(r)}function Q(e,t,n){var r=Object(o.getAncestor)();return r?z(r,e,t,n):new b(function(e,t){return t(new Error("Window does not have a parent"))})}function J(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.window)throw new Error("Expected options.window");var t=e.window;return{send:function(n,r){return z(t,n,r,e)}}}S.receivedMessages=S.receivedMessages||[],S.receiveMessage=F,S.requestPromises=S.requestPromises||new f,S.send=z;var Z="function"==typeof Symbol&&"symbol"==i(Symbol.iterator)?function(e){return void 0===e?"undefined":i(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":i(e)};function $(e){if(!e.name)throw new Error("Expected options.name");if(!e.handler)throw new Error("Expected options.handler");var t=e.name,n=e.window,r=e.domain,i={handler:e.handler,handleError:e.errorHandler||function(e){throw e},window:n,domain:r||d.WILDCARD,name:t},a=function e(t,n){var r=t.name,o=t.win,i=t.domain;if(!r||"string"!=typeof r)throw new Error("Name required to add request listener");if(Array.isArray(o)){for(var a=[],u=0,s=o,c=null==s?0:s.length;u<c;u++){var l=s[u];a.push(e({name:r,domain:i,win:l},n))}return{cancel:function(){for(var e=0,t=null==a?0:a.length;e<t;e++)a[e].cancel()}}}if(Array.isArray(i)){for(var h=[],y=0,p=i,v=null==p?0:p.length;y<v;y++){var _=p[y];h.push(e({name:r,win:o,domain:_},n))}return{cancel:function(){for(var e=0,t=null==h?0:h.length;e<t;e++)h[e].cancel()}}}var m=G({name:r,win:o,domain:i});if(o&&o!==d.WILDCARD||(o=S.WINDOW_WILDCARD),i=i||d.WILDCARD,m)throw o&&i?new Error("Request listener already exists for "+r+" on domain "+i.toString()+" for "+(o===S.WINDOW_WILDCARD?"wildcard":"specified")+" window"):o?new Error("Request listener already exists for "+r+" for "+(o===S.WINDOW_WILDCARD?"wildcard":"specified")+" window"):i?new Error("Request listener already exists for "+r+" on domain "+i.toString()):new Error("Request listener already exists for "+r);var w=S.requestListeners,E=w[r];E||(E=new f,w[r]=E);var O=E.get(o);O||(O={},E.set(o,O));var b=i.toString(),P=O[W],T=void 0;return g(i)?(P||(P=[],O[W]=P),T={regex:i,listener:n},P.push(T)):O[b]=n,{cancel:function(){O&&(delete O[b],o&&0===Object.keys(O).length&&E.delete(o),T&&P.splice(P.indexOf(T,1)))}}}({name:t,win:n,domain:r},i);if(e.once){var u=i.handler;i.handler=v(function(){return a.cancel(),u.apply(this,arguments)})}if(i.window&&e.errorOnClose)var s=function(e,t){var r=void 0;return r=setTimeout(function e(){r=setTimeout(e,50),function(){n&&"object"===(void 0===n?"undefined":Z(n))&&Object(o.isWindowClosed)(n)&&(s.cancel(),i.handleError(new Error("Post message target window is closed")))}.call()},50),{cancel:function(){clearTimeout(r)}}}();return{cancel:function(){a.cancel()}}}function V(e,t,n){return"function"==typeof t&&(n=t,t={}),(t=t||{}).name=e,t.handler=n||t.handler,$(t)}function X(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];"function"==typeof t&&(n=t,t={}),t=t||{},n=n||t.handler;var r=t.errorHandler,o=new b(function(o,i){(t=t||{}).name=e,t.once=!0,t.handler=function(e){if(o(e),n)return n(e)},t.errorHandler=function(e){if(i(e),r)return r(e)}}),i=$(t);return o.cancel=i.cancel,o}function ee(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{on:function(t,n){return V(t,e,n)}}}function te(){delete window[d.WINDOW_PROPS.POSTROBOT],window.removeEventListener("message",B)}S.on=V;var ne=Object(o.getAncestor)();function re(e){var t=S.requestPromises.get(e);if(t)for(var n=0,r=null==t?0:t.length;n<r;n++)t[n].reject(new Error("No response from window - cleaned up"));S.popupWindowsByWin&&S.popupWindowsByWin.delete(e),S.remoteWindows&&S.remoteWindows.delete(e),S.requestPromises.delete(e),S.methods.delete(e),S.readyPromises.delete(e)}var oe=null;function ie(){var e,t;S.initialized||(t=B,(e=window).addEventListener?e.addEventListener("message",t):e.attachEvent("onmessage",t),function(){e=function(e){var t=e.source,n=e.origin,r=S.readyPromises.get(t)||new b;r.resolve({origin:n}),S.readyPromises.set(t,r)},S.on(d.POST_MESSAGE_NAMES.HELLO,{domain:d.WILDCARD},function(t){var n=t.source,r=t.origin;return e({source:n,origin:r})});var e,t=Object(o.getAncestor)();t&&k(t).catch(_)}(),T({on:V,send:z})),S.initialized=!0}ie(),n.d(t,"cleanUpWindow",function(){return re}),n.d(t,"Promise",function(){return b}),n.d(t,"bridge",function(){return oe}),n.d(t,"init",function(){return ie}),n.d(t,"parent",function(){return ne}),n.d(t,"send",function(){return z}),n.d(t,"request",function(){return Y}),n.d(t,"sendToParent",function(){return Q}),n.d(t,"client",function(){return J}),n.d(t,"on",function(){return V}),n.d(t,"listen",function(){return $}),n.d(t,"once",function(){return X}),n.d(t,"listener",function(){return ee}),n.d(t,"CONFIG",function(){return h}),n.d(t,"CONSTANTS",function(){return d}),n.d(t,"disable",function(){return te}),t.default=r}})})}).call(this,n(10)(e))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=c(n(3)),i=c(n(2)),a=c(n(9)),u=c(n(8)),s=c(n(5));function c(e){return e&&e.__esModule?e:{default:e}}var f=new(c(n(4)).default),d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=t.data.config,this.currentUser=t.data.user,this.type=t.data.type||"FIELD",this.entry=new s.default(t,o.default,f),"FIELD"===this.type&&(t.data.self=!0,this.field=new i.default(t,o.default,f)),this.window=new a.default(o.default),this.stack=new u.default(t.data.stack,o.default),o.default.on("extensionEvent",function(e){"entrySave"===e.data.name&&(f.emitEvent("entrySave",[{data:e.data.data}]),f.emitEvent("updateFields",[{data:e.data.data}]))})}return r(e,[{key:"setReady",value:function(){return o.default.sendToParent("ready")}}],[{key:"initialize",value:function(){return o.default.sendToParent("init",{})}}]),e}();t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=i(n(12));function i(e){return e&&e.__esModule?e:{default:e}}i(n(3)).default.CONFIG.LOG_LEVEL="error";var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"init",value:function(){var e=this;return this._extension?Promise.resolve(this._extension):o.default.initialize().then(function(t){return e._extension=new o.default(t),Promise.resolve(e._extension)}).catch(function(e){return Promise.reject(e)})}},{key:"SDK_VERSION",get:function(){return"1.1.1"}}]),e}();t.default=a},function(e,t,n){"use strict";e.exports=n(13).default}])});
//# sourceMappingURL=ui-extension-sdk.js.map