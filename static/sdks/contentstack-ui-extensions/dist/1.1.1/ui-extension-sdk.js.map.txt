{"version":3,"sources":["webpack://ContentstackUIExtension/webpack/universalModuleDefinition","webpack://ContentstackUIExtension/webpack/bootstrap","webpack://ContentstackUIExtension/./lib/stack/utils.js","webpack://ContentstackUIExtension/./lib/stack/entry.js","webpack://ContentstackUIExtension/./lib/field.js","webpack://ContentstackUIExtension/./node_modules/post-robot/index.js","webpack://ContentstackUIExtension/./node_modules/wolfy87-eventemitter/EventEmitter.js","webpack://ContentstackUIExtension/./lib/entry.js","webpack://ContentstackUIExtension/./lib/stack/query.js","webpack://ContentstackUIExtension/./lib/stack/assets.js","webpack://ContentstackUIExtension/./lib/stack/index.js","webpack://ContentstackUIExtension/./lib/window.js","webpack://ContentstackUIExtension/(webpack)/buildin/module.js","webpack://ContentstackUIExtension/./node_modules/post-robot/dist/post-robot.js","webpack://ContentstackUIExtension/./lib/extension.js","webpack://ContentstackUIExtension/./lib/index.js","webpack://ContentstackUIExtension/./webpack-entry.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","transform","type","this","_query","arguments","length","Array","isArray","query","concat","Error","merge","target","source","key","mergeDeep","self","_merge_recursive","_type","val","__typeof","_typeof2","Utils","Entry","connection","_classCallCheck","_connection","only","except","language_code","entry_uid","options","uid","content_type_uid","params","action","sendToParent","then","onData","catch","onError","Promise","reject","data","resolve","error","Field","fieldDataObject","emitter","data_type","schema","_data","_self","fieldObj","on","event","path","split","forEach","_this","currentFieldObj","dataObj","e","require","default","EventEmitter","proto","originalGlobalValue","indexOfListener","listeners","listener","alias","apply","getListeners","evt","response","events","_getEvents","RegExp","test","flattenListeners","flatListeners","push","getListenersAsObject","addListener","isValidListener","_typeof","TypeError","listenerIsWrapped","once","addOnceListener","defineEvent","defineEvents","evts","removeListener","index","splice","off","addListeners","manipulateListeners","removeListeners","remove","single","multiple","removeEvent","_events","removeAllListeners","emitEvent","args","listenersMap","slice","_getOnceReturnValue","trigger","emit","setOnceReturnValue","_onceReturnValue","noConflict","undefined","__WEBPACK_AMD_DEFINE_RESULT__","initializationData","content_type","entry","locale","_emitter","thisEntry","skipNext","find","x","fieldIntilaizationDataObject","callback","_extend","compare","contained","bool","exists","logical","_i","Query","sort","pagination","_possibleConstructorReturn","__proto__","getPrototypeOf","lessThan","lessThanOrEqualTo","greaterThan","greaterThanOrEqualTo","notEqualTo","containedIn","notContainedIn","notExists","ascending","descending","beforeUid","afterUid","skip","limit","or","and","values","$regex","singleEntry","Assets","asset_uid","Stack","asset","code","config","attributes","childList","subtree","observer","Window","_height","_autoResizingEnabled","height","isNaN","Math","ceil","document","documentElement","getBoundingClientRect","MutationObserver","updateHeight","bind","observe","body","disconnect","webpackPolyfill","deprecate","paths","children","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","./node_modules/cross-domain-utils/src/index.js","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_0__utils__","a","b","f","g","h","j","k","__WEBPACK_IMPORTED_MODULE_1__types__","./node_modules/cross-domain-utils/src/types.js","./node_modules/cross-domain-utils/src/utils.js","isRegex","item","toString","getActualDomain","getDomain","isActuallySameDomain","win","allowMock","err","closed","message","IE_WIN_ACCESS_ERROR","isAboutProtocol","canReadFromWindow","mockclosed","parent","top","iframeIndex","collection","iframeWindows","frame","iframeFrames","contentWindow","parentNode","doc","ownerDocument","contains","navigator","mockUserAgent","userAgent","getAncestor","child","actualParent","getParent","isAncestorParent","_i7","_getAllChildFrames4","getAllChildFrames","result","_i3","_getFrames2","getFrames","_length2","_i5","_getAllChildFrames2","_length4","childFrame","_length6","_i16","_getFrames8","_length14","Boolean","getOpener","matchDomain","pattern","origin","CONSTANTS","WILDCARD","match","JSON","stringify","some","subpattern","join","obj","__cross_domain_utils_window_check__","MOCK_PROTOCOL","FILE_PROTOCOL","ABOUT_PROTOCOL","location","protocol","opener","href","host","domain","mockDomain","indexOf","desc","getOwnPropertyDescriptor","childParent","frames","len","_frame","./src/index.js","weakmap_CrossDomainSafeWeakMap","src_interface_namespaceObject","cleanUpWindow","promise_ZalgoPromise","bridge","init","public_parent","_send","request","client","_on","listen","server_once","server_listener","CONFIG","constants_CONSTANTS","disable","src","safeIndexOf","_ALLOWED_POST_MESSAGE","counter","Date","now","CrossDomainSafeWeakMap","instance","Constructor","random","WeakMap","freeze","testWeakMap","testKey","set","weakmap","keys","_cleanupClosedWindows","isWindow","isWindowClosed","delete","isSafeToReadWrite","writable","has","POST_MESSAGE_TYPE","REQUEST","RESPONSE","ACK","POST_MESSAGE_ACK","SUCCESS","ERROR","POST_MESSAGE_NAMES","METHOD","HELLO","OPEN_TUNNEL","WINDOW_TYPES","FULLPAGE","POPUP","IFRAME","WINDOW_PROPS","POSTROBOT","SERIALIZATION_TYPES","PROMISE","ZALGO_PROMISE","REGEX","SEND_STRATEGIES","POST_MESSAGE","BRIDGE","GLOBAL","BRIDGE_NAME_PREFIX","POSTROBOT_PROXY","map","ALLOW_POSTMESSAGE_POPUP","__ALLOW_POSTMESSAGE_POPUP__","BRIDGE_TIMEOUT","CHILD_WINDOW_TIMEOUT","ACK_TIMEOUT","RES_TIMEOUT","ALLOWED_POST_MESSAGE_METHODS","ALLOW_SAME_ORIGIN","Symbol","iterator","constructor","stringifyError","level","stack","newErr","method","called","util_noop","uniqueID","chars","replace","charAt","floor","replaceObject","depth","newobj","_key","childItem","utils_isPromise","_toString","getGlobal","glob","zalgoGlobal","__zalgopromise__","flushPromises","activeCount","possiblyUnhandledPromiseHandlers","dispatchedErrors","ZalgoPromise","handler","resolved","rejected","errorHandled","handlers","_result","_error","isAsync","res","dispatch","_this2","_err","setTimeout","promise","asyncReject","_this3","dispatching","_loop","_handlers$i","onSuccess","flushQueue","finally","onFinally","try","timeout","time","_this4","clearTimeout","toPromise","all","promises","count","results","_loop2","prom","hash","items","onPossiblyUnhandledException","cancel","context","delay","_delay","isPromise","flush","promisesToFlush","_i2","global","registerSelf","serialize__typeof","methods","listenForMethods","_ref","meth","id","isSerialized","__type__","serializeMethod","destination","__id__","__name__","deserializeMethod","wrapper","send","_ref2","__xdomain__","deserializeZalgoPromise","__then__","sayHello","readyPromises","SEND_MESSAGE_STRATEGIES","serializedMessage","dom","postMessage","_extends","assign","sendMessage","_jsonStringify","isPopup","isIframe","sourceDomain","windowType","__message__","__code__","regex","__source__","messages","replacer","indent","objectToJSON","arrayToJSON","toJSON","strategyName","success","status","responseListeners","requestListeners","WINDOW_WILDCARD","erroredResponseListeners","_RECEIVE_MESSAGE_TYPE","__DOMAIN_REGEX__","getResponseListener","deleteResponseListener","isResponseListenerErrored","getRequestListener","nameListeners","_ref3","winQualifier","winListeners","_i4","_winListeners$__DOMAI2","_ref5","types__extends","RECEIVE_MESSAGE_TYPES","pathname","ack","respond","fireAndForget","originalSource","handleError","stringifyDomainPattern","receive__typeof","receiveMessage","parsedMessage","parse","receivedMessages","messageListener","sourceElement","originalEvent","targetWindow","el","getElementById","tagName","toLowerCase","HTMLIFrameElement","hasResult","requestPromises","requestPromise","isAncestor","actualDomain","responseListener","ackTimeout","resTimeout","cycleTime","cycle","max","min","server__typeof","listenerOptions","errorHandler","requestListener","addRequestListener","_ref6","listenersCollection","_i6","_win2","_i8","_length8","_listenersCollection","_i10","_domain2","_length10","_item","_i12","_length12","existingListener","strDomain","regexListeners","regexListener","_handler","errorOnClose","interval","runInterval","onceListener","removeEventListener","popupWindowsByWin","remoteWindows","initialized","addEventListener","attachEvent","Extension","currentUser","user","postRobot","field","LOG_LEVEL","ContentstackUIExtension","_extension","initialize"],"mappings":"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","file":"ui-extension-sdk.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ContentstackUIExtension\"] = factory();\n\telse\n\t\troot[\"ContentstackUIExtension\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 14);\n","export function transform(type) {\n    return function() {\n        this._query[type] = this._query[type] || {};\n        switch (arguments.length) {\n            case 1:\n                if (Array.isArray(arguments[0]) || typeof arguments[0] === \"string\") {\n                    let query = this._query[type]['BASE'] || [];\n                    query = query.concat(arguments[0]);\n                    this._query[type]['BASE'] = query;\n                    return this;\n                } else {\n                    throw Error(\"Kindly provide valid parameters\");\n                }\n            case 2:\n                if (typeof arguments[0] === \"string\" && (Array.isArray(arguments[1]) || typeof arguments[1] === \"string\")) {\n                    let query = this._query[type][arguments[0]] || [];\n                    query = query.concat(arguments[1]);\n                    this._query[type][arguments[0]] = query;\n                    return this;\n                } else {\n                    throw Error(\"Kindly provide valid parameters\");\n                }\n            default:\n                throw Error(\"Kindly provide valid parameters\");\n        }\n    };\n}\n\n\n// merge two objects\nexport function merge(target, source) {\n    if (target && source) {\n        for (let key in source) {\n            target[key] = source[key];\n        }\n    }\n    return target;\n};\n\n// merge two objects\nexport function mergeDeep(target, source) {\n    let self = this;\n    let _merge_recursive = function(target, source) {\n        for (let key in source) {\n            if (self._type(source[key]) == 'object' && self._type(target[key]) == self._type(source[key])) {\n                _merge_recursive(target[key], source[key])\n            } else if (self._type(source[key]) == 'array' && self._type(target[key]) == self._type(source[key])) {\n                target[key] = target[key].concat(source[key]);\n            } else {\n                target[key] = source[key];\n            }\n        }\n    };\n    _merge_recursive(target, source);\n    return target;\n};\n\n\nexport function _type(val) {\n    let _typeof,\n        __typeof = typeof val;\n    switch (__typeof) {\n        case 'object':\n            _typeof = __typeof;\n            if (Array.isArray(val)) {\n                __typeof = 'array';\n            }\n            break;\n        default:\n            _typeof = __typeof;\n    }\n    return __typeof;\n};\n\n","import * as Utils from \"./utils.js\";\n/**\n * @summary Creates an instance of `Entry`.\n * @description An initializer is responsible for creating Entry object.\n * @param {String} uid - uid of the entry\n * @example\n * let Entry = stack.ContentType('example).Entry();\n * @returns {Entry}\n * @ignore\n */\nexport default class Entry {\n    constructor(connection) {\n        this._connection = connection;\n        this._query = {};\n        /**\n         * @method only\n         * @description This method is use to show the selected fields of the entries in resultset.\n         * @param {String} [key=BASE] - reference field in the entry/single field in entry\n         * @param {Array} values - array of fields to be show in resultset\n         * @example\n         * <caption> .only with field uid </caption>\n         * blogEntry.only('title')\n         * @example\n         * <caption> .only with field uid </caption>\n         * blogEntry.only('BASE','title')\n         * @example\n         * <caption> .only with field uids(array) </caption>\n         * blogEntry.only(['title','description'])\n         * @example\n         * <caption> .only with reference_field_uid and field uid </caption>\n         * blogEntry.includeReference('category').only('category','title')\n         * @example\n         * <caption> .only with reference_field_uid and field uids(array) </caption>\n         * blogEntry.includeReference('category').only('category', ['title', 'description'])\n         * @returns {Entry}\n         */\n        this.only = Utils.transform('only');\n        /**\n         * @method except\n         * @description This method is use to hide the selected fields of the entries in resultset.\n         * @param {String} [key=BASE] - reference field in the entry/single field in entry\n         * @param {Array} values - array of fields to be show in resultset\n         * @example\n         * <caption> .except with field uid </caption>\n         * blogEntry.except('title')\n         * @example\n         * <caption> .except with field uid </caption>\n         * blogEntry.except('BASE','title')\n         * @example\n         * <caption> .except with field uids(array) </caption>\n         * blogEntry.except(['title','description'])\n         * @example\n         * <caption> .except with reference_field_uid and field uid </caption>\n         * blogEntry.includeReference('category').except('category','title')\n         * @example\n         * <caption> .except with reference_field_uid and field uids(array) </caption>\n         * blogEntry.includeReference('category').except('category', ['title', 'description'])\n         * @returns {Entry} */\n        this.except = Utils.transform('except');\n        return this;\n    }\n\n    /**\n     * @method includeReference\n     * @description This method is use to include referenced entries from the other Contenttype.\n     * @example\n     * <caption> .includeReference with reference_field_uids as array </caption>\n     * blogEntry.includeReference(['category', 'author'])\n     * @example\n     * <caption> .includeReference with reference_field_uids </caption>\n     * blogEntry.includeReference('category', 'author')\n     * @returns {Entry}\n     */\n    includeReference(val) {\n        if (Array.isArray(val)) {\n            for (let i = 0; i < val.length; i++) {\n                this._query['include'] = this._query['include'] || [];\n                this._query['include'] = this._query['include'].concat(val[i]);\n            }\n        }else if (typeof val === \"string\") {\n                for (let i = 0; i < arguments.length; i++) {\n                    this._query['include'] = this._query['include'] || [];\n                    this._query['include'] = this._query['include'].concat(arguments[i]);\n                }\n            \n        } else {\n            throw Error(\"Argument should be a String or an Array.\");\n        }\n        return this;\n    }\n\n    /**\n     * @method language\n     * @description This method is used set language code, which language's data to be retrieve.\n     * @param {String} language_code - language code. e.g. 'en-us', 'ja-jp', etc.\n     * @example blogEntry.language('en-us')\n     * @returns {Entry}\n     */\n    language(language_code) {\n        if (language_code && typeof language_code === 'string') {\n            this._query['locale'] = language_code;\n            return this;\n        } else {\n            throw Error(\"Argument should be a String.\");\n        }\n    }\n\n    /**\n     * @method addQuery\n     * @description This method is used to add query to Entry object.\n     * @param {String} key - key of the query\n     * @param {String} value - value of the query\n     * @example blogEntry.addQuery('include_schema',true)\n     * @returns {Entry}\n     */\n    addQuery(key, value) {\n        if (key && value && typeof key === 'string') {\n            this._query[key] = value;\n            return this;\n        } else {\n            throw Error(\"First argument should be a String.\");\n        }\n    }\n\n    /**\n     * @method includeSchema\n     * @description This method is used to include the schema of the current contenttype in result set along with the entry/entries.\n     * @example blogEntry.includeSchema()\n     * @returns {Entry}\n     */\n    includeSchema() {\n        this._query['include_schema'] = true;\n        return this;\n    }\n\n    /**\n     * @method includeContentType\n     * @description This method is used to include the current contenttype in result set along with the entry/entries.\n     * @example blogEntry.includeContentType()\n     * @returns {Entry}\n     */\n    includeContentType() {\n        this._query['include_content_type'] = true;\n        return this;\n    }\n\n    /**\n     * @method includeOwner\n     * @description This method is used to include the owner of the entry/entries in resultset.\n     * @example blogEntry.includeOwner()\n     * @returns {Entry}\n     */\n    includeOwner() {\n        this._query['include_owner'] = true;\n        return this;\n    }\n\n    /**\n     * @method toJSON\n     * @description This method is used to convert the result in to plain javascript object.\n     * @example\n     * blogEntry\n     *      .toJSON()\n     *      .then(function (result) {\n     *          let value = result.get(field_uid)\n     *       },function (error) {\n     *          // error function\n     *      })\n     * @returns {Object}\n     */\n    // toJSON() {\n    //     this.tojson = true;\n    //     return this;\n    // }\n\n    /**\n     * @method AddParam\n     * @description This method includes query parameter in query.\n     * @example blogQuery.addParam('include_count', 'true').fetch()\n     */\n    addParam(key, value) {\n        if (key && value && typeof key === 'string' && typeof value === 'string') { \n                this._query[key] = value;\n                return this;\n        } else {\n            throw Error(\"Kindly provide valid parameters.\");\n        }\n    }\n\n\n    /**\n     * @method fetch\n     * @description fetch entry of requested content_type of defined query if present.\n     * @example\n     * blogEntry.fetch()\n     */\n    fetch() {\n        if (this.entry_uid) {\n            let options = { uid : this.entry_uid , content_type_uid :this.content_type_uid , params:this._query, action: \"getEntry\" };\n            return this._connection.sendToParent('stackQuery', options).then(onData).catch(onError);\n        } else {\n            return Promise.reject(\"Kindly provide an entry uid. e.g. .Entry('bltsomething123')\");\n        }\n    }\n\n}\n\nfunction onData(data) {\n  if (typeof (data.data) === \"string\")\n    return Promise.reject(data.data)\n  return Promise.resolve(data.data)\n}\n\nfunction onError(error) {\n  return Promise.reject(error)\n}","/** Class representing a field from contentstack ui. */\n\nclass Field {\n\n  constructor(fieldDataObject, connection, emitter) {\n\n    /**\n     * The uid of the current field is defined in the content type of the entry..\n     * @type {string}\n     */\n    this.uid = fieldDataObject.data.uid;\n    /**\n     * The data type of the current field is set using this method.\n     * @type {string}\n     */\n    this.data_type = fieldDataObject.data.schema.data_type;\n    /**\n     * The schema of the current field (schema of fields such as ‘Single Line Textbox’, ‘Number’, and so on) is set using this method.\n     * @type {Object}\n     */\n    this.schema = fieldDataObject.data.schema;\n\n    this._data = fieldDataObject.data.value;\n\n    this._connection = connection;\n\n    this._self = fieldDataObject.data.self || false;\n    \n    let fieldObj = this\n\n    emitter.on('updateFields', function (event) {\n      let path = fieldObj.uid.split('.');\n      let value = event.data;\n\n      path.forEach(key => {\n        if(value)\n          value = value[key]\n      });\n\n      if (fieldObj._data !== value) {\n        fieldObj._data = value;\n      }\n    });\n  }\n\n  /**\n   * Sets the data for the current field.\n   * @param {Object|string|number} data Data to be set on the field\n   * @return {Object} A Promise object which will return Field object.\n   */\n\n  setData(data) {\n    let currentFieldObj = this;\n    let dataObj = {data, uid:currentFieldObj.uid, self : currentFieldObj._self}\n    return this._connection.sendToParent('setData', dataObj).then(() => {\n      this._data = data;\n      return Promise.resolve(currentFieldObj);\n    }).catch((e) => Promise.reject(e));\n  }\n\n  /**\n   * Gets data of the current field\n   * @return {Object|string|number} Returns field data.\n   */\n\n  getData() {\n    return this._data;\n  }\n\n  /**\n   * Sets the focus for a field when an extension is being used. This method shows user presence and highlights field in Contentstack UI by returning a promise object.\n   * @return {Object} A Promise object which will resolve on Contentstack UI acknowledgement of focused state.\n   */\n  setFocus() {\n    return this._connection.sendToParent('focus')\n  }\n\n}\n\n\nexport default Field;","/* @flow */\n\n// eslint-disable-next-line import/no-commonjs\nmodule.exports = require('./dist/post-robot');\n\n// eslint-disable-next-line import/no-commonjs\nmodule.exports.default = module.exports;\n","/*!\n * EventEmitter v5.2.4 - git.io/ee\n * Unlicense - http://unlicense.org/\n * Oliver Caldwell - http://oli.me.uk/\n * @preserve\n */\n\n;(function (exports) {\n    'use strict';\n\n    /**\n     * Class for managing events.\n     * Can be extended to provide event functionality in other classes.\n     *\n     * @class EventEmitter Manages event registering and emitting.\n     */\n    function EventEmitter() {}\n\n    // Shortcuts to improve speed and size\n    var proto = EventEmitter.prototype;\n    var originalGlobalValue = exports.EventEmitter;\n\n    /**\n     * Finds the index of the listener for the event in its storage array.\n     *\n     * @param {Function[]} listeners Array of listeners to search through.\n     * @param {Function} listener Method to look for.\n     * @return {Number} Index of the specified listener, -1 if not found\n     * @api private\n     */\n    function indexOfListener(listeners, listener) {\n        var i = listeners.length;\n        while (i--) {\n            if (listeners[i].listener === listener) {\n                return i;\n            }\n        }\n\n        return -1;\n    }\n\n    /**\n     * Alias a method while keeping the context correct, to allow for overwriting of target method.\n     *\n     * @param {String} name The name of the target method.\n     * @return {Function} The aliased method\n     * @api private\n     */\n    function alias(name) {\n        return function aliasClosure() {\n            return this[name].apply(this, arguments);\n        };\n    }\n\n    /**\n     * Returns the listener array for the specified event.\n     * Will initialise the event object and listener arrays if required.\n     * Will return an object if you use a regex search. The object contains keys for each matched event. So /ba[rz]/ might return an object containing bar and baz. But only if you have either defined them with defineEvent or added some listeners to them.\n     * Each property in the object response is an array of listener functions.\n     *\n     * @param {String|RegExp} evt Name of the event to return the listeners from.\n     * @return {Function[]|Object} All listener functions for the event.\n     */\n    proto.getListeners = function getListeners(evt) {\n        var events = this._getEvents();\n        var response;\n        var key;\n\n        // Return a concatenated array of all matching events if\n        // the selector is a regular expression.\n        if (evt instanceof RegExp) {\n            response = {};\n            for (key in events) {\n                if (events.hasOwnProperty(key) && evt.test(key)) {\n                    response[key] = events[key];\n                }\n            }\n        }\n        else {\n            response = events[evt] || (events[evt] = []);\n        }\n\n        return response;\n    };\n\n    /**\n     * Takes a list of listener objects and flattens it into a list of listener functions.\n     *\n     * @param {Object[]} listeners Raw listener objects.\n     * @return {Function[]} Just the listener functions.\n     */\n    proto.flattenListeners = function flattenListeners(listeners) {\n        var flatListeners = [];\n        var i;\n\n        for (i = 0; i < listeners.length; i += 1) {\n            flatListeners.push(listeners[i].listener);\n        }\n\n        return flatListeners;\n    };\n\n    /**\n     * Fetches the requested listeners via getListeners but will always return the results inside an object. This is mainly for internal use but others may find it useful.\n     *\n     * @param {String|RegExp} evt Name of the event to return the listeners from.\n     * @return {Object} All listener functions for an event in an object.\n     */\n    proto.getListenersAsObject = function getListenersAsObject(evt) {\n        var listeners = this.getListeners(evt);\n        var response;\n\n        if (listeners instanceof Array) {\n            response = {};\n            response[evt] = listeners;\n        }\n\n        return response || listeners;\n    };\n\n    function isValidListener (listener) {\n        if (typeof listener === 'function' || listener instanceof RegExp) {\n            return true\n        } else if (listener && typeof listener === 'object') {\n            return isValidListener(listener.listener)\n        } else {\n            return false\n        }\n    }\n\n    /**\n     * Adds a listener function to the specified event.\n     * The listener will not be added if it is a duplicate.\n     * If the listener returns true then it will be removed after it is called.\n     * If you pass a regular expression as the event name then the listener will be added to all events that match it.\n     *\n     * @param {String|RegExp} evt Name of the event to attach the listener to.\n     * @param {Function} listener Method to be called when the event is emitted. If the function returns true then it will be removed after calling.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.addListener = function addListener(evt, listener) {\n        if (!isValidListener(listener)) {\n            throw new TypeError('listener must be a function');\n        }\n\n        var listeners = this.getListenersAsObject(evt);\n        var listenerIsWrapped = typeof listener === 'object';\n        var key;\n\n        for (key in listeners) {\n            if (listeners.hasOwnProperty(key) && indexOfListener(listeners[key], listener) === -1) {\n                listeners[key].push(listenerIsWrapped ? listener : {\n                    listener: listener,\n                    once: false\n                });\n            }\n        }\n\n        return this;\n    };\n\n    /**\n     * Alias of addListener\n     */\n    proto.on = alias('addListener');\n\n    /**\n     * Semi-alias of addListener. It will add a listener that will be\n     * automatically removed after its first execution.\n     *\n     * @param {String|RegExp} evt Name of the event to attach the listener to.\n     * @param {Function} listener Method to be called when the event is emitted. If the function returns true then it will be removed after calling.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.addOnceListener = function addOnceListener(evt, listener) {\n        return this.addListener(evt, {\n            listener: listener,\n            once: true\n        });\n    };\n\n    /**\n     * Alias of addOnceListener.\n     */\n    proto.once = alias('addOnceListener');\n\n    /**\n     * Defines an event name. This is required if you want to use a regex to add a listener to multiple events at once. If you don't do this then how do you expect it to know what event to add to? Should it just add to every possible match for a regex? No. That is scary and bad.\n     * You need to tell it what event names should be matched by a regex.\n     *\n     * @param {String} evt Name of the event to create.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.defineEvent = function defineEvent(evt) {\n        this.getListeners(evt);\n        return this;\n    };\n\n    /**\n     * Uses defineEvent to define multiple events.\n     *\n     * @param {String[]} evts An array of event names to define.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.defineEvents = function defineEvents(evts) {\n        for (var i = 0; i < evts.length; i += 1) {\n            this.defineEvent(evts[i]);\n        }\n        return this;\n    };\n\n    /**\n     * Removes a listener function from the specified event.\n     * When passed a regular expression as the event name, it will remove the listener from all events that match it.\n     *\n     * @param {String|RegExp} evt Name of the event to remove the listener from.\n     * @param {Function} listener Method to remove from the event.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.removeListener = function removeListener(evt, listener) {\n        var listeners = this.getListenersAsObject(evt);\n        var index;\n        var key;\n\n        for (key in listeners) {\n            if (listeners.hasOwnProperty(key)) {\n                index = indexOfListener(listeners[key], listener);\n\n                if (index !== -1) {\n                    listeners[key].splice(index, 1);\n                }\n            }\n        }\n\n        return this;\n    };\n\n    /**\n     * Alias of removeListener\n     */\n    proto.off = alias('removeListener');\n\n    /**\n     * Adds listeners in bulk using the manipulateListeners method.\n     * If you pass an object as the first argument you can add to multiple events at once. The object should contain key value pairs of events and listeners or listener arrays. You can also pass it an event name and an array of listeners to be added.\n     * You can also pass it a regular expression to add the array of listeners to all events that match it.\n     * Yeah, this function does quite a bit. That's probably a bad thing.\n     *\n     * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to add to multiple events at once.\n     * @param {Function[]} [listeners] An optional array of listener functions to add.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.addListeners = function addListeners(evt, listeners) {\n        // Pass through to manipulateListeners\n        return this.manipulateListeners(false, evt, listeners);\n    };\n\n    /**\n     * Removes listeners in bulk using the manipulateListeners method.\n     * If you pass an object as the first argument you can remove from multiple events at once. The object should contain key value pairs of events and listeners or listener arrays.\n     * You can also pass it an event name and an array of listeners to be removed.\n     * You can also pass it a regular expression to remove the listeners from all events that match it.\n     *\n     * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to remove from multiple events at once.\n     * @param {Function[]} [listeners] An optional array of listener functions to remove.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.removeListeners = function removeListeners(evt, listeners) {\n        // Pass through to manipulateListeners\n        return this.manipulateListeners(true, evt, listeners);\n    };\n\n    /**\n     * Edits listeners in bulk. The addListeners and removeListeners methods both use this to do their job. You should really use those instead, this is a little lower level.\n     * The first argument will determine if the listeners are removed (true) or added (false).\n     * If you pass an object as the second argument you can add/remove from multiple events at once. The object should contain key value pairs of events and listeners or listener arrays.\n     * You can also pass it an event name and an array of listeners to be added/removed.\n     * You can also pass it a regular expression to manipulate the listeners of all events that match it.\n     *\n     * @param {Boolean} remove True if you want to remove listeners, false if you want to add.\n     * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to add/remove from multiple events at once.\n     * @param {Function[]} [listeners] An optional array of listener functions to add/remove.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.manipulateListeners = function manipulateListeners(remove, evt, listeners) {\n        var i;\n        var value;\n        var single = remove ? this.removeListener : this.addListener;\n        var multiple = remove ? this.removeListeners : this.addListeners;\n\n        // If evt is an object then pass each of its properties to this method\n        if (typeof evt === 'object' && !(evt instanceof RegExp)) {\n            for (i in evt) {\n                if (evt.hasOwnProperty(i) && (value = evt[i])) {\n                    // Pass the single listener straight through to the singular method\n                    if (typeof value === 'function') {\n                        single.call(this, i, value);\n                    }\n                    else {\n                        // Otherwise pass back to the multiple function\n                        multiple.call(this, i, value);\n                    }\n                }\n            }\n        }\n        else {\n            // So evt must be a string\n            // And listeners must be an array of listeners\n            // Loop over it and pass each one to the multiple method\n            i = listeners.length;\n            while (i--) {\n                single.call(this, evt, listeners[i]);\n            }\n        }\n\n        return this;\n    };\n\n    /**\n     * Removes all listeners from a specified event.\n     * If you do not specify an event then all listeners will be removed.\n     * That means every event will be emptied.\n     * You can also pass a regex to remove all events that match it.\n     *\n     * @param {String|RegExp} [evt] Optional name of the event to remove all listeners for. Will remove from every event if not passed.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.removeEvent = function removeEvent(evt) {\n        var type = typeof evt;\n        var events = this._getEvents();\n        var key;\n\n        // Remove different things depending on the state of evt\n        if (type === 'string') {\n            // Remove all listeners for the specified event\n            delete events[evt];\n        }\n        else if (evt instanceof RegExp) {\n            // Remove all events matching the regex.\n            for (key in events) {\n                if (events.hasOwnProperty(key) && evt.test(key)) {\n                    delete events[key];\n                }\n            }\n        }\n        else {\n            // Remove all listeners in all events\n            delete this._events;\n        }\n\n        return this;\n    };\n\n    /**\n     * Alias of removeEvent.\n     *\n     * Added to mirror the node API.\n     */\n    proto.removeAllListeners = alias('removeEvent');\n\n    /**\n     * Emits an event of your choice.\n     * When emitted, every listener attached to that event will be executed.\n     * If you pass the optional argument array then those arguments will be passed to every listener upon execution.\n     * Because it uses `apply`, your array of arguments will be passed as if you wrote them out separately.\n     * So they will not arrive within the array on the other side, they will be separate.\n     * You can also pass a regular expression to emit to all events that match it.\n     *\n     * @param {String|RegExp} evt Name of the event to emit and execute listeners for.\n     * @param {Array} [args] Optional array of arguments to be passed to each listener.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.emitEvent = function emitEvent(evt, args) {\n        var listenersMap = this.getListenersAsObject(evt);\n        var listeners;\n        var listener;\n        var i;\n        var key;\n        var response;\n\n        for (key in listenersMap) {\n            if (listenersMap.hasOwnProperty(key)) {\n                listeners = listenersMap[key].slice(0);\n\n                for (i = 0; i < listeners.length; i++) {\n                    // If the listener returns true then it shall be removed from the event\n                    // The function is executed either with a basic call or an apply if there is an args array\n                    listener = listeners[i];\n\n                    if (listener.once === true) {\n                        this.removeListener(evt, listener.listener);\n                    }\n\n                    response = listener.listener.apply(this, args || []);\n\n                    if (response === this._getOnceReturnValue()) {\n                        this.removeListener(evt, listener.listener);\n                    }\n                }\n            }\n        }\n\n        return this;\n    };\n\n    /**\n     * Alias of emitEvent\n     */\n    proto.trigger = alias('emitEvent');\n\n    /**\n     * Subtly different from emitEvent in that it will pass its arguments on to the listeners, as opposed to taking a single array of arguments to pass on.\n     * As with emitEvent, you can pass a regex in place of the event name to emit to all events that match it.\n     *\n     * @param {String|RegExp} evt Name of the event to emit and execute listeners for.\n     * @param {...*} Optional additional arguments to be passed to each listener.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.emit = function emit(evt) {\n        var args = Array.prototype.slice.call(arguments, 1);\n        return this.emitEvent(evt, args);\n    };\n\n    /**\n     * Sets the current value to check against when executing listeners. If a\n     * listeners return value matches the one set here then it will be removed\n     * after execution. This value defaults to true.\n     *\n     * @param {*} value The new value to check for when executing listeners.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.setOnceReturnValue = function setOnceReturnValue(value) {\n        this._onceReturnValue = value;\n        return this;\n    };\n\n    /**\n     * Fetches the current value to check against when executing listeners. If\n     * the listeners return value matches this one then it should be removed\n     * automatically. It will return true by default.\n     *\n     * @return {*|Boolean} The current value to check for or the default, true.\n     * @api private\n     */\n    proto._getOnceReturnValue = function _getOnceReturnValue() {\n        if (this.hasOwnProperty('_onceReturnValue')) {\n            return this._onceReturnValue;\n        }\n        else {\n            return true;\n        }\n    };\n\n    /**\n     * Fetches the events object and creates one if required.\n     *\n     * @return {Object} The events storage object.\n     * @api private\n     */\n    proto._getEvents = function _getEvents() {\n        return this._events || (this._events = {});\n    };\n\n    /**\n     * Reverts the global {@link EventEmitter} to its previous value and returns a reference to this version.\n     *\n     * @return {Function} Non conflicting EventEmitter class.\n     */\n    EventEmitter.noConflict = function noConflict() {\n        exports.EventEmitter = originalGlobalValue;\n        return EventEmitter;\n    };\n\n    // Expose the class either via AMD, CommonJS or the global object\n    if (typeof define === 'function' && define.amd) {\n        define(function () {\n            return EventEmitter;\n        });\n    }\n    else if (typeof module === 'object' && module.exports){\n        module.exports = EventEmitter;\n    }\n    else {\n        exports.EventEmitter = EventEmitter;\n    }\n}(this || {}));\n","import Field from \"./field.js\";\n\n/** Class representing a entry from contentstack ui. */\n\nclass Entry {\n\n  constructor(initializationData, connection, emitter) {\n\n     /**\n     * Gets contenttype of the current entry.\n     * @type {Object}\n     */\n    this.content_type = initializationData.data.content_type;\n    \n    this._data = initializationData.data.entry;\n     /**\n     * Gets locale of the current entry.\n     * @type {string}\n     */\n    this.locale = initializationData.data.locale;\n\n    this._connection = connection;\n\n    this._emitter = emitter;\n\n    let thisEntry = this\n\n    this._emitter.on('entrySave', function (event) {\n      thisEntry._data = event.data;\n    });\n  }\n\n  /**\n * Gets data of the current entry.\n * @return {Object} Returns entry data.\n */\n\n  getData() {\n    return this._data;\n  }\n\n\n    /**\n   * Gets the field object which allows you to interact with the field. These object will have all the same methods and properties of extension.field except for field.setData().\n   * @example\n   * var field = entry.getField('field_uid');\n   * var fieldSchema = field.schema;\n   * var fieldUid = field.uid;\n   * var fieldData = field.getData();\n   * @param {string} uid of the field\n   * @return {Object} Field Object\n   */\n\n\n  getField(uid) {\n\n    let path = uid.split('.');\n    let value = this._data;\n    let schema = this.content_type.schema;\n\n    try {\n      let skipNext = false;\n      path.forEach((key,index) => {\n\n        if (skipNext){\n          skipNext = false;\n          return \n        }\n\n        schema = schema.find(x => x.uid === key);\n        if(!schema)\n          throw Error(\"schema not found\");\n\n        value = value[key]\n        if(schema.data_type === 'group'&& schema.multiple === false && path.length !== (index+1)){\n          schema = schema.schema\n        }else if (schema.data_type === 'group'&& schema.multiple === true && path.length !== (index+1)) {\n          schema = schema.schema\n          value = value[path[index+1]];\n          skipNext = true\n        }\n      });\n    } catch(e) {\n      throw Error('Invalid uid, Field not found')\n    }\n\n    let fieldIntilaizationDataObject = { data: { uid, value, schema, data_type: schema.data_type } };\n    let fieldObject = new Field(fieldIntilaizationDataObject, this._connection, this._emitter );\n    return fieldObject;\n  }\n\n  /**\n   * This function will call the callback function when entry is saved\n   * @param {function} function to be called when entry has been saved\n   */\n\n\n  onSave(callback) {\n    let entryObj = this;\n    if (callback && typeof (callback) === \"function\") {\n      entryObj._emitter.on('entrySave', function (event) {\n        callback(event.data);\n      });\n    }else {\n      throw Error('Callback must be a function')\n    }\n  }\n}\nexport default Entry;","import * as Utils from './utils.js';\nimport Entry from './entry';\n\nconst _extend = {\n    compare: function(type) {\n        return function(key, value) {\n            if (key && value && typeof key === 'string' && typeof value !== 'undefined') {\n                this._query['query'][key] = this._query['query']['file_size'] || {};\n                this._query['query'][key][type] = value;\n                return this;\n            } else {\n                throw Error(\"Kindly provide valid parameters.\");\n            }\n        };\n    },\n    contained: function(bool) {\n        let type = (bool) ? '$in' : '$nin';\n        return function(key, value) {\n            if (key && value && typeof key === 'string' && Array.isArray(value)) {\n                this._query['query'][key] = this._query['query'][key] || {};\n                this._query['query'][key][type] = this._query['query'][key][type] || [];\n                this._query['query'][key][type] = this._query['query'][key][type].concat(value);\n                return this;\n            } else {\n                throw Error(\"Kindly provide valid parameters.\");\n            }\n        };\n    },\n    exists: function(bool) {\n        return function(key) {\n            if (key && typeof key === 'string') {\n                this._query['query'][key] = this._query['query'][key] || {};\n                this._query['query'][key]['$exists'] = bool;\n                return this;\n            } else {\n                throw Error(\"Kindly provide valid parameters.\");\n            }\n        };\n    },\n    logical: function(type) {\n        return function() {\n            let _query = [];\n            for (let i = 0, _i = arguments.length; i < _i; i++) {\n                if (arguments[i] instanceof Query && arguments[i]._query.query) {\n                    _query.push(arguments[i]._query.query);\n                } else if (typeof arguments[i] === \"object\") {\n                    _query.push(arguments[i]);\n                }\n            }\n            if (this._query['query'][type]) {\n                this._query['query'][type] = this._query['query'][type].concat(_query);\n            } else {\n                this._query['query'][type] = _query;\n            }\n            return this;\n        };\n    },\n    sort: function(type) {\n        return function(key) {\n            if (key && typeof key === 'string') {\n                this._query[type] = key;\n                return this;\n            } else {\n                throw Error(\"Argument should be a string.\");\n            }\n        };\n    },\n    pagination: function(type) {\n        return function(value) {\n            if (typeof value === 'number') {\n                this._query[type] = value;\n                return this;\n            } else {\n                throw Error(\"Argument should be a number.\");\n            }\n        }\n    }\n};\n\n/**\n * @summary\n * Creates an instance of `Query`.\n * @description\n * An initializer is responsible for creating Query object.\n * @example\n * <caption>Query instance creation.</caption>\n * let Query = Contentstack.Stack().ContentType('example').Query();\n * let assetQuery =  Contentstack.Stack().Assets().Query();\n * @ignore\n */\nexport default class Query extends Entry {\n\n    constructor(connection) {\n        super();\n        this._connection = connection;\n        this._query = this._query;\n        this._query['query'] = this._query['query'] || {};\n        /**\n         * @method lessThan\n         * @description This method provides only the entries with values less than the specified value for a field.\n         * @param {String} key - uid of the field that is to be taken into consideration\n         * @param {*} value - The value used to match or compare\n         * @example blogQuery.lessThan('created_at','2015-06-22')\n         * @returns {Query}\n         */\n        this.lessThan = _extend.compare('$lt');\n\n        /**\n         * @method lessThanOrEqualTo\n         * @description This method provides only the entries with values less than or equal to the specified value for a field.\n         * @param {String} key - uid of the field that is to be taken into consideration\n         * @param {*} value - The value used to match or compare\n         * @example blogQuery.lessThanOrEqualTo('created_at','2015-03-12')\n         * @returns {Query}\n         */\n        this.lessThanOrEqualTo = _extend.compare('$lte');\n        /**\n         * @method greaterThan\n         * @description This method provides only the entries with values greater than the specified value for a field.\n         * @param {String} key - uid of the field that is to be taken into consideration\n         * @param {*} value - The value used to match or compare\n         * @example blogQuery.greaterThan('created_at','2015-03-12')\n         * @returns {Query}\n         */\n        this.greaterThan = _extend.compare('$gt');\n\n        /**\n         * @method greaterThanOrEqualTo\n         * @description This method provides only the entries with values greater than or equal to the specified value for a field.\n         * @param {String} key - uid of the field that is to be taken into consideration\n         * @param {*} value - The value used to match or compare\n         * @example blogQuery.greaterThanOrEqualTo('created_at', '2015-06-22')\n         * @returns {Query}\n         */\n        this.greaterThanOrEqualTo = _extend.compare('$gte');\n\n        /**\n         * @method notEqualTo\n         * @description This method provides only the entries with values not equal to the specified value for a field.\n         * @param {String} key - uid of the field that is to be taken into consideration\n         * @param {*} value - The value used to match or compare\n         * @example blogQuery.notEqualTo('title','Demo')\n         * @returns {Query}\n         */\n        this.notEqualTo = _extend.compare('$ne');\n\n        /**\n         * @method containedIn\n         * @description This method provides only the entries with values matching the specified values for a field.\n         * @param {String} key - uid of the field that is to be taken into consideration\n         * @param {*} value - An array of values that are to be used to match or compare\n         * @example blogQuery.containedIn('title', ['Demo', 'Welcome'])\n         * @returns {Query}\n         */\n        this.containedIn = _extend.contained(true);\n\n        /**\n         * @method notContainedIn\n         * @description This method provides only the entries that do not contain values matching the specified values for a field.\n         * @param {String} key - uid of the field that is to be taken into consideration\n         * @param {Array} value - An array of values that are to be used to match or compare\n         * @example blogQuery.notContainedIn('title', ['Demo', 'Welcome'])\n         * @returns {Query}\n         */\n        this.notContainedIn = _extend.contained(false);\n\n        /**\n         * @method exists\n         * @description This method provides only the entries that contains the field matching the specified field uid.\n         * @param {String} key - uid of the field that is to be taken into consideration\n         * @example blogQuery.exists('featured')\n         * @returns {Query}\n         */\n        this.exists = _extend.exists(true);\n\n        /**\n         * @method notExists\n         * @description This method provides only the entries that do not contain the field matching the specified field uid.\n         * @param {String} key - uid of the field that is to be taken into consideration\n         * @example blogQuery.notExists('featured')\n         * @returns {Query}\n         */\n        this.notExists = _extend.exists(false);\n\n        /**\n         * @method ascending\n         * @description This parameter sorts the provided entries in the ascending order on the basis of the specified field.\n         * @param {String} key - field uid based on which the ordering should be done\n         * @example blogQuery.ascending('created_at')\n         * @returns {Query}\n         */\n        this.ascending = _extend.sort('asc');\n\n        /**\n         * @method descending\n         * @description This method sorts the provided entries in the descending order on the basis of the specified field.\n         * @param {String} key - field uid based on which the ordering should be done.\n         * @example blogQuery.descending('created_at')\n         * @returns {Query}\n         */\n        this.descending = _extend.sort('desc');\n\n        /**\n         * @method beforeUid\n         * @description This method provides only the entries before the specified entry id.\n         * @param {String} uid - uid of the entry\n         * @example blogQuery.beforeUid('blt1234567890abcdef')\n         * @returns {Query}\n         * @ignore\n         */\n        this.beforeUid = _extend.sort('before_uid');\n\n        /**\n         * @method afterUid\n         * @description This method provides only the entries after the specified entry id.\n         * @param {String} uid - uid of the entry\n         * @example blogQuery.afterUid('blt1234567890abcdef')\n         * @returns {Query}\n         * @ignore\n         */\n        this.afterUid = _extend.sort('after_uid');\n\n        /**\n         * @method skip\n         * @description This method skips the specified number of entries.\n         * @param {Number} skip - number of entries to be skipped\n         * @example blogQuery.skip(5)\n         * @returns {Query}\n         */\n        this.skip = _extend.pagination('skip');\n\n        /**\n         * @method limit\n         * @description This method limits the response by providing only the specified number of entries.\n         * @param {Number} limit - number of entries to be present in the result(at most)\n         * @example blogQuery.limit(10)\n         * @returns {Query}\n         */\n        this.limit = _extend.pagination('limit');\n\n        /**\n         * @method or\n         * @description This method performs the OR operation on the specified query objects and provides only the matching entries.\n         * @param {object} queries - array of Query objects/raw queries to be taken into consideration\n         * @example\n         * <caption> .or with Query instances</caption>\n         * let Query1 = Stack.ContentType('blog').Query().where('title', 'Demo')\n         * let Query2 = Stack.ContentType('blog').Query().lessThan('comments', 10)\n         * blogQuery.or(Query1, Query2)\n         * @example\n         * <caption> .or with raw queries</caption>\n         * let Query1 = Stack.ContentType('blog').Query().where('title', 'Demo').getQuery()\n         * let Query2 = Stack.ContentType('blog').Query().lessThan('comments', 10).getQuery()\n         * blogQuery.or(Query1, Query2)\n         * @returns {Query}\n         */\n        this.or = _extend.logical('$or');\n\n        /**\n         * @method and\n         * @description This method performs the AND operation on the specified query objects and provides only the matching entries.\n         * @param {object} queries - array of Query objects/raw queries to be taken into consideration\n         * @example\n         * <caption> .and with Query instances</caption>\n         * let Query1 = Stack.ContentType('blog').Query().where('title', 'Demo')\n         * let Query2 = Stack.ContentType('blog').Query().lessThan('comments', 10)\n         * blogQuery.and(Query1, Query2)\n         * @example\n         * <caption> .and with raw queries</caption>\n         * let Query1 = Stack.ContentType('blog').Query().where('title', 'Demo').getQuery()\n         * let Query2 = Stack.ContentType('blog').Query().lessThan('comments', 10).getQuery()\n         * blogQuery.and(Query1, Query2)\n         * @returns {Query}\n         */\n        this.and = _extend.logical('$and');\n    }\n\n    /**\n     * @method where(equalTo)\n     * @description This method provides only the entries matching the specified value for a field.\n     * @param {String} key - uid of the field that is to be taken into consideration\n     * @param {*} value - The value used to match or compare\n     * @example blogQuery.where('title','Demo')\n     * @returns {Query}\n     */\n    equalTo(key, value) {\n        if (key && typeof key === 'string') {\n            this._query['query'][key] = value;\n\n            return this;\n        } else {\n            throw Error(\"Kindly provide valid parameters.\");\n        }\n    }\n\n    where(key, value) {\n        if (key && typeof key === 'string') {\n            this._query['query'][key] = value;\n            return this;\n        } else {\n            throw Error(\"Kindly provide valid parameters.\");\n        }\n    }\n\n    /**\n     * @method count\n     * @description This method provides only the number of entries matching the specified filters.\n     * @example blogQuery.count()\n     * @returns {Query}\n     */\n    count() {\n        this._query['count'] = true;\n        let options = {content_type_uid :this.content_type_uid , params:this._query};\n        options.action =  (this.type && this.type === 'asset') ?  \"getAssets\" : \"getEntries\"\n        return this._connection.sendToParent('stackQuery', options).then(onData).catch(onError);\n    }\n\n    /**\n     * @method query\n     * @description This method used to set raw queries on Query instance.\n     * @param {object} query - raw{json} queries to filter the entries in result set.\n     * @returns {Query}\n     */\n    query(query) {\n        if (typeof query === \"object\") {\n            this._query['query'] = Utils.mergeDeep(this._query['query'], query);\n            return this;\n        } else {\n            throw Error(\"Kindly provide valid parameters\");\n        }\n    }\n\n    /**\n     * @method tags\n     * @description The \"tags\" parameter allows you to specify an array of tags to search objects.\n     * @param {Array} values - tags\n     * @example blogQuery.tags(['technology', 'business'])\n     * @returns {Query}\n     */\n    tags(values) {\n        if (Array.isArray(values)) {\n            this._query['tags'] = values;\n            return this;\n        } else {\n            throw Error(\"Kindly provide valid parameters\");\n        }\n    }\n\n    /**\n     * @method includeCount\n     * @description This method also includes the total number of entries returned in the response.\n     * @example blogQuery.includeCount()\n     * @returns {Query}\n     */\n    includeCount() {\n        this._query['include_count'] = true;\n        return this;\n    }\n\n    /**\n     * @method AddParam\n     * @description This method includes query parameter in query.\n     * @example blogQuery.addParam('include_count', 'true')\n     * @returns {Query}\n     */\n    addParam(key, value) {\n        if (key && value && typeof key === 'string' && typeof value === 'string') {\n                this._query[key] = value;\n                return this;\n        } else {\n            throw Error(\"Kindly provide valid parameters.\");\n        }\n    }\n\n    /**\n     * @method getQuery\n     * @summary returns the raw query which can be used for futher calls(.and/.or).\n     * @description This method provides raw{json} queries based on the filters applied on Query objet.\n     * @example blogQuery.where('title','Demo').getQuery()\n     * @returns {Query}\n     */\n    getQuery() {\n        return this._query.query;\n    }\n\n    /**\n     * @method regex\n     * @description This method provides only the entries matching the regular expression for the specified field.\n     * @param {String} key - Uid of the field that is to be taken into consideration\n     * @param {*} value - The value used to match or compare\n     * @param {String} [options] - match or compare value in entry\n     * @example\n     * <caption> .regex without options</caption>\n     * blogQuery.regex('title','^Demo')\n     * @example\n     * <caption> .regex with options</caption>\n     * blogQuery.regex('title','^Demo', 'i')\n     * @returns {Query}\n     */\n    regex(key, value, options) {\n        if (key && value && typeof key === 'string' && typeof value === 'string') {\n            this._query['query'][key] = {\n                $regex: value\n            };\n            if (options) this._query['query'][key]['$options'] = options;\n            return this;\n        } else {\n            throw Error(\"Kindly provide valid parameters.\");\n        }\n    }\n\n    /**\n     * @method search\n     * @description This method is used to search data in entries.\n     * @param {string} value - value to search in entries\n     * @example blogQuery.search('Welcome to demo')\n     * @returns {Query}\n     */\n    search(value) {\n        if (value && typeof value === 'string') {\n            this._query['typeahead'] = value;\n            return this;\n        } else {\n            throw Error(\"Kindly provide valid parameters.\");\n        }\n    }\n\n    /**\n     * @method find\n     * @description Provides all the entries which satisfied the query specified.\n     * @example\n     * blogQuery.find()\n     */\n    find() {\n        let options = {content_type_uid :this.content_type_uid , params:this._query};\n    \toptions.action =  (this.type && this.type === 'asset') ?  \"getAssets\" : \"getEntries\"\n        return this._connection.sendToParent('stackQuery', options).then(onData).catch(onError);\n    }\n\n    /**\n     * @method findOne\n     * @description Provides the single entry from the resultset.\n     * @example\n     * blogQuery.findOne()\n     */\n    findOne() {\n\n    \tthis.singleEntry = true;\n        this._query.limit = 1;\n        let options = {content_type_uid :this.content_type_uid , params:this._query};\n    \toptions.action =  (this.type && this.type === 'asset') ?  \"getAssets\" : \"getEntries\"\n        return this._connection.sendToParent('stackQuery', options).then(onData).catch(onError);\n    }\n\n}\n\nfunction onData(data) {\n  if (typeof (data.data) === \"string\")\n    return Promise.reject(data.data)\n  return Promise.resolve(data.data)\n}\n\nfunction onError(error) {\n  return Promise.reject(error)\n}","import * as Utils from \"./utils.js\";\n/**\n * @summary Creates an instance of `Assets`.\n * @description An initializer is responsible for creating Asset object.\n * @param {String} uid - uid of the asset\n * @example\n * let Assets = stack.Assets('bltsomething123');\n * @returns {Assets}\n * @ignore\n */\nexport default class Assets {\n    constructor(connection) {\n        this._connection = connection;\n        this._query = {};\n        /**\n         * @method only\n         * @description This method is use to show the selected fields of the assets in resultset.\n         * @param {String} [key=BASE] - single field in asset\n         * @param {Array} values - array of fields to be show in resultset\n         * @example\n         * <caption> .only with field uid </caption>\n         * Assets().only('title')\n         * @example\n         * <caption> .only with field uid </caption>\n         * Assets().only('BASE','title')\n         * @example\n         * <caption> .only with field uids(array) </caption>\n         * Assets().only(['title','description'])\n         * @returns {Asset}\n         */\n        this.only = Utils.transform('only');\n        return this;\n    }\n\n     /**\n     * @method AddParam\n     * @description This method includes query parameter in query.\n     * @example stack.Assets('bltsomething123').addParam('include_dimension', 'true').fetch()\n     */\n    addParam(key, value) {\n        if (key && typeof key === 'string' && value && typeof value === 'string') {        \n            this._query[key] = value;\n            return this;\n        } else {\n            throw Error(\"Kindly provide valid parameters.\");\n        }\n    }\n\n    /**\n     * @method fetch\n     * @description fetch asset obhect of requested Asset uid of defined query if present.\n     * @example\n     * stack.Assets('bltsomething123').fetch()\n     */\n    fetch() {\n        let options = { uid : this.asset_uid, params:this._query, action: \"getAsset\" };\n        return this._connection.sendToParent('stackQuery', options).then(onData).catch(onError);\n    }\n\n}\n\nfunction onData(data) {\n  if (typeof (data.data) === \"string\")\n    return Promise.reject(data.data)\n  return Promise.resolve(data.data)\n}\n\nfunction onError(error) {\n  return Promise.reject(error)\n}","import * as Utils from \"./utils.js\";\nimport Entry from './entry.js';\nimport Assets from './assets.js';\nimport Query from './query.js';\n\n/** Class representing the current stack from contentstack ui. */\n\nclass Stack {\n\n  constructor(data, connection) {\n    this._connection = connection;\n    this._data = data;\n  }\n\n\n  /**\n   * This method returns data of the current stack.\n   * @return {Object} Returns stack data.\n   */\n\n  getData() {\n    return this._data;\n  }\n\n  /**\n   * @description Set \"ContentType\" from the Stack from where you want to retrive the entries.\n   * @param {String} [content_type_uid] - uid of the existing contenttype\n   * @returns {Stack}\n   */\n  ContentType(uid) {\n    if (uid && typeof uid === 'string') {\n      this.content_type_uid = uid;\n      this.type = \"contentType\";\n    }\n    return this;\n  }\n  /**\n   * @description Set the Entry Uid which you want to retrive from the Contenttype specified.\n   * @param {String} uid - entry_uid\n   * @example ContentType('blog').Entry('blt1234567890abcef')\n   * @returns {Object}\n   */\n  Entry(uid) {\n    let entry = new Entry(this._connection);\n    if (uid && typeof uid === \"string\") {\n      entry.entry_uid = uid;\n    }\n    return Utils.merge(entry, this);\n  }\n\n  /**\n   * @description Set the Asset Uid which you want to retrive the Asset.\n   * @param {String} uid - asset_uid\n   * @example stack.Assets('blt1234567890abcef').fetch()\n   * @returns {Object}\n   */\n  Assets(uid) {\n    this.type = 'asset';\n    if (uid && typeof uid === \"string\") {\n        let asset = new Assets();\n        asset.asset_uid = uid;\n        return Utils.merge(asset, this);\n    }\n    return this;\n  }\n\n  /**\n   * @description Query instance to provide support for all search queries.\n   * @example ContentType('blog').Query()\n   * @returns {Object}\n   */\n  Query() {\n    let query = new Query(this._connection);\n    return Utils.merge(query, this);\n  }\n\n    /**\n   * This API allows users to interact with a content type of a stack using the Content Type Content Delivery API requests. Method returns a Promise object.\n   * @param {string} uid Uid of the desired content type\n   * @param {Object} params optional params for the get call\n   * @return {Object} A Promise object which will resolve with content type details.\n   */\n  getContentType(uid, params) {\n    if (!uid){\n      return Promise.reject('uid is required');\n    }\n    params = params || {};\n    let options = { uid, params, action: \"getContentType\" };\n    return this._connection.sendToParent('stackQuery', options).then(onData).catch(onError);\n  }\n\n  /**\n   * This API allows users to interact with the content types of a stack using the Content Type Content Delivery API requests. Method returns a Promise object.\n   * @param {Object} query query for the get call\n   * @param {Object} params optional params for the get call\n   * @return {Object} A Promise object which will resolve with details of content type.\n   */\n  getContentTypes(query, params) {\n    query = query || {};\n    params = params || {};\n    params.query = query;\n    let options = { params, action: \"getContentTypes\" };\n    return this._connection.sendToParent('stackQuery', options).then(onData).catch(onError);\n  }\n\n \n  /**\n   * This API allows users to interact with an environment of a stack using the Environment Content Delivery API requests. Method returns a Promise object.\n   * @param {string} name Name of the desired environment\n   * @param {Object} params optional params for the get call\n   * @return {Object} A Promise object which will resolve with environment details.\n   */\n  getEnvironment(name, params) {\n    if (!name) {\n      return Promise.reject('name is required');\n    }\n    params = params || {};\n    let options = { name, params, action: \"getEnvironment\" };\n    return this._connection.sendToParent('stackQuery', options).then(onData).catch(onError);\n  }\n\n  /**\n   * This API allows users to interact with the environments of a stack using the Environment Content Delivery API requests. Method returns a Promise object.   \n   * @param {Object} query query for the get call\n   * @param {Object} params optional params for the get call\n   * @return {Object} A Promise object which will resolve with details of environments.\n   */\n  getEnvironments(query, params) {\n    query = query || {};\n    params = params || {};\n    params.query = query;\n    let options = { params, action: \"getEnvironments\" };\n    return this._connection.sendToParent('stackQuery', options).then(onData).catch(onError);\n  }\n\n  /**\n   * This API allows users to interact with a locale of a stack using the Languages Content Delivery API Requests. Method returns a Promise object.\n   * @param {string} code Code of the desired locale\n   * @param {Object} params optional params for the get call\n   * @return {Object} A Promise object which will resolve with locale details.\n   */\n  getLocale(code, params) {\n    if (!code) {\n      return Promise.reject('code is required');\n    }\n    params = params || {};\n    let options = { code, params, action: \"getLocale\" };\n    return this._connection.sendToParent('stackQuery', options).then(onData).catch(onError);\n  }\n\n  /**\n   * This API allows users to interact with the locales of a stack using the Languages Content Delivery API Requests. Method returns a Promise object.\n   * @param {Object} query query for the get call\n   * @param {Object} params optional params for the get call\n   * @return {Object} A Promise object which will resolve with details of locales.\n   */\n  getLocales(query, params) {\n    query = query || {};\n    params = params || {};\n    params.query = query;\n    let options = { params, action: \"getLocales\" };\n    return this._connection.sendToParent('stackQuery', options).then(onData).catch(onError);\n  }\n}\n\nfunction onData(data) {\n  if (typeof (data.data) === \"string\")\n    return Promise.reject(data.data)\n  return Promise.resolve(data.data)\n}\n\nfunction onError(error) {\n  return Promise.reject(error)\n}\n\nexport default Stack;","let config = { attributes: true, childList: true, subtree: true };\nlet observer\n/** Class representing a iframe window from contentstack ui. */\n\nclass Window {\n  constructor(connection) {\n    this._connection = connection;\n    this._height;\n    this._autoResizingEnabled = false;\n  }\n\n  /**\n   * This method updates the extension height on Contentstack UI. If argument height is not passed then it will calculate the scroll height and set the height of extension window accordingly.\n   * @param {string|number} height Desired height of the window iframe window\n   * @return {Object} A Promise object which will resolve on acknowledgement for height update.\n   */\n  updateHeight(height) {\n    if (!height || isNaN(height)) {\n      height = Math.ceil(document.documentElement.getBoundingClientRect().height);\n    }\n\n    if (this._height === height) {\n      return Promise.resolve();\n    }\n    this._height = height;\n    return this._connection.sendToParent('resize', height);\n  }\n\n  /**\n   * This method enables auto resizing of the extension height.\n   * @return {Object} Field object.\n   */\n  enableAutoResizing() {\n    if (this._autoResizingEnabled) {\n      return this;\n    }\n    this._autoResizingEnabled = true;\n    observer = new MutationObserver(this.updateHeight.bind(this));\n    observer.observe(window.document.body, config);\n    return this;\n  }\n\n  /**\n   * This method disables auto resizing of the extension height.\n   * @return {Object} Field object.\n   */\n  disableAutoResizing() {\n    if (!this._autoResizingEnabled) {\n      return this;\n    }\n    this._autoResizingEnabled = false;\n    observer.disconnect();\n    return this;\n  }\n}\n\nexport default Window;","module.exports = function(module) {\r\n\tif (!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tif (!module.children) module.children = [];\r\n\t\tObject.defineProperty(module, \"loaded\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.l;\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(module, \"id\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.i;\r\n\t\t\t}\r\n\t\t});\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n};\r\n","!function(root, factory) {\n    \"object\" == typeof exports && \"object\" == typeof module ? module.exports = factory() : \"function\" == typeof define && define.amd ? define(\"postRobot\", [], factory) : \"object\" == typeof exports ? exports.postRobot = factory() : root.postRobot = factory();\n}(\"undefined\" != typeof self ? self : this, function() {\n    return function(modules) {\n        var installedModules = {};\n        function __webpack_require__(moduleId) {\n            if (installedModules[moduleId]) return installedModules[moduleId].exports;\n            var module = installedModules[moduleId] = {\n                i: moduleId,\n                l: !1,\n                exports: {}\n            };\n            modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n            module.l = !0;\n            return module.exports;\n        }\n        __webpack_require__.m = modules;\n        __webpack_require__.c = installedModules;\n        __webpack_require__.d = function(exports, name, getter) {\n            __webpack_require__.o(exports, name) || Object.defineProperty(exports, name, {\n                configurable: !1,\n                enumerable: !0,\n                get: getter\n            });\n        };\n        __webpack_require__.n = function(module) {\n            var getter = module && module.__esModule ? function() {\n                return module.default;\n            } : function() {\n                return module;\n            };\n            __webpack_require__.d(getter, \"a\", getter);\n            return getter;\n        };\n        __webpack_require__.o = function(object, property) {\n            return Object.prototype.hasOwnProperty.call(object, property);\n        };\n        __webpack_require__.p = \"\";\n        return __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n    }({\n        \"./node_modules/cross-domain-utils/src/index.js\": function(module, __webpack_exports__, __webpack_require__) {\n            \"use strict\";\n            var __WEBPACK_IMPORTED_MODULE_0__utils__ = __webpack_require__(\"./node_modules/cross-domain-utils/src/utils.js\");\n            __webpack_require__.d(__webpack_exports__, \"getActualDomain\", function() {\n                return __WEBPACK_IMPORTED_MODULE_0__utils__.a;\n            });\n            __webpack_require__.d(__webpack_exports__, \"getAncestor\", function() {\n                return __WEBPACK_IMPORTED_MODULE_0__utils__.b;\n            });\n            __webpack_require__.d(__webpack_exports__, \"getDomain\", function() {\n                return __WEBPACK_IMPORTED_MODULE_0__utils__.c;\n            });\n            __webpack_require__.d(__webpack_exports__, \"getUserAgent\", function() {\n                return __WEBPACK_IMPORTED_MODULE_0__utils__.d;\n            });\n            __webpack_require__.d(__webpack_exports__, \"isActuallySameDomain\", function() {\n                return __WEBPACK_IMPORTED_MODULE_0__utils__.e;\n            });\n            __webpack_require__.d(__webpack_exports__, \"isAncestor\", function() {\n                return __WEBPACK_IMPORTED_MODULE_0__utils__.f;\n            });\n            __webpack_require__.d(__webpack_exports__, \"isIframe\", function() {\n                return __WEBPACK_IMPORTED_MODULE_0__utils__.g;\n            });\n            __webpack_require__.d(__webpack_exports__, \"isPopup\", function() {\n                return __WEBPACK_IMPORTED_MODULE_0__utils__.h;\n            });\n            __webpack_require__.d(__webpack_exports__, \"isWindow\", function() {\n                return __WEBPACK_IMPORTED_MODULE_0__utils__.i;\n            });\n            __webpack_require__.d(__webpack_exports__, \"isWindowClosed\", function() {\n                return __WEBPACK_IMPORTED_MODULE_0__utils__.j;\n            });\n            __webpack_require__.d(__webpack_exports__, \"matchDomain\", function() {\n                return __WEBPACK_IMPORTED_MODULE_0__utils__.k;\n            });\n            __webpack_require__.d(__webpack_exports__, \"stringifyDomainPattern\", function() {\n                return __WEBPACK_IMPORTED_MODULE_0__utils__.l;\n            });\n            var __WEBPACK_IMPORTED_MODULE_1__types__ = __webpack_require__(\"./node_modules/cross-domain-utils/src/types.js\");\n            __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__types__);\n        },\n        \"./node_modules/cross-domain-utils/src/types.js\": function(module, exports) {},\n        \"./node_modules/cross-domain-utils/src/utils.js\": function(module, __webpack_exports__, __webpack_require__) {\n            \"use strict\";\n            function isRegex(item) {\n                return \"[object RegExp]\" === Object.prototype.toString.call(item);\n            }\n            __webpack_exports__.a = getActualDomain;\n            __webpack_exports__.c = getDomain;\n            __webpack_exports__.e = isActuallySameDomain;\n            __webpack_exports__.j = function(win) {\n                var allowMock = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1];\n                try {\n                    if (win === window) return !1;\n                } catch (err) {\n                    return !0;\n                }\n                try {\n                    if (!win) return !0;\n                } catch (err) {\n                    return !0;\n                }\n                try {\n                    if (win.closed) return !0;\n                } catch (err) {\n                    return !err || err.message !== IE_WIN_ACCESS_ERROR;\n                }\n                if (allowMock && function(win) {\n                    if (!isActuallySameDomain(win)) return !1;\n                    try {\n                        if (win === window) return !0;\n                        if (isAboutProtocol(win) && canReadFromWindow(win)) return !0;\n                        if (getDomain(window) === getDomain(win)) return !0;\n                    } catch (err) {}\n                    return !1;\n                }(win)) try {\n                    if (win.mockclosed) return !0;\n                } catch (err) {}\n                try {\n                    if (!win.parent || !win.top) return !0;\n                } catch (err) {}\n                var iframeIndex = function(collection, item) {\n                    for (var i = 0; i < collection.length; i++) try {\n                        if (collection[i] === item) return i;\n                    } catch (err) {}\n                    return -1;\n                }(iframeWindows, win);\n                if (-1 !== iframeIndex) {\n                    var frame = iframeFrames[iframeIndex];\n                    if (frame && function(frame) {\n                        if (!frame.contentWindow) return !0;\n                        if (!frame.parentNode) return !0;\n                        var doc = frame.ownerDocument;\n                        return !(!doc || !doc.body || doc.body.contains(frame));\n                    }(frame)) return !0;\n                }\n                return !1;\n            };\n            __webpack_exports__.d = function(win) {\n                return (win = win || window).navigator.mockUserAgent || win.navigator.userAgent;\n            };\n            __webpack_exports__.b = getAncestor;\n            __webpack_exports__.f = function(parent, child) {\n                var actualParent = getAncestor(child);\n                if (actualParent) return actualParent === parent;\n                if (child === parent) return !1;\n                if (function(win) {\n                    if (win) {\n                        try {\n                            if (win.top) return win.top;\n                        } catch (err) {}\n                        if (getParent(win) === win) return win;\n                        try {\n                            if (isAncestorParent(window, win) && window.top) return window.top;\n                        } catch (err) {}\n                        try {\n                            if (isAncestorParent(win, window) && window.top) return window.top;\n                        } catch (err) {}\n                        for (var _i7 = 0, _getAllChildFrames4 = function getAllChildFrames(win) {\n                            for (var result = [], _i3 = 0, _getFrames2 = getFrames(win), _length2 = null == _getFrames2 ? 0 : _getFrames2.length; _i3 < _length2; _i3++) {\n                                var frame = _getFrames2[_i3];\n                                result.push(frame);\n                                for (var _i5 = 0, _getAllChildFrames2 = getAllChildFrames(frame), _length4 = null == _getAllChildFrames2 ? 0 : _getAllChildFrames2.length; _i5 < _length4; _i5++) {\n                                    var childFrame = _getAllChildFrames2[_i5];\n                                    result.push(childFrame);\n                                }\n                            }\n                            return result;\n                        }(win), _length6 = null == _getAllChildFrames4 ? 0 : _getAllChildFrames4.length; _i7 < _length6; _i7++) {\n                            var frame = _getAllChildFrames4[_i7];\n                            try {\n                                if (frame.top) return frame.top;\n                            } catch (err) {}\n                            if (getParent(frame) === frame) return frame;\n                        }\n                    }\n                }(child) === child) return !1;\n                for (var _i16 = 0, _getFrames8 = getFrames(parent), _length14 = null == _getFrames8 ? 0 : _getFrames8.length; _i16 < _length14; _i16++) if (_getFrames8[_i16] === child) return !0;\n                return !1;\n            };\n            __webpack_exports__.h = function() {\n                return Boolean(getOpener(window));\n            };\n            __webpack_exports__.g = function() {\n                return Boolean(getParent(window));\n            };\n            __webpack_exports__.k = function matchDomain(pattern, origin) {\n                if (\"string\" == typeof pattern) {\n                    if (\"string\" == typeof origin) return pattern === CONSTANTS.WILDCARD || origin === pattern;\n                    if (isRegex(origin)) return !1;\n                    if (Array.isArray(origin)) return !1;\n                }\n                return isRegex(pattern) ? isRegex(origin) ? pattern.toString() === origin.toString() : !Array.isArray(origin) && Boolean(origin.match(pattern)) : !!Array.isArray(pattern) && (Array.isArray(origin) ? JSON.stringify(pattern) === JSON.stringify(origin) : !isRegex(origin) && pattern.some(function(subpattern) {\n                    return matchDomain(subpattern, origin);\n                }));\n            };\n            __webpack_exports__.l = function(pattern) {\n                return Array.isArray(pattern) ? \"(\" + pattern.join(\" | \") + \")\" : isRegex(pattern) ? \"RegExp(\" + pattern.toString() : pattern.toString();\n            };\n            __webpack_exports__.i = function(obj) {\n                try {\n                    if (obj === window) return !0;\n                } catch (err) {\n                    if (err && err.message === IE_WIN_ACCESS_ERROR) return !0;\n                }\n                try {\n                    if (\"[object Window]\" === Object.prototype.toString.call(obj)) return !0;\n                } catch (err) {\n                    if (err && err.message === IE_WIN_ACCESS_ERROR) return !0;\n                }\n                try {\n                    if (window.Window && obj instanceof window.Window) return !0;\n                } catch (err) {\n                    if (err && err.message === IE_WIN_ACCESS_ERROR) return !0;\n                }\n                try {\n                    if (obj && obj.self === obj) return !0;\n                } catch (err) {\n                    if (err && err.message === IE_WIN_ACCESS_ERROR) return !0;\n                }\n                try {\n                    if (obj && obj.parent === obj) return !0;\n                } catch (err) {\n                    if (err && err.message === IE_WIN_ACCESS_ERROR) return !0;\n                }\n                try {\n                    if (obj && obj.top === obj) return !0;\n                } catch (err) {\n                    if (err && err.message === IE_WIN_ACCESS_ERROR) return !0;\n                }\n                try {\n                    obj && obj.__cross_domain_utils_window_check__;\n                } catch (err) {\n                    return !0;\n                }\n                return !1;\n            };\n            var CONSTANTS = {\n                MOCK_PROTOCOL: \"mock:\",\n                FILE_PROTOCOL: \"file:\",\n                ABOUT_PROTOCOL: \"about:\",\n                WILDCARD: \"*\"\n            }, IE_WIN_ACCESS_ERROR = \"Call was rejected by callee.\\r\\n\";\n            function isAboutProtocol() {\n                return (arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : window).location.protocol === CONSTANTS.ABOUT_PROTOCOL;\n            }\n            function getParent(win) {\n                if (win) try {\n                    if (win.parent && win.parent !== win) return win.parent;\n                } catch (err) {}\n            }\n            function getOpener(win) {\n                if (win && !getParent(win)) try {\n                    return win.opener;\n                } catch (err) {}\n            }\n            function canReadFromWindow(win) {\n                try {\n                    win && win.location && win.location.href;\n                    return !0;\n                } catch (err) {}\n                return !1;\n            }\n            function getActualDomain(win) {\n                var location = (win = win || window).location;\n                if (!location) throw new Error(\"Can not read window location\");\n                var protocol = location.protocol;\n                if (!protocol) throw new Error(\"Can not read window protocol\");\n                if (protocol === CONSTANTS.FILE_PROTOCOL) return CONSTANTS.FILE_PROTOCOL + \"//\";\n                if (protocol === CONSTANTS.ABOUT_PROTOCOL) {\n                    var parent = getParent(win);\n                    return parent && canReadFromWindow(parent) ? getActualDomain(parent) : CONSTANTS.ABOUT_PROTOCOL + \"//\";\n                }\n                var host = location.host;\n                if (!host) throw new Error(\"Can not read window host\");\n                return protocol + \"//\" + host;\n            }\n            function getDomain(win) {\n                var domain = getActualDomain(win = win || window);\n                return domain && win.mockDomain && 0 === win.mockDomain.indexOf(CONSTANTS.MOCK_PROTOCOL) ? win.mockDomain : domain;\n            }\n            function isActuallySameDomain(win) {\n                try {\n                    if (win === window) return !0;\n                } catch (err) {}\n                try {\n                    var desc = Object.getOwnPropertyDescriptor(win, \"location\");\n                    if (desc && !1 === desc.enumerable) return !1;\n                } catch (err) {}\n                try {\n                    if (isAboutProtocol(win) && canReadFromWindow(win)) return !0;\n                } catch (err) {}\n                try {\n                    if (getActualDomain(win) === getActualDomain(window)) return !0;\n                } catch (err) {}\n                return !1;\n            }\n            function isAncestorParent(parent, child) {\n                if (!parent || !child) return !1;\n                var childParent = getParent(child);\n                return childParent ? childParent === parent : -1 !== function(win) {\n                    var result = [];\n                    try {\n                        for (;win.parent !== win; ) {\n                            result.push(win.parent);\n                            win = win.parent;\n                        }\n                    } catch (err) {}\n                    return result;\n                }(child).indexOf(parent);\n            }\n            function getFrames(win) {\n                var result = [], frames = void 0;\n                try {\n                    frames = win.frames;\n                } catch (err) {\n                    frames = win;\n                }\n                var len = void 0;\n                try {\n                    len = frames.length;\n                } catch (err) {}\n                if (0 === len) return result;\n                if (len) {\n                    for (var i = 0; i < len; i++) {\n                        var frame = void 0;\n                        try {\n                            frame = frames[i];\n                        } catch (err) {\n                            continue;\n                        }\n                        result.push(frame);\n                    }\n                    return result;\n                }\n                for (var _i = 0; _i < 100; _i++) {\n                    var _frame = void 0;\n                    try {\n                        _frame = frames[_i];\n                    } catch (err) {\n                        return result;\n                    }\n                    if (!_frame) return result;\n                    result.push(_frame);\n                }\n                return result;\n            }\n            var iframeWindows = [], iframeFrames = [];\n            function getAncestor(win) {\n                return getOpener(win = win || window) || getParent(win) || void 0;\n            }\n        },\n        \"./src/index.js\": function(module, __webpack_exports__, __webpack_require__) {\n            \"use strict\";\n            Object.defineProperty(__webpack_exports__, \"__esModule\", {\n                value: !0\n            });\n            __webpack_require__.d({}, \"WeakMap\", function() {\n                return weakmap_CrossDomainSafeWeakMap;\n            });\n            var src_interface_namespaceObject = {};\n            __webpack_require__.d(src_interface_namespaceObject, \"cleanUpWindow\", function() {\n                return cleanUpWindow;\n            });\n            __webpack_require__.d(src_interface_namespaceObject, \"Promise\", function() {\n                return promise_ZalgoPromise;\n            });\n            __webpack_require__.d(src_interface_namespaceObject, \"bridge\", function() {\n                return bridge;\n            });\n            __webpack_require__.d(src_interface_namespaceObject, \"init\", function() {\n                return init;\n            });\n            __webpack_require__.d(src_interface_namespaceObject, \"parent\", function() {\n                return public_parent;\n            });\n            __webpack_require__.d(src_interface_namespaceObject, \"send\", function() {\n                return _send;\n            });\n            __webpack_require__.d(src_interface_namespaceObject, \"request\", function() {\n                return request;\n            });\n            __webpack_require__.d(src_interface_namespaceObject, \"sendToParent\", function() {\n                return sendToParent;\n            });\n            __webpack_require__.d(src_interface_namespaceObject, \"client\", function() {\n                return client;\n            });\n            __webpack_require__.d(src_interface_namespaceObject, \"on\", function() {\n                return _on;\n            });\n            __webpack_require__.d(src_interface_namespaceObject, \"listen\", function() {\n                return listen;\n            });\n            __webpack_require__.d(src_interface_namespaceObject, \"once\", function() {\n                return server_once;\n            });\n            __webpack_require__.d(src_interface_namespaceObject, \"listener\", function() {\n                return server_listener;\n            });\n            __webpack_require__.d(src_interface_namespaceObject, \"CONFIG\", function() {\n                return CONFIG;\n            });\n            __webpack_require__.d(src_interface_namespaceObject, \"CONSTANTS\", function() {\n                return constants_CONSTANTS;\n            });\n            __webpack_require__.d(src_interface_namespaceObject, \"disable\", function() {\n                return disable;\n            });\n            var src = __webpack_require__(\"./node_modules/cross-domain-utils/src/index.js\");\n            function safeIndexOf(collection, item) {\n                for (var i = 0; i < collection.length; i++) try {\n                    if (collection[i] === item) return i;\n                } catch (err) {}\n                return -1;\n            }\n            var _ALLOWED_POST_MESSAGE, defineProperty = Object.defineProperty, counter = Date.now() % 1e9, weakmap_CrossDomainSafeWeakMap = function() {\n                function CrossDomainSafeWeakMap() {\n                    !function(instance, Constructor) {\n                        if (!(instance instanceof CrossDomainSafeWeakMap)) throw new TypeError(\"Cannot call a class as a function\");\n                    }(this);\n                    counter += 1;\n                    this.name = \"__weakmap_\" + (1e9 * Math.random() >>> 0) + \"__\" + counter;\n                    if (function() {\n                        if (!window.WeakMap) return !1;\n                        if (!window.Object.freeze) return !1;\n                        try {\n                            var testWeakMap = new window.WeakMap(), testKey = {};\n                            window.Object.freeze(testKey);\n                            testWeakMap.set(testKey, \"__testvalue__\");\n                            return \"__testvalue__\" === testWeakMap.get(testKey);\n                        } catch (err) {\n                            return !1;\n                        }\n                    }()) try {\n                        this.weakmap = new window.WeakMap();\n                    } catch (err) {}\n                    this.keys = [];\n                    this.values = [];\n                }\n                CrossDomainSafeWeakMap.prototype._cleanupClosedWindows = function() {\n                    for (var weakmap = this.weakmap, keys = this.keys, i = 0; i < keys.length; i++) {\n                        var value = keys[i];\n                        if (Object(src.isWindow)(value) && Object(src.isWindowClosed)(value)) {\n                            if (weakmap) try {\n                                weakmap.delete(value);\n                            } catch (err) {}\n                            keys.splice(i, 1);\n                            this.values.splice(i, 1);\n                            i -= 1;\n                        }\n                    }\n                };\n                CrossDomainSafeWeakMap.prototype.isSafeToReadWrite = function(key) {\n                    if (Object(src.isWindow)(key)) return !1;\n                    try {\n                        key && key.self;\n                        key && key[this.name];\n                    } catch (err) {\n                        return !1;\n                    }\n                    return !0;\n                };\n                CrossDomainSafeWeakMap.prototype.set = function(key, value) {\n                    if (!key) throw new Error(\"WeakMap expected key\");\n                    var weakmap = this.weakmap;\n                    if (weakmap) try {\n                        weakmap.set(key, value);\n                    } catch (err) {\n                        delete this.weakmap;\n                    }\n                    if (this.isSafeToReadWrite(key)) {\n                        var name = this.name, entry = key[name];\n                        entry && entry[0] === key ? entry[1] = value : defineProperty(key, name, {\n                            value: [ key, value ],\n                            writable: !0\n                        });\n                    } else {\n                        this._cleanupClosedWindows();\n                        var keys = this.keys, values = this.values, index = safeIndexOf(keys, key);\n                        if (-1 === index) {\n                            keys.push(key);\n                            values.push(value);\n                        } else values[index] = value;\n                    }\n                };\n                CrossDomainSafeWeakMap.prototype.get = function(key) {\n                    if (!key) throw new Error(\"WeakMap expected key\");\n                    var weakmap = this.weakmap;\n                    if (weakmap) try {\n                        if (weakmap.has(key)) return weakmap.get(key);\n                    } catch (err) {\n                        delete this.weakmap;\n                    }\n                    if (!this.isSafeToReadWrite(key)) {\n                        this._cleanupClosedWindows();\n                        var index = safeIndexOf(this.keys, key);\n                        if (-1 === index) return;\n                        return this.values[index];\n                    }\n                    var entry = key[this.name];\n                    if (entry && entry[0] === key) return entry[1];\n                };\n                CrossDomainSafeWeakMap.prototype.delete = function(key) {\n                    if (!key) throw new Error(\"WeakMap expected key\");\n                    var weakmap = this.weakmap;\n                    if (weakmap) try {\n                        weakmap.delete(key);\n                    } catch (err) {\n                        delete this.weakmap;\n                    }\n                    if (this.isSafeToReadWrite(key)) {\n                        var entry = key[this.name];\n                        entry && entry[0] === key && (entry[0] = entry[1] = void 0);\n                    } else {\n                        this._cleanupClosedWindows();\n                        var keys = this.keys, index = safeIndexOf(keys, key);\n                        if (-1 !== index) {\n                            keys.splice(index, 1);\n                            this.values.splice(index, 1);\n                        }\n                    }\n                };\n                CrossDomainSafeWeakMap.prototype.has = function(key) {\n                    if (!key) throw new Error(\"WeakMap expected key\");\n                    var weakmap = this.weakmap;\n                    if (weakmap) try {\n                        return weakmap.has(key);\n                    } catch (err) {\n                        delete this.weakmap;\n                    }\n                    if (this.isSafeToReadWrite(key)) {\n                        var entry = key[this.name];\n                        return !(!entry || entry[0] !== key);\n                    }\n                    this._cleanupClosedWindows();\n                    return -1 !== safeIndexOf(this.keys, key);\n                };\n                return CrossDomainSafeWeakMap;\n            }(), constants_CONSTANTS = {\n                POST_MESSAGE_TYPE: {\n                    REQUEST: \"postrobot_message_request\",\n                    RESPONSE: \"postrobot_message_response\",\n                    ACK: \"postrobot_message_ack\"\n                },\n                POST_MESSAGE_ACK: {\n                    SUCCESS: \"success\",\n                    ERROR: \"error\"\n                },\n                POST_MESSAGE_NAMES: {\n                    METHOD: \"postrobot_method\",\n                    HELLO: \"postrobot_ready\",\n                    OPEN_TUNNEL: \"postrobot_open_tunnel\"\n                },\n                WINDOW_TYPES: {\n                    FULLPAGE: \"fullpage\",\n                    POPUP: \"popup\",\n                    IFRAME: \"iframe\"\n                },\n                WINDOW_PROPS: {\n                    POSTROBOT: \"__postRobot__\"\n                },\n                SERIALIZATION_TYPES: {\n                    METHOD: \"postrobot_method\",\n                    ERROR: \"postrobot_error\",\n                    PROMISE: \"postrobot_promise\",\n                    ZALGO_PROMISE: \"postrobot_zalgo_promise\",\n                    REGEX: \"regex\"\n                },\n                SEND_STRATEGIES: {\n                    POST_MESSAGE: \"postrobot_post_message\",\n                    BRIDGE: \"postrobot_bridge\",\n                    GLOBAL: \"postrobot_global\"\n                },\n                MOCK_PROTOCOL: \"mock:\",\n                FILE_PROTOCOL: \"file:\",\n                BRIDGE_NAME_PREFIX: \"__postrobot_bridge__\",\n                POSTROBOT_PROXY: \"__postrobot_proxy__\",\n                WILDCARD: \"*\"\n            }, POST_MESSAGE_NAMES = {\n                METHOD: \"postrobot_method\",\n                HELLO: \"postrobot_hello\",\n                OPEN_TUNNEL: \"postrobot_open_tunnel\"\n            }, CONFIG = (Object.keys(POST_MESSAGE_NAMES).map(function(key) {\n                return POST_MESSAGE_NAMES[key];\n            }), {\n                ALLOW_POSTMESSAGE_POPUP: !(\"__ALLOW_POSTMESSAGE_POPUP__\" in window) || window.__ALLOW_POSTMESSAGE_POPUP__,\n                BRIDGE_TIMEOUT: 5e3,\n                CHILD_WINDOW_TIMEOUT: 5e3,\n                ACK_TIMEOUT: -1 !== window.navigator.userAgent.match(/MSIE/i) ? 2e3 : 1e3,\n                RES_TIMEOUT: -1,\n                ALLOWED_POST_MESSAGE_METHODS: (_ALLOWED_POST_MESSAGE = {}, _ALLOWED_POST_MESSAGE[constants_CONSTANTS.SEND_STRATEGIES.POST_MESSAGE] = !0, \n                _ALLOWED_POST_MESSAGE[constants_CONSTANTS.SEND_STRATEGIES.BRIDGE] = !0, _ALLOWED_POST_MESSAGE[constants_CONSTANTS.SEND_STRATEGIES.GLOBAL] = !0, \n                _ALLOWED_POST_MESSAGE),\n                ALLOW_SAME_ORIGIN: !1\n            });\n            0 === window.location.href.indexOf(constants_CONSTANTS.FILE_PROTOCOL) && (CONFIG.ALLOW_POSTMESSAGE_POPUP = !0);\n            var _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function(obj) {\n                return typeof obj;\n            } : function(obj) {\n                return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n            };\n            function stringifyError(err) {\n                var level = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1;\n                if (level >= 3) return \"stringifyError stack overflow\";\n                try {\n                    if (!err) return \"<unknown error: \" + Object.prototype.toString.call(err) + \">\";\n                    if (\"string\" == typeof err) return err;\n                    if (err instanceof Error) {\n                        var stack = err && err.stack, message = err && err.message;\n                        if (stack && message) return -1 !== stack.indexOf(message) ? stack : message + \"\\n\" + stack;\n                        if (stack) return stack;\n                        if (message) return message;\n                    }\n                    return \"function\" == typeof err.toString ? err.toString() : Object.prototype.toString.call(err);\n                } catch (newErr) {\n                    return \"Error while stringifying error: \" + stringifyError(newErr, level + 1);\n                }\n            }\n            var once = function(method) {\n                if (!method) return method;\n                var called = !1;\n                return function() {\n                    if (!called) {\n                        called = !0;\n                        return method.apply(this, arguments);\n                    }\n                };\n            };\n            function util_noop() {}\n            function uniqueID() {\n                var chars = \"0123456789abcdef\";\n                return \"xxxxxxxxxx\".replace(/./g, function() {\n                    return chars.charAt(Math.floor(Math.random() * chars.length));\n                });\n            }\n            function replaceObject(item, callback) {\n                var depth = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1;\n                if (depth >= 100) throw new Error(\"Self-referential object passed, or object contained too many layers\");\n                var newobj = void 0;\n                if (\"object\" !== (void 0 === item ? \"undefined\" : _typeof(item)) || null === item || Array.isArray(item)) {\n                    if (!Array.isArray(item)) throw new TypeError(\"Invalid type: \" + (void 0 === item ? \"undefined\" : _typeof(item)));\n                    newobj = [];\n                } else newobj = {};\n                !function(item, callback) {\n                    Array.isArray(item) ? function(item, callback) {\n                        for (var i = 0; i < item.length; i++) callback(item[i], i);\n                    }(item, callback) : \"object\" === (void 0 === item ? \"undefined\" : _typeof(item)) && null !== item && function(item, callback) {\n                        for (var _key in item) item.hasOwnProperty(_key) && callback(item[_key], _key);\n                    }(item, callback);\n                }(item, function(childItem, key) {\n                    var result = callback(childItem, key);\n                    void 0 !== result ? newobj[key] = result : \"object\" === (void 0 === childItem ? \"undefined\" : _typeof(childItem)) && null !== childItem ? newobj[key] = replaceObject(childItem, callback, depth + 1) : newobj[key] = childItem;\n                });\n                return newobj;\n            }\n            function isRegex(item) {\n                return \"[object RegExp]\" === Object.prototype.toString.call(item);\n            }\n            function utils_isPromise(item) {\n                try {\n                    if (!item) return !1;\n                    if (\"undefined\" != typeof Promise && item instanceof Promise) return !0;\n                    if (\"undefined\" != typeof window && window.Window && item instanceof window.Window) return !1;\n                    if (\"undefined\" != typeof window && window.constructor && item instanceof window.constructor) return !1;\n                    var _toString = {}.toString;\n                    if (_toString) {\n                        var name = _toString.call(item);\n                        if (\"[object Window]\" === name || \"[object global]\" === name || \"[object DOMWindow]\" === name) return !1;\n                    }\n                    if (\"function\" == typeof item.then) return !0;\n                } catch (err) {\n                    return !1;\n                }\n                return !1;\n            }\n            function getGlobal() {\n                var glob = void 0;\n                if (\"undefined\" != typeof window) glob = window; else {\n                    if (\"undefined\" == typeof window) throw new TypeError(\"Can not find global\");\n                    glob = window;\n                }\n                var zalgoGlobal = glob.__zalgopromise__ = glob.__zalgopromise__ || {};\n                zalgoGlobal.flushPromises = zalgoGlobal.flushPromises || [];\n                zalgoGlobal.activeCount = zalgoGlobal.activeCount || 0;\n                zalgoGlobal.possiblyUnhandledPromiseHandlers = zalgoGlobal.possiblyUnhandledPromiseHandlers || [];\n                zalgoGlobal.dispatchedErrors = zalgoGlobal.dispatchedErrors || [];\n                return zalgoGlobal;\n            }\n            var promise_ZalgoPromise = function() {\n                function ZalgoPromise(handler) {\n                    var _this = this;\n                    !function(instance, Constructor) {\n                        if (!(instance instanceof ZalgoPromise)) throw new TypeError(\"Cannot call a class as a function\");\n                    }(this);\n                    this.resolved = !1;\n                    this.rejected = !1;\n                    this.errorHandled = !1;\n                    this.handlers = [];\n                    if (handler) {\n                        var _result = void 0, _error = void 0, resolved = !1, rejected = !1, isAsync = !1;\n                        try {\n                            handler(function(res) {\n                                if (isAsync) _this.resolve(res); else {\n                                    resolved = !0;\n                                    _result = res;\n                                }\n                            }, function(err) {\n                                if (isAsync) _this.reject(err); else {\n                                    rejected = !0;\n                                    _error = err;\n                                }\n                            });\n                        } catch (err) {\n                            this.reject(err);\n                            return;\n                        }\n                        isAsync = !0;\n                        resolved ? this.resolve(_result) : rejected && this.reject(_error);\n                    }\n                }\n                ZalgoPromise.prototype.resolve = function(result) {\n                    if (this.resolved || this.rejected) return this;\n                    if (utils_isPromise(result)) throw new Error(\"Can not resolve promise with another promise\");\n                    this.resolved = !0;\n                    this.value = result;\n                    this.dispatch();\n                    return this;\n                };\n                ZalgoPromise.prototype.reject = function(error) {\n                    var _this2 = this;\n                    if (this.resolved || this.rejected) return this;\n                    if (utils_isPromise(error)) throw new Error(\"Can not reject promise with another promise\");\n                    if (!error) {\n                        var _err = error && \"function\" == typeof error.toString ? error.toString() : Object.prototype.toString.call(error);\n                        error = new Error(\"Expected reject to be called with Error, got \" + _err);\n                    }\n                    this.rejected = !0;\n                    this.error = error;\n                    this.errorHandled || setTimeout(function() {\n                        _this2.errorHandled || function(err, promise) {\n                            if (-1 === getGlobal().dispatchedErrors.indexOf(err)) {\n                                getGlobal().dispatchedErrors.push(err);\n                                setTimeout(function() {\n                                    throw err;\n                                }, 1);\n                                for (var j = 0; j < getGlobal().possiblyUnhandledPromiseHandlers.length; j++) getGlobal().possiblyUnhandledPromiseHandlers[j](err, promise);\n                            }\n                        }(error, _this2);\n                    }, 1);\n                    this.dispatch();\n                    return this;\n                };\n                ZalgoPromise.prototype.asyncReject = function(error) {\n                    this.errorHandled = !0;\n                    this.reject(error);\n                };\n                ZalgoPromise.prototype.dispatch = function() {\n                    var _this3 = this, dispatching = this.dispatching, resolved = this.resolved, rejected = this.rejected, handlers = this.handlers;\n                    if (!dispatching && (resolved || rejected)) {\n                        this.dispatching = !0;\n                        getGlobal().activeCount += 1;\n                        for (var _loop = function(i) {\n                            var _handlers$i = handlers[i], onSuccess = _handlers$i.onSuccess, onError = _handlers$i.onError, promise = _handlers$i.promise, result = void 0;\n                            if (resolved) try {\n                                result = onSuccess ? onSuccess(_this3.value) : _this3.value;\n                            } catch (err) {\n                                promise.reject(err);\n                                return \"continue\";\n                            } else if (rejected) {\n                                if (!onError) {\n                                    promise.reject(_this3.error);\n                                    return \"continue\";\n                                }\n                                try {\n                                    result = onError(_this3.error);\n                                } catch (err) {\n                                    promise.reject(err);\n                                    return \"continue\";\n                                }\n                            }\n                            if (result instanceof ZalgoPromise && (result.resolved || result.rejected)) {\n                                result.resolved ? promise.resolve(result.value) : promise.reject(result.error);\n                                result.errorHandled = !0;\n                            } else utils_isPromise(result) ? result instanceof ZalgoPromise && (result.resolved || result.rejected) ? result.resolved ? promise.resolve(result.value) : promise.reject(result.error) : result.then(function(res) {\n                                promise.resolve(res);\n                            }, function(err) {\n                                promise.reject(err);\n                            }) : promise.resolve(result);\n                        }, i = 0; i < handlers.length; i++) _loop(i);\n                        handlers.length = 0;\n                        this.dispatching = !1;\n                        getGlobal().activeCount -= 1;\n                        0 === getGlobal().activeCount && ZalgoPromise.flushQueue();\n                    }\n                };\n                ZalgoPromise.prototype.then = function(onSuccess, onError) {\n                    if (onSuccess && \"function\" != typeof onSuccess && !onSuccess.call) throw new Error(\"Promise.then expected a function for success handler\");\n                    if (onError && \"function\" != typeof onError && !onError.call) throw new Error(\"Promise.then expected a function for error handler\");\n                    var promise = new ZalgoPromise();\n                    this.handlers.push({\n                        promise: promise,\n                        onSuccess: onSuccess,\n                        onError: onError\n                    });\n                    this.errorHandled = !0;\n                    this.dispatch();\n                    return promise;\n                };\n                ZalgoPromise.prototype.catch = function(onError) {\n                    return this.then(void 0, onError);\n                };\n                ZalgoPromise.prototype.finally = function(onFinally) {\n                    if (onFinally && \"function\" != typeof onFinally && !onFinally.call) throw new Error(\"Promise.finally expected a function\");\n                    return this.then(function(result) {\n                        return ZalgoPromise.try(onFinally).then(function() {\n                            return result;\n                        });\n                    }, function(err) {\n                        return ZalgoPromise.try(onFinally).then(function() {\n                            throw err;\n                        });\n                    });\n                };\n                ZalgoPromise.prototype.timeout = function(time, err) {\n                    var _this4 = this;\n                    if (this.resolved || this.rejected) return this;\n                    var timeout = setTimeout(function() {\n                        _this4.resolved || _this4.rejected || _this4.reject(err || new Error(\"Promise timed out after \" + time + \"ms\"));\n                    }, time);\n                    return this.then(function(result) {\n                        clearTimeout(timeout);\n                        return result;\n                    });\n                };\n                ZalgoPromise.prototype.toPromise = function() {\n                    if (\"undefined\" == typeof Promise) throw new TypeError(\"Could not find Promise\");\n                    return Promise.resolve(this);\n                };\n                ZalgoPromise.resolve = function(value) {\n                    return value instanceof ZalgoPromise ? value : utils_isPromise(value) ? new ZalgoPromise(function(resolve, reject) {\n                        return value.then(resolve, reject);\n                    }) : new ZalgoPromise().resolve(value);\n                };\n                ZalgoPromise.reject = function(error) {\n                    return new ZalgoPromise().reject(error);\n                };\n                ZalgoPromise.all = function(promises) {\n                    var promise = new ZalgoPromise(), count = promises.length, results = [];\n                    if (!count) {\n                        promise.resolve(results);\n                        return promise;\n                    }\n                    for (var _loop2 = function(i) {\n                        var prom = promises[i];\n                        if (prom instanceof ZalgoPromise) {\n                            if (prom.resolved) {\n                                results[i] = prom.value;\n                                count -= 1;\n                                return \"continue\";\n                            }\n                        } else if (!utils_isPromise(prom)) {\n                            results[i] = prom;\n                            count -= 1;\n                            return \"continue\";\n                        }\n                        ZalgoPromise.resolve(prom).then(function(result) {\n                            results[i] = result;\n                            0 == (count -= 1) && promise.resolve(results);\n                        }, function(err) {\n                            promise.reject(err);\n                        });\n                    }, i = 0; i < promises.length; i++) _loop2(i);\n                    0 === count && promise.resolve(results);\n                    return promise;\n                };\n                ZalgoPromise.hash = function(promises) {\n                    var result = {};\n                    return ZalgoPromise.all(Object.keys(promises).map(function(key) {\n                        return ZalgoPromise.resolve(promises[key]).then(function(value) {\n                            result[key] = value;\n                        });\n                    })).then(function() {\n                        return result;\n                    });\n                };\n                ZalgoPromise.map = function(items, method) {\n                    return ZalgoPromise.all(items.map(method));\n                };\n                ZalgoPromise.onPossiblyUnhandledException = function(handler) {\n                    return function(handler) {\n                        getGlobal().possiblyUnhandledPromiseHandlers.push(handler);\n                        return {\n                            cancel: function() {\n                                getGlobal().possiblyUnhandledPromiseHandlers.splice(getGlobal().possiblyUnhandledPromiseHandlers.indexOf(handler), 1);\n                            }\n                        };\n                    }(handler);\n                };\n                ZalgoPromise.try = function(method, context, args) {\n                    if (method && \"function\" != typeof method && !method.call) throw new Error(\"Promise.try expected a function\");\n                    var result = void 0;\n                    try {\n                        result = method.apply(context, args || []);\n                    } catch (err) {\n                        return ZalgoPromise.reject(err);\n                    }\n                    return ZalgoPromise.resolve(result);\n                };\n                ZalgoPromise.delay = function(_delay) {\n                    return new ZalgoPromise(function(resolve) {\n                        setTimeout(resolve, _delay);\n                    });\n                };\n                ZalgoPromise.isPromise = function(value) {\n                    return !!(value && value instanceof ZalgoPromise) || utils_isPromise(value);\n                };\n                ZalgoPromise.flush = function() {\n                    var promise = new ZalgoPromise();\n                    getGlobal().flushPromises.push(promise);\n                    0 === getGlobal().activeCount && ZalgoPromise.flushQueue();\n                    return promise;\n                };\n                ZalgoPromise.flushQueue = function() {\n                    var promisesToFlush = getGlobal().flushPromises;\n                    getGlobal().flushPromises = [];\n                    for (var _i2 = 0, _length2 = null == promisesToFlush ? 0 : promisesToFlush.length; _i2 < _length2; _i2++) promisesToFlush[_i2].resolve();\n                };\n                return ZalgoPromise;\n            }(), global = window[constants_CONSTANTS.WINDOW_PROPS.POSTROBOT] = window[constants_CONSTANTS.WINDOW_PROPS.POSTROBOT] || {};\n            global.registerSelf = function() {};\n            var serialize__typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function(obj) {\n                return typeof obj;\n            } : function(obj) {\n                return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n            };\n            global.methods = global.methods || new weakmap_CrossDomainSafeWeakMap();\n            var listenForMethods = once(function() {\n                global.on(constants_CONSTANTS.POST_MESSAGE_NAMES.METHOD, {\n                    origin: constants_CONSTANTS.WILDCARD\n                }, function(_ref) {\n                    var source = _ref.source, origin = _ref.origin, data = _ref.data, methods = global.methods.get(source);\n                    if (!methods) throw new Error(\"Could not find any methods this window has privileges to call\");\n                    var meth = methods[data.id];\n                    if (!meth) throw new Error(\"Could not find method with id: \" + data.id);\n                    if (!Object(src.matchDomain)(meth.domain, origin)) throw new Error(\"Method domain \" + meth.domain + \" does not match origin \" + origin);\n                    return promise_ZalgoPromise.try(function() {\n                        return meth.method.apply({\n                            source: source,\n                            origin: origin,\n                            data: data\n                        }, data.args);\n                    }).then(function(result) {\n                        return {\n                            result: result,\n                            id: data.id,\n                            name: data.name\n                        };\n                    });\n                });\n            });\n            function isSerialized(item, type) {\n                return \"object\" === (void 0 === item ? \"undefined\" : serialize__typeof(item)) && null !== item && item.__type__ === type;\n            }\n            function serializeMethod(destination, domain, method, name) {\n                var id = uniqueID(), methods = global.methods.get(destination);\n                if (!methods) {\n                    methods = {};\n                    global.methods.set(destination, methods);\n                }\n                methods[id] = {\n                    domain: domain,\n                    method: method\n                };\n                return {\n                    __type__: constants_CONSTANTS.SERIALIZATION_TYPES.METHOD,\n                    __id__: id,\n                    __name__: name\n                };\n            }\n            function deserializeMethod(source, origin, obj) {\n                function wrapper() {\n                    var args = Array.prototype.slice.call(arguments);\n                    return global.send(source, constants_CONSTANTS.POST_MESSAGE_NAMES.METHOD, {\n                        id: obj.__id__,\n                        name: obj.__name__,\n                        args: args\n                    }, {\n                        domain: origin,\n                        timeout: -1\n                    }).then(function(_ref2) {\n                        return _ref2.data.result;\n                    }, function(err) {\n                        throw err;\n                    });\n                }\n                wrapper.__name__ = obj.__name__;\n                wrapper.__xdomain__ = !0;\n                wrapper.source = source;\n                wrapper.origin = origin;\n                return wrapper;\n            }\n            function deserializeZalgoPromise(source, origin, prom) {\n                return new promise_ZalgoPromise(function(resolve, reject) {\n                    return deserializeMethod(source, origin, prom.__then__)(resolve, reject);\n                });\n            }\n            global.readyPromises = global.readyPromises || new weakmap_CrossDomainSafeWeakMap();\n            function sayHello(win) {\n                return global.send(win, constants_CONSTANTS.POST_MESSAGE_NAMES.HELLO, {}, {\n                    domain: constants_CONSTANTS.WILDCARD,\n                    timeout: -1\n                }).then(function(_ref2) {\n                    return {\n                        origin: _ref2.origin\n                    };\n                });\n            }\n            var SEND_MESSAGE_STRATEGIES = {};\n            SEND_MESSAGE_STRATEGIES[constants_CONSTANTS.SEND_STRATEGIES.POST_MESSAGE] = function(win, serializedMessage, domain) {\n                (Array.isArray(domain) ? domain : \"string\" == typeof domain ? [ domain ] : [ constants_CONSTANTS.WILDCARD ]).map(function(dom) {\n                    if (0 === dom.indexOf(constants_CONSTANTS.MOCK_PROTOCOL)) {\n                        if (window.location.protocol === constants_CONSTANTS.FILE_PROTOCOL) return constants_CONSTANTS.WILDCARD;\n                        if (!Object(src.isActuallySameDomain)(win)) throw new Error(\"Attempting to send messsage to mock domain \" + dom + \", but window is actually cross-domain\");\n                        return Object(src.getActualDomain)(win);\n                    }\n                    return 0 === dom.indexOf(constants_CONSTANTS.FILE_PROTOCOL) ? constants_CONSTANTS.WILDCARD : dom;\n                }).forEach(function(dom) {\n                    return win.postMessage(serializedMessage, dom);\n                });\n            };\n            var _extends = Object.assign || function(target) {\n                for (var i = 1; i < arguments.length; i++) {\n                    var source = arguments[i];\n                    for (var key in source) Object.prototype.hasOwnProperty.call(source, key) && (target[key] = source[key]);\n                }\n                return target;\n            };\n            function sendMessage(win, message, domain) {\n                return promise_ZalgoPromise.try(function() {\n                    var _jsonStringify;\n                    message = function(win, message) {\n                        var options = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}, id = uniqueID(), type = Object(src.isPopup)() ? constants_CONSTANTS.WINDOW_TYPES.POPUP : Object(src.isIframe)() ? constants_CONSTANTS.WINDOW_TYPES.IFRAME : constants_CONSTANTS.WINDOW_TYPES.FULLPAGE, sourceDomain = Object(src.getDomain)(window);\n                        return _extends({}, message, options, {\n                            sourceDomain: sourceDomain,\n                            id: message.id || id,\n                            windowType: type\n                        });\n                    }(win, message, {\n                        data: function(destination, domain, obj) {\n                            return replaceObject({\n                                obj: message.data\n                            }, function(item, key) {\n                                return \"function\" == typeof item ? serializeMethod(destination, domain, item, key.toString()) : item instanceof Error ? (err = item, \n                                {\n                                    __type__: constants_CONSTANTS.SERIALIZATION_TYPES.ERROR,\n                                    __message__: stringifyError(err),\n                                    __code__: err.code\n                                }) : window.Promise && item instanceof window.Promise ? function(destination, domain, promise, name) {\n                                    return {\n                                        __type__: constants_CONSTANTS.SERIALIZATION_TYPES.PROMISE,\n                                        __then__: serializeMethod(destination, domain, function(resolve, reject) {\n                                            return promise.then(resolve, reject);\n                                        }, name + \".then\")\n                                    };\n                                }(destination, domain, item, key.toString()) : promise_ZalgoPromise.isPromise(item) ? function(destination, domain, promise, name) {\n                                    return {\n                                        __type__: constants_CONSTANTS.SERIALIZATION_TYPES.ZALGO_PROMISE,\n                                        __then__: serializeMethod(destination, domain, function(resolve, reject) {\n                                            return promise.then(resolve, reject);\n                                        }, name + \".then\")\n                                    };\n                                }(destination, domain, item, key.toString()) : isRegex(item) ? (regex = item, {\n                                    __type__: constants_CONSTANTS.SERIALIZATION_TYPES.REGEX,\n                                    __source__: regex.source\n                                }) : void 0;\n                                var err, regex;\n                            }).obj;\n                        }(win, domain),\n                        domain: domain\n                    });\n                    if (win === window && !CONFIG.ALLOW_SAME_ORIGIN) throw new Error(\"Attemping to send message to self\");\n                    if (Object(src.isWindowClosed)(win)) throw new Error(\"Window is closed\");\n                    var messages = [], serializedMessage = function(obj, replacer, indent) {\n                        var objectToJSON = void 0, arrayToJSON = void 0;\n                        try {\n                            if (\"{}\" !== JSON.stringify({})) {\n                                objectToJSON = Object.prototype.toJSON;\n                                delete Object.prototype.toJSON;\n                            }\n                            if (\"{}\" !== JSON.stringify({})) throw new Error(\"Can not correctly serialize JSON objects\");\n                            if (\"[]\" !== JSON.stringify([])) {\n                                arrayToJSON = Array.prototype.toJSON;\n                                delete Array.prototype.toJSON;\n                            }\n                            if (\"[]\" !== JSON.stringify([])) throw new Error(\"Can not correctly serialize JSON objects\");\n                        } catch (err) {\n                            throw new Error(\"Can not repair JSON.stringify: \" + err.message);\n                        }\n                        var result = JSON.stringify.call(this, obj, null, 2);\n                        try {\n                            objectToJSON && (Object.prototype.toJSON = objectToJSON);\n                            arrayToJSON && (Array.prototype.toJSON = arrayToJSON);\n                        } catch (err) {\n                            throw new Error(\"Can not repair JSON.stringify: \" + err.message);\n                        }\n                        return result;\n                    }(((_jsonStringify = {})[constants_CONSTANTS.WINDOW_PROPS.POSTROBOT] = message, \n                    _jsonStringify));\n                    return promise_ZalgoPromise.map(Object.keys(SEND_MESSAGE_STRATEGIES), function(strategyName) {\n                        return promise_ZalgoPromise.try(function() {\n                            if (!CONFIG.ALLOWED_POST_MESSAGE_METHODS[strategyName]) throw new Error(\"Strategy disallowed: \" + strategyName);\n                            return SEND_MESSAGE_STRATEGIES[strategyName](win, serializedMessage, domain);\n                        }).then(function() {\n                            messages.push(strategyName + \": success\");\n                            return !0;\n                        }, function(err) {\n                            messages.push(strategyName + \": \" + stringifyError(err) + \"\\n\");\n                            return !1;\n                        });\n                    }).then(function(results) {\n                        var success = results.some(Boolean), status = message.type + \" \" + message.name + \" \" + (success ? \"success\" : \"error\") + \":\\n  - \" + messages.join(\"\\n  - \") + \"\\n\";\n                        if (!success) throw new Error(status);\n                    });\n                });\n            }\n            global.responseListeners = global.responseListeners || {};\n            global.requestListeners = global.requestListeners || {};\n            global.WINDOW_WILDCARD = global.WINDOW_WILDCARD || new function() {}();\n            global.erroredResponseListeners = global.erroredResponseListeners || {};\n            var _RECEIVE_MESSAGE_TYPE, __DOMAIN_REGEX__ = \"__domain_regex__\";\n            function getResponseListener(hash) {\n                return global.responseListeners[hash];\n            }\n            function deleteResponseListener(hash) {\n                delete global.responseListeners[hash];\n            }\n            function isResponseListenerErrored(hash) {\n                return Boolean(global.erroredResponseListeners[hash]);\n            }\n            function getRequestListener(_ref) {\n                var name = _ref.name, win = _ref.win, domain = _ref.domain;\n                win === constants_CONSTANTS.WILDCARD && (win = null);\n                domain === constants_CONSTANTS.WILDCARD && (domain = null);\n                if (!name) throw new Error(\"Name required to get request listener\");\n                var nameListeners = global.requestListeners[name];\n                if (nameListeners) for (var _i2 = 0, _ref3 = [ win, global.WINDOW_WILDCARD ], _length2 = null == _ref3 ? 0 : _ref3.length; _i2 < _length2; _i2++) {\n                    var winQualifier = _ref3[_i2], winListeners = winQualifier && nameListeners.get(winQualifier);\n                    if (winListeners) {\n                        if (domain && \"string\" == typeof domain) {\n                            if (winListeners[domain]) return winListeners[domain];\n                            if (winListeners[__DOMAIN_REGEX__]) for (var _i4 = 0, _winListeners$__DOMAI2 = winListeners[__DOMAIN_REGEX__], _length4 = null == _winListeners$__DOMAI2 ? 0 : _winListeners$__DOMAI2.length; _i4 < _length4; _i4++) {\n                                var _ref5 = _winListeners$__DOMAI2[_i4], regex = _ref5.regex, listener = _ref5.listener;\n                                if (Object(src.matchDomain)(regex, domain)) return listener;\n                            }\n                        }\n                        if (winListeners[constants_CONSTANTS.WILDCARD]) return winListeners[constants_CONSTANTS.WILDCARD];\n                    }\n                }\n            }\n            var types__extends = Object.assign || function(target) {\n                for (var i = 1; i < arguments.length; i++) {\n                    var source = arguments[i];\n                    for (var key in source) Object.prototype.hasOwnProperty.call(source, key) && (target[key] = source[key]);\n                }\n                return target;\n            }, RECEIVE_MESSAGE_TYPES = ((_RECEIVE_MESSAGE_TYPE = {})[constants_CONSTANTS.POST_MESSAGE_TYPE.ACK] = function(source, origin, message) {\n                if (!isResponseListenerErrored(message.hash)) {\n                    var options = getResponseListener(message.hash);\n                    if (!options) throw new Error(\"No handler found for post message ack for message: \" + message.name + \" from \" + origin + \" in \" + window.location.protocol + \"//\" + window.location.host + window.location.pathname);\n                    if (!Object(src.matchDomain)(options.domain, origin)) throw new Error(\"Ack origin \" + origin + \" does not match domain \" + options.domain.toString());\n                    options.ack = !0;\n                }\n            }, _RECEIVE_MESSAGE_TYPE[constants_CONSTANTS.POST_MESSAGE_TYPE.REQUEST] = function(source, origin, message) {\n                var options = getRequestListener({\n                    name: message.name,\n                    win: source,\n                    domain: origin\n                });\n                function respond(data) {\n                    return message.fireAndForget || Object(src.isWindowClosed)(source) ? promise_ZalgoPromise.resolve() : sendMessage(source, types__extends({\n                        target: message.originalSource,\n                        hash: message.hash,\n                        name: message.name\n                    }, data), origin);\n                }\n                return promise_ZalgoPromise.all([ respond({\n                    type: constants_CONSTANTS.POST_MESSAGE_TYPE.ACK\n                }), promise_ZalgoPromise.try(function() {\n                    if (!options) throw new Error(\"No handler found for post message: \" + message.name + \" from \" + origin + \" in \" + window.location.protocol + \"//\" + window.location.host + window.location.pathname);\n                    if (!Object(src.matchDomain)(options.domain, origin)) throw new Error(\"Request origin \" + origin + \" does not match domain \" + options.domain.toString());\n                    var data = message.data;\n                    return options.handler({\n                        source: source,\n                        origin: origin,\n                        data: data\n                    });\n                }).then(function(data) {\n                    return respond({\n                        type: constants_CONSTANTS.POST_MESSAGE_TYPE.RESPONSE,\n                        ack: constants_CONSTANTS.POST_MESSAGE_ACK.SUCCESS,\n                        data: data\n                    });\n                }, function(err) {\n                    var error = stringifyError(err).replace(/^Error: /, \"\"), code = err.code;\n                    return respond({\n                        type: constants_CONSTANTS.POST_MESSAGE_TYPE.RESPONSE,\n                        ack: constants_CONSTANTS.POST_MESSAGE_ACK.ERROR,\n                        error: error,\n                        code: code\n                    });\n                }) ]).then(util_noop).catch(function(err) {\n                    if (options && options.handleError) return options.handleError(err);\n                    throw err;\n                });\n            }, _RECEIVE_MESSAGE_TYPE[constants_CONSTANTS.POST_MESSAGE_TYPE.RESPONSE] = function(source, origin, message) {\n                if (!isResponseListenerErrored(message.hash)) {\n                    var options = getResponseListener(message.hash);\n                    if (!options) throw new Error(\"No handler found for post message response for message: \" + message.name + \" from \" + origin + \" in \" + window.location.protocol + \"//\" + window.location.host + window.location.pathname);\n                    if (!Object(src.matchDomain)(options.domain, origin)) throw new Error(\"Response origin \" + origin + \" does not match domain \" + Object(src.stringifyDomainPattern)(options.domain));\n                    deleteResponseListener(message.hash);\n                    if (message.ack === constants_CONSTANTS.POST_MESSAGE_ACK.ERROR) {\n                        var err = new Error(message.error);\n                        message.code && (err.code = message.code);\n                        return options.respond(err, null);\n                    }\n                    if (message.ack === constants_CONSTANTS.POST_MESSAGE_ACK.SUCCESS) {\n                        var data = message.data || message.response;\n                        return options.respond(null, {\n                            source: source,\n                            origin: origin,\n                            data: data\n                        });\n                    }\n                }\n            }, _RECEIVE_MESSAGE_TYPE), receive__typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function(obj) {\n                return typeof obj;\n            } : function(obj) {\n                return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n            };\n            global.receivedMessages = global.receivedMessages || [];\n            function receiveMessage(event) {\n                if (!window || window.closed) throw new Error(\"Message recieved in closed window\");\n                try {\n                    if (!event.source) return;\n                } catch (err) {\n                    return;\n                }\n                var source = event.source, origin = event.origin, message = function(message) {\n                    var item, parsedMessage = void 0;\n                    try {\n                        parsedMessage = (item = message, JSON.parse(item));\n                    } catch (err) {\n                        return;\n                    }\n                    if (parsedMessage && \"object\" === (void 0 === parsedMessage ? \"undefined\" : receive__typeof(parsedMessage)) && null !== parsedMessage && (parsedMessage = parsedMessage[constants_CONSTANTS.WINDOW_PROPS.POSTROBOT]) && \"object\" === (void 0 === parsedMessage ? \"undefined\" : receive__typeof(parsedMessage)) && null !== parsedMessage && parsedMessage.type && \"string\" == typeof parsedMessage.type && RECEIVE_MESSAGE_TYPES[parsedMessage.type]) return parsedMessage;\n                }(event.data);\n                if (message) {\n                    if (!message.sourceDomain || \"string\" != typeof message.sourceDomain) throw new Error(\"Expected message to have sourceDomain\");\n                    0 !== message.sourceDomain.indexOf(constants_CONSTANTS.MOCK_PROTOCOL) && 0 !== message.sourceDomain.indexOf(constants_CONSTANTS.FILE_PROTOCOL) || (origin = message.sourceDomain);\n                    if (-1 === global.receivedMessages.indexOf(message.id)) {\n                        global.receivedMessages.push(message.id);\n                        if (!Object(src.isWindowClosed)(source) || message.fireAndForget) {\n                            message.data && (message.data = function(source, origin, obj) {\n                                return replaceObject({\n                                    obj: message.data\n                                }, function(item) {\n                                    if (\"object\" === (void 0 === item ? \"undefined\" : serialize__typeof(item)) && null !== item) return isSerialized(item, constants_CONSTANTS.SERIALIZATION_TYPES.METHOD) ? deserializeMethod(source, origin, item) : isSerialized(item, constants_CONSTANTS.SERIALIZATION_TYPES.ERROR) ? function(source, origin, obj) {\n                                        var err = new Error(obj.__message__);\n                                        obj.__code__ && (err.code = obj.__code__);\n                                        return err;\n                                    }(0, 0, item) : isSerialized(item, constants_CONSTANTS.SERIALIZATION_TYPES.PROMISE) ? function(source, origin, prom) {\n                                        return window.Promise ? new window.Promise(function(resolve, reject) {\n                                            return deserializeMethod(source, origin, prom.__then__)(resolve, reject);\n                                        }) : deserializeZalgoPromise(source, origin, prom);\n                                    }(source, origin, item) : isSerialized(item, constants_CONSTANTS.SERIALIZATION_TYPES.ZALGO_PROMISE) ? deserializeZalgoPromise(source, origin, item) : isSerialized(item, constants_CONSTANTS.SERIALIZATION_TYPES.REGEX) ? function(source, origin, item) {\n                                        return new RegExp(item.__source__);\n                                    }(0, 0, item) : void 0;\n                                }).obj;\n                            }(source, origin));\n                            RECEIVE_MESSAGE_TYPES[message.type](source, origin, message);\n                        }\n                    }\n                }\n            }\n            function messageListener(event) {\n                try {\n                    event.source;\n                } catch (err) {\n                    return;\n                }\n                receiveMessage({\n                    source: event.source || event.sourceElement,\n                    origin: event.origin || event.originalEvent && event.originalEvent.origin,\n                    data: event.data\n                });\n            }\n            global.receiveMessage = receiveMessage;\n            global.requestPromises = global.requestPromises || new weakmap_CrossDomainSafeWeakMap();\n            function request(options) {\n                return promise_ZalgoPromise.try(function() {\n                    if (!options.name) throw new Error(\"Expected options.name\");\n                    var name = options.name, targetWindow = void 0, domain = void 0;\n                    if (\"string\" == typeof options.window) {\n                        var el = document.getElementById(options.window);\n                        if (!el) throw new Error(\"Expected options.window \" + Object.prototype.toString.call(options.window) + \" to be a valid element id\");\n                        if (\"iframe\" !== el.tagName.toLowerCase()) throw new Error(\"Expected options.window \" + Object.prototype.toString.call(options.window) + \" to be an iframe\");\n                        if (!el.contentWindow) throw new Error(\"Iframe must have contentWindow.  Make sure it has a src attribute and is in the DOM.\");\n                        targetWindow = el.contentWindow;\n                    } else if (options.window instanceof HTMLIFrameElement) {\n                        if (\"iframe\" !== options.window.tagName.toLowerCase()) throw new Error(\"Expected options.window \" + Object.prototype.toString.call(options.window) + \" to be an iframe\");\n                        if (options.window && !options.window.contentWindow) throw new Error(\"Iframe must have contentWindow.  Make sure it has a src attribute and is in the DOM.\");\n                        options.window && options.window.contentWindow && (targetWindow = options.window.contentWindow);\n                    } else targetWindow = options.window;\n                    if (!targetWindow) throw new Error(\"Expected options.window to be a window object, iframe, or iframe element id.\");\n                    var win = targetWindow;\n                    domain = options.domain || constants_CONSTANTS.WILDCARD;\n                    var hash = options.name + \"_\" + uniqueID();\n                    if (Object(src.isWindowClosed)(win)) throw new Error(\"Target window is closed\");\n                    var hasResult = !1, requestPromises = global.requestPromises.get(win);\n                    if (!requestPromises) {\n                        requestPromises = [];\n                        global.requestPromises.set(win, requestPromises);\n                    }\n                    var requestPromise = promise_ZalgoPromise.try(function() {\n                        if (Object(src.isAncestor)(window, win)) return function(win) {\n                            var timeout = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 5e3, name = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : \"Window\", promise = global.readyPromises.get(win);\n                            if (promise) return promise;\n                            promise = new promise_ZalgoPromise();\n                            global.readyPromises.set(win, promise);\n                            -1 !== timeout && setTimeout(function() {\n                                return promise.reject(new Error(name + \" did not load after \" + timeout + \"ms\"));\n                            }, timeout);\n                            return promise;\n                        }(win, options.timeout || CONFIG.CHILD_WINDOW_TIMEOUT);\n                    }).then(function() {\n                        var origin = (arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}).origin;\n                        if (isRegex(domain) && !origin) return sayHello(win);\n                    }).then(function() {\n                        var origin = (arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}).origin;\n                        if (isRegex(domain)) {\n                            if (!Object(src.matchDomain)(domain, origin)) throw new Error(\"Remote window domain \" + origin + \" does not match regex: \" + domain.toString());\n                            domain = origin;\n                        }\n                        if (\"string\" != typeof domain && !Array.isArray(domain)) throw new TypeError(\"Expected domain to be a string or array\");\n                        var actualDomain = domain;\n                        return new promise_ZalgoPromise(function(resolve, reject) {\n                            var responseListener = void 0;\n                            options.fireAndForget || function(hash, listener) {\n                                global.responseListeners[hash] = listener;\n                            }(hash, responseListener = {\n                                name: name,\n                                window: win,\n                                domain: actualDomain,\n                                respond: function(err, result) {\n                                    if (!err) {\n                                        hasResult = !0;\n                                        requestPromises.splice(requestPromises.indexOf(requestPromise, 1));\n                                    }\n                                    err ? reject(err) : resolve(result);\n                                }\n                            });\n                            sendMessage(win, {\n                                type: constants_CONSTANTS.POST_MESSAGE_TYPE.REQUEST,\n                                hash: hash,\n                                name: name,\n                                data: options.data,\n                                fireAndForget: options.fireAndForget\n                            }, actualDomain).catch(reject);\n                            if (options.fireAndForget) return resolve();\n                            var ackTimeout = CONFIG.ACK_TIMEOUT, resTimeout = options.timeout || CONFIG.RES_TIMEOUT, cycleTime = 100;\n                            setTimeout(function cycle() {\n                                if (!hasResult) {\n                                    if (Object(src.isWindowClosed)(win)) return responseListener.ack ? reject(new Error(\"Window closed for \" + name + \" before response\")) : reject(new Error(\"Window closed for \" + name + \" before ack\"));\n                                    ackTimeout = Math.max(ackTimeout - cycleTime, 0);\n                                    -1 !== resTimeout && (resTimeout = Math.max(resTimeout - cycleTime, 0));\n                                    if (responseListener.ack) {\n                                        if (-1 === resTimeout) return;\n                                        cycleTime = Math.min(resTimeout, 2e3);\n                                    } else {\n                                        if (0 === ackTimeout) return reject(new Error(\"No ack for postMessage \" + name + \" in \" + Object(src.getDomain)() + \" in \" + CONFIG.ACK_TIMEOUT + \"ms\"));\n                                        if (0 === resTimeout) return reject(new Error(\"No response for postMessage \" + name + \" in \" + Object(src.getDomain)() + \" in \" + (options.timeout || CONFIG.RES_TIMEOUT) + \"ms\"));\n                                    }\n                                    setTimeout(cycle, cycleTime);\n                                }\n                            }, cycleTime);\n                        });\n                    });\n                    requestPromise.catch(function() {\n                        !function(hash) {\n                            global.erroredResponseListeners[hash] = !0;\n                        }(hash);\n                        deleteResponseListener(hash);\n                    });\n                    requestPromises.push(requestPromise);\n                    return requestPromise;\n                });\n            }\n            function _send(window, name, data, options) {\n                (options = options || {}).window = window;\n                options.name = name;\n                options.data = data;\n                return request(options);\n            }\n            function sendToParent(name, data, options) {\n                var win = Object(src.getAncestor)();\n                return win ? _send(win, name, data, options) : new promise_ZalgoPromise(function(resolve, reject) {\n                    return reject(new Error(\"Window does not have a parent\"));\n                });\n            }\n            function client() {\n                var options = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};\n                if (!options.window) throw new Error(\"Expected options.window\");\n                var win = options.window;\n                return {\n                    send: function(name, data) {\n                        return _send(win, name, data, options);\n                    }\n                };\n            }\n            global.send = _send;\n            var server__typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function(obj) {\n                return typeof obj;\n            } : function(obj) {\n                return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n            };\n            function listen(options) {\n                if (!options.name) throw new Error(\"Expected options.name\");\n                if (!options.handler) throw new Error(\"Expected options.handler\");\n                var name = options.name, win = options.window, domain = options.domain, listenerOptions = {\n                    handler: options.handler,\n                    handleError: options.errorHandler || function(err) {\n                        throw err;\n                    },\n                    window: win,\n                    domain: domain || constants_CONSTANTS.WILDCARD,\n                    name: name\n                }, requestListener = function addRequestListener(_ref6, listener) {\n                    var name = _ref6.name, win = _ref6.win, domain = _ref6.domain;\n                    if (!name || \"string\" != typeof name) throw new Error(\"Name required to add request listener\");\n                    if (Array.isArray(win)) {\n                        for (var listenersCollection = [], _i6 = 0, _win2 = win, _length6 = null == _win2 ? 0 : _win2.length; _i6 < _length6; _i6++) {\n                            var item = _win2[_i6];\n                            listenersCollection.push(addRequestListener({\n                                name: name,\n                                domain: domain,\n                                win: item\n                            }, listener));\n                        }\n                        return {\n                            cancel: function() {\n                                for (var _i8 = 0, _length8 = null == listenersCollection ? 0 : listenersCollection.length; _i8 < _length8; _i8++) listenersCollection[_i8].cancel();\n                            }\n                        };\n                    }\n                    if (Array.isArray(domain)) {\n                        for (var _listenersCollection = [], _i10 = 0, _domain2 = domain, _length10 = null == _domain2 ? 0 : _domain2.length; _i10 < _length10; _i10++) {\n                            var _item = _domain2[_i10];\n                            _listenersCollection.push(addRequestListener({\n                                name: name,\n                                win: win,\n                                domain: _item\n                            }, listener));\n                        }\n                        return {\n                            cancel: function() {\n                                for (var _i12 = 0, _length12 = null == _listenersCollection ? 0 : _listenersCollection.length; _i12 < _length12; _i12++) _listenersCollection[_i12].cancel();\n                            }\n                        };\n                    }\n                    var existingListener = getRequestListener({\n                        name: name,\n                        win: win,\n                        domain: domain\n                    });\n                    win && win !== constants_CONSTANTS.WILDCARD || (win = global.WINDOW_WILDCARD);\n                    domain = domain || constants_CONSTANTS.WILDCARD;\n                    if (existingListener) throw win && domain ? new Error(\"Request listener already exists for \" + name + \" on domain \" + domain.toString() + \" for \" + (win === global.WINDOW_WILDCARD ? \"wildcard\" : \"specified\") + \" window\") : win ? new Error(\"Request listener already exists for \" + name + \" for \" + (win === global.WINDOW_WILDCARD ? \"wildcard\" : \"specified\") + \" window\") : domain ? new Error(\"Request listener already exists for \" + name + \" on domain \" + domain.toString()) : new Error(\"Request listener already exists for \" + name);\n                    var requestListeners = global.requestListeners, nameListeners = requestListeners[name];\n                    if (!nameListeners) {\n                        nameListeners = new weakmap_CrossDomainSafeWeakMap();\n                        requestListeners[name] = nameListeners;\n                    }\n                    var winListeners = nameListeners.get(win);\n                    if (!winListeners) {\n                        winListeners = {};\n                        nameListeners.set(win, winListeners);\n                    }\n                    var strDomain = domain.toString(), regexListeners = winListeners[__DOMAIN_REGEX__], regexListener = void 0;\n                    if (isRegex(domain)) {\n                        if (!regexListeners) {\n                            regexListeners = [];\n                            winListeners[__DOMAIN_REGEX__] = regexListeners;\n                        }\n                        regexListener = {\n                            regex: domain,\n                            listener: listener\n                        };\n                        regexListeners.push(regexListener);\n                    } else winListeners[strDomain] = listener;\n                    return {\n                        cancel: function() {\n                            if (winListeners) {\n                                delete winListeners[strDomain];\n                                win && 0 === Object.keys(winListeners).length && nameListeners.delete(win);\n                                regexListener && regexListeners.splice(regexListeners.indexOf(regexListener, 1));\n                            }\n                        }\n                    };\n                }({\n                    name: name,\n                    win: win,\n                    domain: domain\n                }, listenerOptions);\n                if (options.once) {\n                    var _handler = listenerOptions.handler;\n                    listenerOptions.handler = once(function() {\n                        requestListener.cancel();\n                        return _handler.apply(this, arguments);\n                    });\n                }\n                if (listenerOptions.window && options.errorOnClose) var interval = function(method, time) {\n                    var timeout = void 0;\n                    timeout = setTimeout(function runInterval() {\n                        timeout = setTimeout(runInterval, 50);\n                        (function() {\n                            if (win && \"object\" === (void 0 === win ? \"undefined\" : server__typeof(win)) && Object(src.isWindowClosed)(win)) {\n                                interval.cancel();\n                                listenerOptions.handleError(new Error(\"Post message target window is closed\"));\n                            }\n                        }).call();\n                    }, 50);\n                    return {\n                        cancel: function() {\n                            clearTimeout(timeout);\n                        }\n                    };\n                }();\n                return {\n                    cancel: function() {\n                        requestListener.cancel();\n                    }\n                };\n            }\n            function _on(name, options, handler) {\n                if (\"function\" == typeof options) {\n                    handler = options;\n                    options = {};\n                }\n                (options = options || {}).name = name;\n                options.handler = handler || options.handler;\n                return listen(options);\n            }\n            function server_once(name) {\n                var options = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, handler = arguments[2];\n                if (\"function\" == typeof options) {\n                    handler = options;\n                    options = {};\n                }\n                options = options || {};\n                handler = handler || options.handler;\n                var errorHandler = options.errorHandler, promise = new promise_ZalgoPromise(function(resolve, reject) {\n                    (options = options || {}).name = name;\n                    options.once = !0;\n                    options.handler = function(event) {\n                        resolve(event);\n                        if (handler) return handler(event);\n                    };\n                    options.errorHandler = function(err) {\n                        reject(err);\n                        if (errorHandler) return errorHandler(err);\n                    };\n                }), onceListener = listen(options);\n                promise.cancel = onceListener.cancel;\n                return promise;\n            }\n            function server_listener() {\n                var options = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};\n                return {\n                    on: function(name, handler) {\n                        return _on(name, options, handler);\n                    }\n                };\n            }\n            global.on = _on;\n            function disable() {\n                delete window[constants_CONSTANTS.WINDOW_PROPS.POSTROBOT];\n                window.removeEventListener(\"message\", messageListener);\n            }\n            var public_parent = Object(src.getAncestor)();\n            function cleanUpWindow(win) {\n                var requestPromises = global.requestPromises.get(win);\n                if (requestPromises) for (var _i2 = 0, _length2 = null == requestPromises ? 0 : requestPromises.length; _i2 < _length2; _i2++) requestPromises[_i2].reject(new Error(\"No response from window - cleaned up\"));\n                global.popupWindowsByWin && global.popupWindowsByWin.delete(win);\n                global.remoteWindows && global.remoteWindows.delete(win);\n                global.requestPromises.delete(win);\n                global.methods.delete(win);\n                global.readyPromises.delete(win);\n            }\n            var bridge = null;\n            function init() {\n                if (!global.initialized) {\n                    handler = messageListener, (obj = window).addEventListener ? obj.addEventListener(\"message\", handler) : obj.attachEvent(\"onmessage\", handler);\n                    !function() {\n                        handler = function(_ref3) {\n                            var source = _ref3.source, origin = _ref3.origin, promise = global.readyPromises.get(source) || new promise_ZalgoPromise();\n                            promise.resolve({\n                                origin: origin\n                            });\n                            global.readyPromises.set(source, promise);\n                        }, global.on(constants_CONSTANTS.POST_MESSAGE_NAMES.HELLO, {\n                            domain: constants_CONSTANTS.WILDCARD\n                        }, function(_ref) {\n                            var source = _ref.source, origin = _ref.origin;\n                            return handler({\n                                source: source,\n                                origin: origin\n                            });\n                        });\n                        var handler, parent = Object(src.getAncestor)();\n                        parent && sayHello(parent).catch(util_noop);\n                    }();\n                    listenForMethods({\n                        on: _on,\n                        send: _send\n                    });\n                }\n                var obj, handler;\n                global.initialized = !0;\n            }\n            init();\n            __webpack_require__.d(__webpack_exports__, \"cleanUpWindow\", function() {\n                return cleanUpWindow;\n            });\n            __webpack_require__.d(__webpack_exports__, \"Promise\", function() {\n                return promise_ZalgoPromise;\n            });\n            __webpack_require__.d(__webpack_exports__, \"bridge\", function() {\n                return bridge;\n            });\n            __webpack_require__.d(__webpack_exports__, \"init\", function() {\n                return init;\n            });\n            __webpack_require__.d(__webpack_exports__, \"parent\", function() {\n                return public_parent;\n            });\n            __webpack_require__.d(__webpack_exports__, \"send\", function() {\n                return _send;\n            });\n            __webpack_require__.d(__webpack_exports__, \"request\", function() {\n                return request;\n            });\n            __webpack_require__.d(__webpack_exports__, \"sendToParent\", function() {\n                return sendToParent;\n            });\n            __webpack_require__.d(__webpack_exports__, \"client\", function() {\n                return client;\n            });\n            __webpack_require__.d(__webpack_exports__, \"on\", function() {\n                return _on;\n            });\n            __webpack_require__.d(__webpack_exports__, \"listen\", function() {\n                return listen;\n            });\n            __webpack_require__.d(__webpack_exports__, \"once\", function() {\n                return server_once;\n            });\n            __webpack_require__.d(__webpack_exports__, \"listener\", function() {\n                return server_listener;\n            });\n            __webpack_require__.d(__webpack_exports__, \"CONFIG\", function() {\n                return CONFIG;\n            });\n            __webpack_require__.d(__webpack_exports__, \"CONSTANTS\", function() {\n                return constants_CONSTANTS;\n            });\n            __webpack_require__.d(__webpack_exports__, \"disable\", function() {\n                return disable;\n            });\n            __webpack_exports__.default = src_interface_namespaceObject;\n        }\n    });\n});\n//# sourceMappingURL=post-robot.js.map\n//# sourceMappingURL=post-robot.js.map","import postRobot from \"post-robot\";\nimport Field from \"./field.js\";\nimport Window from \"./window.js\";\nimport Stack from \"./stack\";\nimport Entry from \"./entry.js\";\nimport EventEmitter from 'wolfy87-eventemitter';\n\nconst emitter = new EventEmitter();\n\n/** Class representing a extension from contentstack ui. */\n\nclass Extension {\n\n  constructor(initializationData) {\n    /**\n     * This method gives you the configuration parameters. Check out our [UI eEtension config documentation](https://www.contentstack.com/docs/apis/content-delivery-api/).\n     * @type {Object}\n     */\n\n    this.config = initializationData.data.config;\n    /**\n     * This object holds details of the current user. The details include roles assigned to users.\n     * @type {Object}\n     */\n    this.currentUser = initializationData.data.user;\n    /**\n     * type of extension, 'FIELD' || 'WIDGET'.\n     * @type {string}\n     */\n    this.type = initializationData.data.type || 'FIELD';\n    /**\n     * This gives you the entry object which allows you to interact with the current entry.\n     * @type {Entry}\n     */\n    this.entry = new Entry(initializationData, postRobot, emitter);\n    if (this.type === 'FIELD') {\n      initializationData.data.self = true\n      /**\n       * Gives you the extension field object which allows you to interact with the field.\n       * @type {Field}\n       */\n      this.field = new Field(initializationData, postRobot, emitter);\n    }\n\n    /**\n     * The window object provides users with methods that allow them to adjust the size of the iframe that contains the extension.\n     * @type {Window}\n     */\n    this.window = new Window(postRobot);\n\n    /**\n     * This method returns stack object which allows users to interact with the stack.\n     * @type {Stack}\n     */\n    this.stack = new Stack(initializationData.data.stack, postRobot);\n\n    postRobot.on('extensionEvent', function (event) {\n      if(event.data.name === 'entrySave'){\n        emitter.emitEvent('entrySave', [{data:event.data.data}]);\n        emitter.emitEvent('updateFields', [{data:event.data.data}]);\n      }\n    });\n  }\n\n  static initialize() {\n    return postRobot.sendToParent('init', {})\n  }\n\n  setReady() {\n    return postRobot.sendToParent('ready')\n  }\n  \n}\n\n\nexport default Extension;"," import Extension from \"./extension.js\";\n import postRobot from \"post-robot\";\n const version = \"1.1.1\"\n\n postRobot.CONFIG.LOG_LEVEL = 'error';\n\n /**Class to intialize the plugin on Contentstack ui. */\n\n class ContentstackUIExtension {\n\n   /**\n    * You need to first include Contentstack UI Extensions SDK and Contentstack UI Stylesheet in you HTML file and then call ContentstackUIExtension.init in the script tag.\n    * @example\n    * HTML\n    * <script src=\"https://sdklink\"></script>\n    * <link href=\"https://style sheet link\" rel=\"stylesheet\" >\n    * @example\n    * // javascript \n    * ContentstackUIExtension.init().then(function (extension) {\n    *     var value = extension.field.getData()\n    *     extension.field.setData(\"New Field Data\")\n    * })\n    * @return {Extension} An Extension object, will contain all the data recived from the Contentstack UI.\n    */\n   static init() {\n     if (this._extension)\n       return Promise.resolve(this._extension)\n     return Extension.initialize().then((initializationData) => {\n       this._extension = new Extension(initializationData)\n       return Promise.resolve(this._extension)\n     }).catch((e) => Promise.reject(e))\n   }\n\n\n   /**\n    * Version of Contentstack ui extension.\n    * @type {string}\n    */\n   static get SDK_VERSION() {\n     return version;\n   }\n }\n\n export default ContentstackUIExtension;","module.exports = require('./lib/index.js').default;\n"],"sourceRoot":""}