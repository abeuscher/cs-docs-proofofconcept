!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.ContentstackUIExtension=r():e.ContentstackUIExtension=r()}(window,function(){return function(e){var r={};function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=14)}([function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r.transform=function(e){return function(){switch(this._query[e]=this._query[e]||{},arguments.length){case 1:if(Array.isArray(arguments[0])||"string"==typeof arguments[0]){var r=this._query[e].BASE||[];return r=r.concat(arguments[0]),this._query[e].BASE=r,this}throw Error("Kindly provide valid parameters");case 2:if("string"!=typeof arguments[0]||!Array.isArray(arguments[1])&&"string"!=typeof arguments[1])throw Error("Kindly provide valid parameters");var t=this._query[e][arguments[0]]||[];return t=t.concat(arguments[1]),this._query[e][arguments[0]]=t,this;default:throw Error("Kindly provide valid parameters")}}},r.merge=function(e,r){if(e&&r)for(var t in r)e[t]=r[t];return e},r.mergeDeep=function(e,r){var t=this;return function e(r,n){for(var o in n)"object"==t._type(n[o])&&t._type(r[o])==t._type(n[o])?e(r[o],n[o]):"array"==t._type(n[o])&&t._type(r[o])==t._type(n[o])?r[o]=r[o].concat(n[o]):r[o]=n[o]}(e,r),e},r._type=function(e){var r=void 0===e?"undefined":n(e);switch(r){case"object":r,Array.isArray(e)&&(r="array");break;default:r}return r}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),o=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}(t(0));var i=function(){function e(r){return function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this._connection=r,this._query={},this.only=o.transform("only"),this.except=o.transform("except"),this}return n(e,[{key:"includeReference",value:function(e){if(Array.isArray(e))for(var r=0;r<e.length;r++)this._query.include=this._query.include||[],this._query.include=this._query.include.concat(e[r]);else{if("string"!=typeof e)throw Error("Argument should be a String or an Array.");for(var t=0;t<arguments.length;t++)this._query.include=this._query.include||[],this._query.include=this._query.include.concat(arguments[t])}return this}},{key:"language",value:function(e){if(e&&"string"==typeof e)return this._query.locale=e,this;throw Error("Argument should be a String.")}},{key:"addQuery",value:function(e,r){if(e&&r&&"string"==typeof e)return this._query[e]=r,this;throw Error("First argument should be a String.")}},{key:"includeSchema",value:function(){return this._query.include_schema=!0,this}},{key:"includeContentType",value:function(){return this._query.include_content_type=!0,this}},{key:"includeOwner",value:function(){return this._query.include_owner=!0,this}},{key:"addParam",value:function(e,r){if(e&&r&&"string"==typeof e&&"string"==typeof r)return this._query[e]=r,this;throw Error("Kindly provide valid parameters.")}},{key:"fetch",value:function(){if(this.entry_uid){var e={uid:this.entry_uid,content_type_uid:this.content_type_uid,params:this._query,action:"getEntry"};return this._connection.sendToParent("stackQuery",e).then(s).catch(a)}return Promise.reject("Kindly provide an entry uid. e.g. .Entry('bltsomething123')")}}]),e}();function s(e){return"string"==typeof e.data?Promise.reject(e.data):Promise.resolve(e.data)}function a(e){return Promise.reject(e)}r.default=i},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}();var o=function(){function e(r,t,n){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.uid=r.data.uid,this.data_type=r.data.schema.data_type,this.schema=r.data.schema,this._data=r.data.value,this._connection=t,this._self=r.data.self||!1;var o=this;n.on("updateFields",function(e){var r=o.uid.split("."),t=e.data;r.forEach(function(e){t&&(t=t[e])}),o._data!==t&&(o._data=t)})}return n(e,[{key:"setData",value:function(e){var r=this,t=this,n={data:e,uid:t.uid,self:t._self};return this._connection.sendToParent("setData",n).then(function(){return r._data=e,Promise.resolve(t)}).catch(function(e){return Promise.reject(e)})}},{key:"getData",value:function(){return this._data}},{key:"setFocus",value:function(){return this._connection.sendToParent("focus")}}]),e}();r.default=o},function(e,r,t){"use strict";e.exports=t(11),e.exports.default=e.exports},function(e,r,t){"use strict";var n,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(r){function i(){}var s=i.prototype,a=r.EventEmitter;function u(e,r){for(var t=e.length;t--;)if(e[t].listener===r)return t;return-1}function c(e){return function(){return this[e].apply(this,arguments)}}s.getListeners=function(e){var r,t,n=this._getEvents();if(e instanceof RegExp)for(t in r={},n)n.hasOwnProperty(t)&&e.test(t)&&(r[t]=n[t]);else r=n[e]||(n[e]=[]);return r},s.flattenListeners=function(e){var r,t=[];for(r=0;r<e.length;r+=1)t.push(e[r].listener);return t},s.getListenersAsObject=function(e){var r,t=this.getListeners(e);return t instanceof Array&&((r={})[e]=t),r||t},s.addListener=function(e,r){if(!function e(r){return"function"==typeof r||r instanceof RegExp||!(!r||"object"!==(void 0===r?"undefined":o(r)))&&e(r.listener)}(r))throw new TypeError("listener must be a function");var t,n=this.getListenersAsObject(e),i="object"===(void 0===r?"undefined":o(r));for(t in n)n.hasOwnProperty(t)&&-1===u(n[t],r)&&n[t].push(i?r:{listener:r,once:!1});return this},s.on=c("addListener"),s.addOnceListener=function(e,r){return this.addListener(e,{listener:r,once:!0})},s.once=c("addOnceListener"),s.defineEvent=function(e){return this.getListeners(e),this},s.defineEvents=function(e){for(var r=0;r<e.length;r+=1)this.defineEvent(e[r]);return this},s.removeListener=function(e,r){var t,n,o=this.getListenersAsObject(e);for(n in o)o.hasOwnProperty(n)&&-1!==(t=u(o[n],r))&&o[n].splice(t,1);return this},s.off=c("removeListener"),s.addListeners=function(e,r){return this.manipulateListeners(!1,e,r)},s.removeListeners=function(e,r){return this.manipulateListeners(!0,e,r)},s.manipulateListeners=function(e,r,t){var n,i,s=e?this.removeListener:this.addListener,a=e?this.removeListeners:this.addListeners;if("object"!==(void 0===r?"undefined":o(r))||r instanceof RegExp)for(n=t.length;n--;)s.call(this,r,t[n]);else for(n in r)r.hasOwnProperty(n)&&(i=r[n])&&("function"==typeof i?s.call(this,n,i):a.call(this,n,i));return this},s.removeEvent=function(e){var r,t=void 0===e?"undefined":o(e),n=this._getEvents();if("string"===t)delete n[e];else if(e instanceof RegExp)for(r in n)n.hasOwnProperty(r)&&e.test(r)&&delete n[r];else delete this._events;return this},s.removeAllListeners=c("removeEvent"),s.emitEvent=function(e,r){var t,n,o,i,s=this.getListenersAsObject(e);for(i in s)if(s.hasOwnProperty(i))for(t=s[i].slice(0),o=0;o<t.length;o++)!0===(n=t[o]).once&&this.removeListener(e,n.listener),n.listener.apply(this,r||[])===this._getOnceReturnValue()&&this.removeListener(e,n.listener);return this},s.trigger=c("emitEvent"),s.emit=function(e){var r=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,r)},s.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},s._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},s._getEvents=function(){return this._events||(this._events={})},i.noConflict=function(){return r.EventEmitter=a,i},void 0===(n=function(){return i}.call(r,t,r,e))||(e.exports=n)}({})},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),o=function(e){return e&&e.__esModule?e:{default:e}}(t(2));var i=function(){function e(r,t,n){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.content_type=r.data.content_type,this._data=r.data.entry,this.locale=r.data.locale,this._connection=t,this._emitter=n;var o=this;this._emitter.on("entrySave",function(e){o._data=e.data})}return n(e,[{key:"getData",value:function(){return this._data}},{key:"getField",value:function(e){var r=e.split("."),t=this._data,n=this.content_type.schema;try{var i=!1;r.forEach(function(e,o){if(i)i=!1;else{if(!(n=n.find(function(r){return r.uid===e})))throw Error("schema not found");t=t[e],"group"===n.data_type&&!1===n.multiple&&r.length!==o+1?n=n.schema:"group"===n.data_type&&!0===n.multiple&&r.length!==o+1&&(n=n.schema,t=t[r[o+1]],i=!0)}})}catch(e){throw Error("Invalid uid, Field not found")}var s={data:{uid:e,value:t,schema:n,data_type:n.data_type}};return new o.default(s,this._connection,this._emitter)}},{key:"onSave",value:function(e){if(!e||"function"!=typeof e)throw Error("Callback must be a function");this._emitter.on("entrySave",function(r){e(r.data)})}}]),e}();r.default=i},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}(t(0)),s=function(e){return e&&e.__esModule?e:{default:e}}(t(1));var a={compare:function(e){return function(r,t){if(r&&t&&"string"==typeof r&&void 0!==t)return this._query.query[r]=this._query.query.file_size||{},this._query.query[r][e]=t,this;throw Error("Kindly provide valid parameters.")}},contained:function(e){var r=e?"$in":"$nin";return function(e,t){if(e&&t&&"string"==typeof e&&Array.isArray(t))return this._query.query[e]=this._query.query[e]||{},this._query.query[e][r]=this._query.query[e][r]||[],this._query.query[e][r]=this._query.query[e][r].concat(t),this;throw Error("Kindly provide valid parameters.")}},exists:function(e){return function(r){if(r&&"string"==typeof r)return this._query.query[r]=this._query.query[r]||{},this._query.query[r].$exists=e,this;throw Error("Kindly provide valid parameters.")}},logical:function(e){return function(){for(var r=[],t=0,n=arguments.length;t<n;t++)arguments[t]instanceof u&&arguments[t]._query.query?r.push(arguments[t]._query.query):"object"===o(arguments[t])&&r.push(arguments[t]);return this._query.query[e]?this._query.query[e]=this._query.query[e].concat(r):this._query.query[e]=r,this}},sort:function(e){return function(r){if(r&&"string"==typeof r)return this._query[e]=r,this;throw Error("Argument should be a string.")}},pagination:function(e){return function(r){if("number"==typeof r)return this._query[e]=r,this;throw Error("Argument should be a number.")}}},u=function(e){function r(e){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return t._connection=e,t._query=t._query,t._query.query=t._query.query||{},t.lessThan=a.compare("$lt"),t.lessThanOrEqualTo=a.compare("$lte"),t.greaterThan=a.compare("$gt"),t.greaterThanOrEqualTo=a.compare("$gte"),t.notEqualTo=a.compare("$ne"),t.containedIn=a.contained(!0),t.notContainedIn=a.contained(!1),t.exists=a.exists(!0),t.notExists=a.exists(!1),t.ascending=a.sort("asc"),t.descending=a.sort("desc"),t.beforeUid=a.sort("before_uid"),t.afterUid=a.sort("after_uid"),t.skip=a.pagination("skip"),t.limit=a.pagination("limit"),t.or=a.logical("$or"),t.and=a.logical("$and"),t}return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}(r,s.default),n(r,[{key:"equalTo",value:function(e,r){if(e&&"string"==typeof e)return this._query.query[e]=r,this;throw Error("Kindly provide valid parameters.")}},{key:"where",value:function(e,r){if(e&&"string"==typeof e)return this._query.query[e]=r,this;throw Error("Kindly provide valid parameters.")}},{key:"count",value:function(){this._query.count=!0;var e={content_type_uid:this.content_type_uid,params:this._query};return e.action=this.type&&"asset"===this.type?"getAssets":"getEntries",this._connection.sendToParent("stackQuery",e).then(c).catch(l)}},{key:"query",value:function(e){if("object"===(void 0===e?"undefined":o(e)))return this._query.query=i.mergeDeep(this._query.query,e),this;throw Error("Kindly provide valid parameters")}},{key:"tags",value:function(e){if(Array.isArray(e))return this._query.tags=e,this;throw Error("Kindly provide valid parameters")}},{key:"includeCount",value:function(){return this._query.include_count=!0,this}},{key:"addParam",value:function(e,r){if(e&&r&&"string"==typeof e&&"string"==typeof r)return this._query[e]=r,this;throw Error("Kindly provide valid parameters.")}},{key:"getQuery",value:function(){return this._query.query}},{key:"regex",value:function(e,r,t){if(e&&r&&"string"==typeof e&&"string"==typeof r)return this._query.query[e]={$regex:r},t&&(this._query.query[e].$options=t),this;throw Error("Kindly provide valid parameters.")}},{key:"search",value:function(e){if(e&&"string"==typeof e)return this._query.typeahead=e,this;throw Error("Kindly provide valid parameters.")}},{key:"find",value:function(){var e={content_type_uid:this.content_type_uid,params:this._query};return e.action=this.type&&"asset"===this.type?"getAssets":"getEntries",this._connection.sendToParent("stackQuery",e).then(c).catch(l)}},{key:"findOne",value:function(){this.singleEntry=!0,this._query.limit=1;var e={content_type_uid:this.content_type_uid,params:this._query};return e.action=this.type&&"asset"===this.type?"getAssets":"getEntries",this._connection.sendToParent("stackQuery",e).then(c).catch(l)}}]),r}();function c(e){return"string"==typeof e.data?Promise.reject(e.data):Promise.resolve(e.data)}function l(e){return Promise.reject(e)}r.default=u},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),o=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}(t(0));var i=function(){function e(r){return function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this._connection=r,this._query={},this.only=o.transform("only"),this}return n(e,[{key:"addParam",value:function(e,r){if(e&&"string"==typeof e&&r&&"string"==typeof r)return this._query[e]=r,this;throw Error("Kindly provide valid parameters.")}},{key:"fetch",value:function(){var e={uid:this.asset_uid,params:this._query,action:"getAsset"};return this._connection.sendToParent("stackQuery",e).then(s).catch(a)}}]),e}();function s(e){return"string"==typeof e.data?Promise.reject(e.data):Promise.resolve(e.data)}function a(e){return Promise.reject(e)}r.default=i},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),o=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}(t(0)),i=u(t(1)),s=u(t(7)),a=u(t(6));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(r,t){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this._connection=t,this._data=r}return n(e,[{key:"getData",value:function(){return this._data}},{key:"ContentType",value:function(e){return e&&"string"==typeof e&&(this.content_type_uid=e,this.type="contentType"),this}},{key:"Entry",value:function(e){var r=new i.default(this._connection);return e&&"string"==typeof e&&(r.entry_uid=e),o.merge(r,this)}},{key:"Assets",value:function(e){if(this.type="asset",e&&"string"==typeof e){var r=new s.default;return r.asset_uid=e,o.merge(r,this)}return this}},{key:"Query",value:function(){var e=new a.default(this._connection);return o.merge(e,this)}},{key:"getContentType",value:function(e,r){if(!e)return Promise.reject("uid is required");var t={uid:e,params:r=r||{},action:"getContentType"};return this._connection.sendToParent("stackQuery",t).then(l).catch(f)}},{key:"getContentTypes",value:function(e,r){e=e||{},(r=r||{}).query=e;var t={params:r,action:"getContentTypes"};return this._connection.sendToParent("stackQuery",t).then(l).catch(f)}},{key:"getEnvironment",value:function(e,r){if(!e)return Promise.reject("name is required");var t={name:e,params:r=r||{},action:"getEnvironment"};return this._connection.sendToParent("stackQuery",t).then(l).catch(f)}},{key:"getEnvironments",value:function(e,r){e=e||{},(r=r||{}).query=e;var t={params:r,action:"getEnvironments"};return this._connection.sendToParent("stackQuery",t).then(l).catch(f)}},{key:"getLocale",value:function(e,r){if(!e)return Promise.reject("code is required");var t={code:e,params:r=r||{},action:"getLocale"};return this._connection.sendToParent("stackQuery",t).then(l).catch(f)}},{key:"getLocales",value:function(e,r){e=e||{},(r=r||{}).query=e;var t={params:r,action:"getLocales"};return this._connection.sendToParent("stackQuery",t).then(l).catch(f)}}]),e}();function l(e){return"string"==typeof e.data?Promise.reject(e.data):Promise.resolve(e.data)}function f(e){return Promise.reject(e)}r.default=c},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}();var o={attributes:!0,childList:!0,subtree:!0},i=void 0,s=function(){function e(r){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this._connection=r,this._height,this._autoResizingEnabled=!1}return n(e,[{key:"updateHeight",value:function(e){return e&&!isNaN(e)||(e=Math.ceil(document.documentElement.getBoundingClientRect().height)),this._height===e?Promise.resolve():(this._height=e,this._connection.sendToParent("resize",e))}},{key:"enableAutoResizing",value:function(){return this._autoResizingEnabled?this:(this._autoResizingEnabled=!0,(i=new MutationObserver(this.updateHeight.bind(this))).observe(window.document.body,o),this)}},{key:"disableAutoResizing",value:function(){return this._autoResizingEnabled?(this._autoResizingEnabled=!1,i.disconnect(),this):this}}]),e}();r.default=s},function(e,r,t){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,r,t){"use strict";(function(e){var t,n,o,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s,a){"object"==i(r)&&"object"==i(e)?e.exports=a():(n=[],void 0===(o="function"==typeof(t=a)?t.apply(r,n):t)||(e.exports=o))}("undefined"!=typeof self&&self,function(){return function(e){var r={};function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s="./src/index.js")}({"./node_modules/cross-domain-safe-weakmap/src/index.js":function(e,r,t){r.__esModule=!0;var n=t("./node_modules/cross-domain-safe-weakmap/src/interface.js");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}})});var o=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}(n);r.default=o},"./node_modules/cross-domain-safe-weakmap/src/interface.js":function(e,r,t){r.__esModule=!0;var n=t("./node_modules/cross-domain-safe-weakmap/src/weakmap.js");Object.defineProperty(r,"WeakMap",{enumerable:!0,get:function(){return n.CrossDomainSafeWeakMap}})},"./node_modules/cross-domain-safe-weakmap/src/native.js":function(e,r,t){r.__esModule=!0,r.hasNativeWeakMap=function(){if(!window.WeakMap)return!1;if(!window.Object.freeze)return!1;try{var e=new window.WeakMap,r={};return window.Object.freeze(r),e.set(r,"__testvalue__"),"__testvalue__"===e.get(r)}catch(e){return!1}}},"./node_modules/cross-domain-safe-weakmap/src/util.js":function(e,r,t){r.__esModule=!0,r.safeIndexOf=function(e,r){for(var t=0;t<e.length;t++)try{if(e[t]===r)return t}catch(e){}return-1},r.noop=function(){}},"./node_modules/cross-domain-safe-weakmap/src/weakmap.js":function(e,r,t){r.__esModule=!0,r.CrossDomainSafeWeakMap=void 0;var n=t("./node_modules/cross-domain-utils/src/index.js"),o=t("./node_modules/cross-domain-safe-weakmap/src/native.js"),i=t("./node_modules/cross-domain-safe-weakmap/src/util.js"),s=Object.defineProperty,a=Date.now()%1e9;r.CrossDomainSafeWeakMap=function(){function e(){if(function(r,t){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}(this),a+=1,this.name="__weakmap_"+(1e9*Math.random()>>>0)+"__"+a,(0,o.hasNativeWeakMap)())try{this.weakmap=new window.WeakMap}catch(e){}this.keys=[],this.values=[]}return e.prototype._cleanupClosedWindows=function(){for(var e=this.weakmap,r=this.keys,t=0;t<r.length;t++){var o=r[t];if((0,n.isWindow)(o)&&(0,n.isWindowClosed)(o)){if(e)try{e.delete(o)}catch(e){}r.splice(t,1),this.values.splice(t,1),t-=1}}},e.prototype.isSafeToReadWrite=function(e){if((0,n.isWindow)(e))return!1;try{(0,i.noop)(e&&e.self),(0,i.noop)(e&&e[this.name])}catch(e){return!1}return!0},e.prototype.set=function(e,r){if(!e)throw new Error("WeakMap expected key");var t=this.weakmap;if(t)try{t.set(e,r)}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e)){var n=this.name,o=e[n];o&&o[0]===e?o[1]=r:s(e,n,{value:[e,r],writable:!0})}else{this._cleanupClosedWindows();var a=this.keys,u=this.values,c=(0,i.safeIndexOf)(a,e);-1===c?(a.push(e),u.push(r)):u[c]=r}},e.prototype.get=function(e){if(!e)throw new Error("WeakMap expected key");var r=this.weakmap;if(r)try{if(r.has(e))return r.get(e)}catch(e){delete this.weakmap}if(!this.isSafeToReadWrite(e)){this._cleanupClosedWindows();var t=this.keys,n=(0,i.safeIndexOf)(t,e);if(-1===n)return;return this.values[n]}var o=e[this.name];if(o&&o[0]===e)return o[1]},e.prototype.delete=function(e){if(!e)throw new Error("WeakMap expected key");var r=this.weakmap;if(r)try{r.delete(e)}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e)){var t=e[this.name];t&&t[0]===e&&(t[0]=t[1]=void 0)}else{this._cleanupClosedWindows();var n=this.keys,o=(0,i.safeIndexOf)(n,e);-1!==o&&(n.splice(o,1),this.values.splice(o,1))}},e.prototype.has=function(e){if(!e)throw new Error("WeakMap expected key");var r=this.weakmap;if(r)try{return r.has(e)}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e)){var t=e[this.name];return!(!t||t[0]!==e)}return this._cleanupClosedWindows(),-1!==(0,i.safeIndexOf)(this.keys,e)},e}()},"./node_modules/cross-domain-utils/src/index.js":function(e,r,t){r.__esModule=!0;var n=t("./node_modules/cross-domain-utils/src/utils.js");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}})});var o=t("./node_modules/cross-domain-utils/src/types.js");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return o[e]}})})},"./node_modules/cross-domain-utils/src/types.js":function(e,r,t){},"./node_modules/cross-domain-utils/src/util.js":function(e,r,t){r.__esModule=!0,r.isRegex=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},r.noop=function(){}},"./node_modules/cross-domain-utils/src/utils.js":function(e,r,t){r.__esModule=!0,r.isFileProtocol=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:window).location.protocol===o.FILE_PROTOCOL},r.isAboutProtocol=s,r.getParent=a,r.getOpener=u,r.canReadFromWindow=c,r.getActualDomain=l,r.getDomain=f,r.isBlankDomain=function(e){try{if(!e.location.href)return!0;if("about:blank"===e.location.href)return!0}catch(e){}return!1},r.isActuallySameDomain=d,r.isSameDomain=h,r.getParents=y,r.isAncestorParent=p,r.getFrames=m,r.getAllChildFrames=_,r.getTop=v,r.getAllFramesInWindow=g,r.isTop=function(e){return e===v(e)},r.isFrameWindowClosed=w,r.isWindowClosed=S,r.linkFrameWindow=function(e){if(function(){for(var e=0;e<E.length;e++)w(E[e])&&(E.splice(e,1),b.splice(e,1));for(var r=0;r<b.length;r++)S(b[r])&&(E.splice(r,1),b.splice(r,1))}(),e&&e.contentWindow)try{b.push(e.contentWindow),E.push(e)}catch(e){}},r.getUserAgent=function(e){return(e=e||window).navigator.mockUserAgent||e.navigator.userAgent},r.getFrameByName=O,r.findChildFrameByName=T,r.findFrameByName=function(e,r){var t;return(t=O(e,r))?t:T(v(e)||e,r)},r.isParent=function(e,r){var t=a(r);if(t)return t===e;var n=m(e),o=Array.isArray(n),i=0;for(n=o?n:n[Symbol.iterator]();;){var s;if(o){if(i>=n.length)break;s=n[i++]}else{if((i=n.next()).done)break;s=i.value}if(s===r)return!0}return!1},r.isOpener=function(e,r){return e===u(r)},r.getAncestor=P,r.getAncestors=function(e){for(var r=[],t=e;t;)(t=P(t))&&r.push(t);return r},r.isAncestor=function(e,r){var t=P(r);if(t)return t===e;if(r===e)return!1;if(v(r)===r)return!1;var n=m(e),o=Array.isArray(n),i=0;for(n=o?n:n[Symbol.iterator]();;){var s;if(o){if(i>=n.length)break;s=n[i++]}else{if((i=n.next()).done)break;s=i.value}if(s===r)return!0}return!1},r.isPopup=A,r.isIframe=j,r.isFullpage=function(){return Boolean(!j()&&!A())},r.getDistanceFromTop=C,r.getNthParent=M,r.getNthParentFromTop=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return M(e,C(e)-r)},r.isSameTopWindow=function(e,r){var t=v(e)||e,n=v(r)||r;try{if(t&&n)return t===n}catch(e){}var o=g(e),i=g(r);if(N(o,i))return!0;var s=u(t),a=u(n);return(!s||!N(g(s),i))&&(a&&N(g(a),o),!1)},r.matchDomain=function e(r,t){if("string"==typeof r){if("string"==typeof t)return r===o.WILDCARD||t===r;if((0,n.isRegex)(t))return!1;if(Array.isArray(t))return!1}return(0,n.isRegex)(r)?(0,n.isRegex)(t)?r.toString()===t.toString():!Array.isArray(t)&&Boolean(t.match(r)):!!Array.isArray(r)&&(Array.isArray(t)?JSON.stringify(r)===JSON.stringify(t):!(0,n.isRegex)(t)&&r.some(function(r){return e(r,t)}))},r.stringifyDomainPattern=function(e){return Array.isArray(e)?"("+e.join(" | ")+")":(0,n.isRegex)(e)?"RegExp("+e.toString():e.toString()},r.getDomainFromUrl=function(e){return e.match(/^(https?|mock|file):\/\//)?e.split("/").slice(0,3).join("/"):f()},r.onCloseWindow=function(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,o=void 0;return function i(){if(S(e))return o&&clearTimeout(o),r();n<=0?clearTimeout(o):(n-=t,o=setTimeout(i,t))}(),{cancel:function(){o&&clearTimeout(o)}}},r.isWindow=function(e){try{if(e===window)return!0}catch(e){if(e&&e.message===i)return!0}try{if("[object Window]"===Object.prototype.toString.call(e))return!0}catch(e){if(e&&e.message===i)return!0}try{if(window.Window&&e instanceof window.Window)return!0}catch(e){if(e&&e.message===i)return!0}try{if(e&&e.self===e)return!0}catch(e){if(e&&e.message===i)return!0}try{if(e&&e.parent===e)return!0}catch(e){if(e&&e.message===i)return!0}try{if(e&&e.top===e)return!0}catch(e){if(e&&e.message===i)return!0}try{(0,n.noop)(e==e)}catch(e){return!0}try{(0,n.noop)(e&&e.__cross_domain_utils_window_check__)}catch(e){return!0}return!1};var n=t("./node_modules/cross-domain-utils/src/util.js"),o={MOCK_PROTOCOL:"mock:",FILE_PROTOCOL:"file:",ABOUT_PROTOCOL:"about:",WILDCARD:"*"},i="Call was rejected by callee.\r\n";function s(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:window).location.protocol===o.ABOUT_PROTOCOL}function a(e){if(e)try{if(e.parent&&e.parent!==e)return e.parent}catch(e){}}function u(e){if(e&&!a(e))try{return e.opener}catch(e){}}function c(e){try{return(0,n.noop)(e&&e.location&&e.location.href),!0}catch(e){}return!1}function l(e){var r=e.location;if(!r)throw new Error("Can not read window location");var t=r.protocol;if(!t)throw new Error("Can not read window protocol");if(t===o.FILE_PROTOCOL)return o.FILE_PROTOCOL+"//";if(t===o.ABOUT_PROTOCOL){var n=a(e);return n&&c(n)?l(n):o.ABOUT_PROTOCOL+"//"}var i=r.host;if(!i)throw new Error("Can not read window host");return t+"//"+i}function f(e){var r=l(e=e||window);return r&&e.mockDomain&&0===e.mockDomain.indexOf(o.MOCK_PROTOCOL)?e.mockDomain:r}function d(e){try{if(e===window)return!0}catch(e){}try{var r=Object.getOwnPropertyDescriptor(e,"location");if(r&&!1===r.enumerable)return!1}catch(e){}try{if(s(e)&&c(e))return!0}catch(e){}try{if(l(e)===l(window))return!0}catch(e){}return!1}function h(e){if(!d(e))return!1;try{if(e===window)return!0;if(s(e)&&c(e))return!0;if(f(window)===f(e))return!0}catch(e){}return!1}function y(e){var r=[];try{for(;e.parent!==e;)r.push(e.parent),e=e.parent}catch(e){}return r}function p(e,r){if(!e||!r)return!1;var t=a(r);return t?t===e:-1!==y(r).indexOf(e)}function m(e){var r=[],t=void 0;try{t=e.frames}catch(r){t=e}var n=void 0;try{n=t.length}catch(e){}if(0===n)return r;if(n){for(var o=0;o<n;o++){var i=void 0;try{i=t[o]}catch(e){continue}r.push(i)}return r}for(var s=0;s<100;s++){var a=void 0;try{a=t[s]}catch(e){return r}if(!a)return r;r.push(a)}return r}function _(e){var r=[],t=m(e),n=Array.isArray(t),o=0;for(t=n?t:t[Symbol.iterator]();;){var i;if(n){if(o>=t.length)break;i=t[o++]}else{if((o=t.next()).done)break;i=o.value}var s=i;r.push(s);var a=_(s),u=Array.isArray(a),c=0;for(a=u?a:a[Symbol.iterator]();;){var l;if(u){if(c>=a.length)break;l=a[c++]}else{if((c=a.next()).done)break;l=c.value}var f=l;r.push(f)}}return r}function v(e){if(e){try{if(e.top)return e.top}catch(e){}if(a(e)===e)return e;try{if(p(window,e)&&window.top)return window.top}catch(e){}try{if(p(e,window)&&window.top)return window.top}catch(e){}var r=_(e),t=Array.isArray(r),n=0;for(r=t?r:r[Symbol.iterator]();;){var o;if(t){if(n>=r.length)break;o=r[n++]}else{if((n=r.next()).done)break;o=n.value}var i=o;try{if(i.top)return i.top}catch(e){}if(a(i)===i)return i}}}function g(e){var r=v(e);return _(r).concat(r)}function w(e){if(!e.contentWindow)return!0;if(!e.parentNode)return!0;var r=e.ownerDocument;return!(!r||!r.body||r.body.contains(e))}var b=[],E=[];function S(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{if(e===window)return!1}catch(e){return!0}try{if(!e)return!0}catch(e){return!0}try{if(e.closed)return!0}catch(e){return!e||e.message!==i}if(r&&h(e))try{if(e.mockclosed)return!0}catch(e){}try{if(!e.parent||!e.top)return!0}catch(e){}try{(0,n.noop)(e==e)}catch(e){return!0}var t=function(e,r){for(var t=0;t<e.length;t++)try{if(e[t]===r)return t}catch(e){}return-1}(b,e);if(-1!==t){var o=E[t];if(o&&w(o))return!0}return!1}function O(e,r){var t=m(e),n=t,o=Array.isArray(n),i=0;for(n=o?n:n[Symbol.iterator]();;){var s;if(o){if(i>=n.length)break;s=n[i++]}else{if((i=n.next()).done)break;s=i.value}var a=s;try{if(h(a)&&a.name===r&&-1!==t.indexOf(a))return a}catch(e){}}try{if(-1!==t.indexOf(e.frames[r]))return e.frames[r]}catch(e){}try{if(-1!==t.indexOf(e[r]))return e[r]}catch(e){}}function T(e,r){var t=O(e,r);if(t)return t;var n=m(e),o=Array.isArray(n),i=0;for(n=o?n:n[Symbol.iterator]();;){var s;if(o){if(i>=n.length)break;s=n[i++]}else{if((i=n.next()).done)break;s=i.value}var a=T(s,r);if(a)return a}}function P(e){var r=u(e=e||window);return r||(a(e)||void 0)}function A(){return Boolean(u(window))}function j(){return Boolean(a(window))}function N(e,r){var t=e,n=Array.isArray(t),o=0;for(t=n?t:t[Symbol.iterator]();;){var i;if(n){if(o>=t.length)break;i=t[o++]}else{if((o=t.next()).done)break;i=o.value}var s=i,a=r,u=Array.isArray(a),c=0;for(a=u?a:a[Symbol.iterator]();;){var l;if(u){if(c>=a.length)break;l=a[c++]}else{if((c=a.next()).done)break;l=c.value}if(s===l)return!0}}return!1}function C(){for(var e=0,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;r;)(r=a(r))&&(e+=1);return e}function M(e){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=e,n=0;n<r;n++){if(!t)return;t=a(t)}return t}},"./node_modules/webpack/buildin/global.js":function(e,r,t){var n,o="function"==typeof Symbol&&"symbol"==i(Symbol.iterator)?function(e){return void 0===e?"undefined":i(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":i(e)};n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":o(window))&&(n=window)}e.exports=n},"./node_modules/zalgo-promise/src/exceptions.js":function(e,r,t){r.__esModule=!0,r.dispatchPossiblyUnhandledError=function(e){if(-1===(0,n.getGlobal)().dispatchedErrors.indexOf(e)){(0,n.getGlobal)().dispatchedErrors.push(e),setTimeout(function(){throw e},1);for(var r=0;r<(0,n.getGlobal)().possiblyUnhandledPromiseHandlers.length;r++)(0,n.getGlobal)().possiblyUnhandledPromiseHandlers[r](e)}},r.onPossiblyUnhandledException=function(e){return(0,n.getGlobal)().possiblyUnhandledPromiseHandlers.push(e),{cancel:function(){(0,n.getGlobal)().possiblyUnhandledPromiseHandlers.splice((0,n.getGlobal)().possiblyUnhandledPromiseHandlers.indexOf(e),1)}}};var n=t("./node_modules/zalgo-promise/src/global.js")},"./node_modules/zalgo-promise/src/global.js":function(e,r,t){(function(e){r.__esModule=!0,r.getGlobal=function(){var r=void 0;if("undefined"!=typeof window)r=window;else{if(void 0===e)throw new TypeError("Can not find global");r=e}var t=r.__zalgopromise__=r.__zalgopromise__||{};return t.flushPromises=t.flushPromises||[],t.activeCount=t.activeCount||0,t.possiblyUnhandledPromiseHandlers=t.possiblyUnhandledPromiseHandlers||[],t.dispatchedErrors=t.dispatchedErrors||[],t}}).call(r,t("./node_modules/webpack/buildin/global.js"))},"./node_modules/zalgo-promise/src/index.js":function(e,r,t){r.__esModule=!0;var n=t("./node_modules/zalgo-promise/src/promise.js");Object.defineProperty(r,"ZalgoPromise",{enumerable:!0,get:function(){return n.ZalgoPromise}})},"./node_modules/zalgo-promise/src/promise.js":function(e,r,t){r.__esModule=!0,r.ZalgoPromise=void 0;var n=t("./node_modules/zalgo-promise/src/utils.js"),o=t("./node_modules/zalgo-promise/src/exceptions.js"),i=t("./node_modules/zalgo-promise/src/global.js"),s=function(){function e(r){var t=this;if(function(r,t){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.resolved=!1,this.rejected=!1,this.errorHandled=!1,this.handlers=[],r){var n=void 0,o=void 0,i=!1,s=!1,a=!1;try{r(function(e){a?t.resolve(e):(i=!0,n=e)},function(e){a?t.reject(e):(s=!0,o=e)})}catch(e){return void this.reject(e)}a=!0,i?this.resolve(n):s&&this.reject(o)}}return e.prototype.resolve=function(e){if(this.resolved||this.rejected)return this;if((0,n.isPromise)(e))throw new Error("Can not resolve promise with another promise");return this.resolved=!0,this.value=e,this.dispatch(),this},e.prototype.reject=function(e){var r=this;if(this.resolved||this.rejected)return this;if((0,n.isPromise)(e))throw new Error("Can not reject promise with another promise");if(!e){var t=e&&"function"==typeof e.toString?e.toString():Object.prototype.toString.call(e);e=new Error("Expected reject to be called with Error, got "+t)}return this.rejected=!0,this.error=e,this.errorHandled||setTimeout(function(){r.errorHandled||(0,o.dispatchPossiblyUnhandledError)(e)},1),this.dispatch(),this},e.prototype.asyncReject=function(e){this.errorHandled=!0,this.reject(e)},e.prototype.dispatch=function(){var r=this,t=this.dispatching,o=this.resolved,s=this.rejected,a=this.handlers;if(!t&&(o||s)){this.dispatching=!0,(0,i.getGlobal)().activeCount+=1;for(var u=function(t){var i=a[t],u=i.onSuccess,c=i.onError,l=i.promise,f=void 0;if(o)try{f=u?u(r.value):r.value}catch(e){return l.reject(e),"continue"}else if(s){if(!c)return l.reject(r.error),"continue";try{f=c(r.error)}catch(e){return l.reject(e),"continue"}}f instanceof e&&(f.resolved||f.rejected)?(f.resolved?l.resolve(f.value):l.reject(f.error),f.errorHandled=!0):(0,n.isPromise)(f)?f instanceof e&&(f.resolved||f.rejected)?f.resolved?l.resolve(f.value):l.reject(f.error):f.then(function(e){l.resolve(e)},function(e){l.reject(e)}):l.resolve(f)},c=0;c<a.length;c++)u(c);a.length=0,this.dispatching=!1,(0,i.getGlobal)().activeCount-=1,0===(0,i.getGlobal)().activeCount&&e.flushQueue()}},e.prototype.then=function(r,t){if(r&&"function"!=typeof r&&!r.call)throw new Error("Promise.then expected a function for success handler");if(t&&"function"!=typeof t&&!t.call)throw new Error("Promise.then expected a function for error handler");var n=new e;return this.handlers.push({promise:n,onSuccess:r,onError:t}),this.errorHandled=!0,this.dispatch(),n},e.prototype.catch=function(e){return this.then(void 0,e)},e.prototype.finally=function(r){return this.then(function(t){return e.try(r).then(function(){return t})},function(t){return e.try(r).then(function(){throw t})})},e.prototype.timeout=function(e,r){var t=this;if(this.resolved||this.rejected)return this;var n=setTimeout(function(){t.resolved||t.rejected||t.reject(r||new Error("Promise timed out after "+e+"ms"))},e);return this.then(function(e){return clearTimeout(n),e})},e.prototype.toPromise=function(){if("undefined"==typeof Promise)throw new TypeError("Could not find Promise");return Promise.resolve(this)},e.resolve=function(r){return r instanceof e?r:(0,n.isPromise)(r)?new e(function(e,t){return r.then(e,t)}):(new e).resolve(r)},e.reject=function(r){return(new e).reject(r)},e.all=function(r){var t=new e,o=r.length,i=[];if(!o)return t.resolve(i),t;for(var s=function(s){var a=r[s];if(a instanceof e){if(a.resolved)return i[s]=a.value,o-=1,"continue"}else if(!(0,n.isPromise)(a))return i[s]=a,o-=1,"continue";e.resolve(a).then(function(e){i[s]=e,0==(o-=1)&&t.resolve(i)},function(e){t.reject(e)})},a=0;a<r.length;a++)s(a);return 0===o&&t.resolve(i),t},e.hash=function(r){var t={};return e.all(Object.keys(r).map(function(n){return e.resolve(r[n]).then(function(e){t[n]=e})})).then(function(){return t})},e.map=function(r,t){return e.all(r.map(t))},e.onPossiblyUnhandledException=function(e){return(0,o.onPossiblyUnhandledException)(e)},e.try=function(r,t,n){var o=void 0;try{o=r.apply(t,n||[])}catch(r){return e.reject(r)}return e.resolve(o)},e.delay=function(r){return new e(function(e){setTimeout(e,r)})},e.isPromise=function(r){return!!(r&&r instanceof e)||(0,n.isPromise)(r)},e.flush=function(){var r=new e;return(0,i.getGlobal)().flushPromises.push(r),0===(0,i.getGlobal)().activeCount&&e.flushQueue(),r},e.flushQueue=function(){var e=(0,i.getGlobal)().flushPromises;(0,i.getGlobal)().flushPromises=[];var r=e,t=Array.isArray(r),n=0;for(r=t?r:r[Symbol.iterator]();;){var o;if(t){if(n>=r.length)break;o=r[n++]}else{if((n=r.next()).done)break;o=n.value}o.resolve()}},e}();r.ZalgoPromise=s},"./node_modules/zalgo-promise/src/utils.js":function(e,r,t){r.__esModule=!0,r.isPromise=function(e){try{if(!e)return!1;if("undefined"!=typeof Promise&&e instanceof Promise)return!0;if("undefined"!=typeof window&&window.Window&&e instanceof window.Window)return!1;if("undefined"!=typeof window&&window.constructor&&e instanceof window.constructor)return!1;var r={}.toString;if(r){var t=r.call(e);if("[object Window]"===t||"[object global]"===t||"[object DOMWindow]"===t)return!1}if("function"==typeof e.then)return!0}catch(e){return!1}return!1}},"./src/clean.js":function(e,r,t){r.__esModule=!0,r.cleanUpWindow=function(e){var r=n.global.requestPromises.get(e);if(r){var t=r,o=Array.isArray(t),i=0;for(t=o?t:t[Symbol.iterator]();;){var s;if(o){if(i>=t.length)break;s=t[i++]}else{if((i=t.next()).done)break;s=i.value}s.reject(new Error("No response from window - cleaned up"))}}n.global.popupWindowsByWin&&n.global.popupWindowsByWin.delete(e),n.global.remoteWindows&&n.global.remoteWindows.delete(e),n.global.requestPromises.delete(e),n.global.methods.delete(e),n.global.readyPromises.delete(e)},t("./node_modules/cross-domain-utils/src/index.js");var n=t("./src/global.js")},"./src/conf/config.js":function(e,r,t){r.__esModule=!0,r.CONFIG=void 0;var n,o=t("./src/conf/constants.js"),i=r.CONFIG={ALLOW_POSTMESSAGE_POPUP:!("__ALLOW_POSTMESSAGE_POPUP__"in window)||window.__ALLOW_POSTMESSAGE_POPUP__,LOG_LEVEL:"info",BRIDGE_TIMEOUT:5e3,CHILD_WINDOW_TIMEOUT:5e3,ACK_TIMEOUT:-1!==window.navigator.userAgent.match(/MSIE/i)?2e3:1e3,RES_TIMEOUT:-1,LOG_TO_PAGE:!1,ALLOWED_POST_MESSAGE_METHODS:(n={},n[o.CONSTANTS.SEND_STRATEGIES.POST_MESSAGE]=!0,n[o.CONSTANTS.SEND_STRATEGIES.BRIDGE]=!0,n[o.CONSTANTS.SEND_STRATEGIES.GLOBAL]=!0,n),ALLOW_SAME_ORIGIN:!1};0===window.location.href.indexOf(o.CONSTANTS.FILE_PROTOCOL)&&(i.ALLOW_POSTMESSAGE_POPUP=!0)},"./src/conf/constants.js":function(e,r,t){r.__esModule=!0,r.CONSTANTS={POST_MESSAGE_TYPE:{REQUEST:"postrobot_message_request",RESPONSE:"postrobot_message_response",ACK:"postrobot_message_ack"},POST_MESSAGE_ACK:{SUCCESS:"success",ERROR:"error"},POST_MESSAGE_NAMES:{METHOD:"postrobot_method",HELLO:"postrobot_ready",OPEN_TUNNEL:"postrobot_open_tunnel"},WINDOW_TYPES:{FULLPAGE:"fullpage",POPUP:"popup",IFRAME:"iframe"},WINDOW_PROPS:{POSTROBOT:"__postRobot__"},SERIALIZATION_TYPES:{METHOD:"postrobot_method",ERROR:"postrobot_error",PROMISE:"postrobot_promise",ZALGO_PROMISE:"postrobot_zalgo_promise",REGEX:"regex"},SEND_STRATEGIES:{POST_MESSAGE:"postrobot_post_message",BRIDGE:"postrobot_bridge",GLOBAL:"postrobot_global"},MOCK_PROTOCOL:"mock:",FILE_PROTOCOL:"file:",ABOUT_PROTOCOL:"about:",BRIDGE_NAME_PREFIX:"__postrobot_bridge__",POSTROBOT_PROXY:"__postrobot_proxy__",WILDCARD:"*"};var n=r.POST_MESSAGE_NAMES={METHOD:"postrobot_method",HELLO:"postrobot_hello",OPEN_TUNNEL:"postrobot_open_tunnel"};r.POST_MESSAGE_NAMES_LIST=Object.keys(n).map(function(e){return n[e]})},"./src/conf/index.js":function(e,r,t){r.__esModule=!0;var n=t("./src/conf/config.js");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}})});var o=t("./src/conf/constants.js");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return o[e]}})})},"./src/drivers/index.js":function(e,r,t){r.__esModule=!0;var n=t("./src/drivers/receive/index.js");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}})});var o=t("./src/drivers/send/index.js");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return o[e]}})});var i=t("./src/drivers/listeners.js");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return i[e]}})})},"./src/drivers/listeners.js":function(e,r,t){r.__esModule=!0,r.resetListeners=function(){i.global.responseListeners={},i.global.requestListeners={}},r.addResponseListener=function(e,r){i.global.responseListeners[e]=r},r.getResponseListener=function(e){return i.global.responseListeners[e]},r.deleteResponseListener=function(e){delete i.global.responseListeners[e]},r.markResponseListenerErrored=function(e){i.global.erroredResponseListeners[e]=!0},r.isResponseListenerErrored=function(e){return Boolean(i.global.erroredResponseListeners[e])},r.getRequestListener=c,r.addRequestListener=function e(r,t){var o=r.name,l=r.win,f=r.domain;if(!o||"string"!=typeof o)throw new Error("Name required to add request listener");if(Array.isArray(l)){var d=[],h=l,y=Array.isArray(h),p=0;for(h=y?h:h[Symbol.iterator]();;){var m;if(y){if(p>=h.length)break;m=h[p++]}else{if((p=h.next()).done)break;m=p.value}var _=m;d.push(e({name:o,domain:f,win:_},t))}return{cancel:function(){var e=d,r=Array.isArray(e),t=0;for(e=r?e:e[Symbol.iterator]();;){var n;if(r){if(t>=e.length)break;n=e[t++]}else{if((t=e.next()).done)break;n=t.value}n.cancel()}}}}if(Array.isArray(f)){var v=[],g=f,w=Array.isArray(g),b=0;for(g=w?g:g[Symbol.iterator]();;){var E;if(w){if(b>=g.length)break;E=g[b++]}else{if((b=g.next()).done)break;E=b.value}var S=E;v.push(e({name:o,win:l,domain:S},t))}return{cancel:function(){var e=v,r=Array.isArray(e),t=0;for(e=r?e:e[Symbol.iterator]();;){var n;if(r){if(t>=e.length)break;n=e[t++]}else{if((t=e.next()).done)break;n=t.value}n.cancel()}}}}var O=c({name:o,win:l,domain:f});if(l&&l!==a.CONSTANTS.WILDCARD||(l=i.global.WINDOW_WILDCARD),f=f||a.CONSTANTS.WILDCARD,O)throw l&&f?new Error("Request listener already exists for "+o+" on domain "+f.toString()+" for "+(l===i.global.WINDOW_WILDCARD?"wildcard":"specified")+" window"):l?new Error("Request listener already exists for "+o+" for "+(l===i.global.WINDOW_WILDCARD?"wildcard":"specified")+" window"):f?new Error("Request listener already exists for "+o+" on domain "+f.toString()):new Error("Request listener already exists for "+o);var T=i.global.requestListeners,P=T[o];P||(P=new n.WeakMap,T[o]=P);var A=P.get(l);A||(A={},P.set(l,A));var j=f.toString(),N=A[u],C=void 0;return(0,s.isRegex)(f)?(N||(N=[],A[u]=N),C={regex:f,listener:t},N.push(C)):A[j]=t,{cancel:function(){A&&(delete A[j],l&&0===Object.keys(A).length&&P.delete(l),C&&N.splice(N.indexOf(C,1)))}}},t("./node_modules/zalgo-promise/src/index.js");var n=t("./node_modules/cross-domain-safe-weakmap/src/index.js"),o=t("./node_modules/cross-domain-utils/src/index.js"),i=t("./src/global.js"),s=t("./src/lib/index.js"),a=t("./src/conf/index.js");i.global.responseListeners=i.global.responseListeners||{},i.global.requestListeners=i.global.requestListeners||{},i.global.WINDOW_WILDCARD=i.global.WINDOW_WILDCARD||new function(){},i.global.erroredResponseListeners=i.global.erroredResponseListeners||{};var u="__domain_regex__";function c(e){var r=e.name,t=e.win,n=e.domain;if(t===a.CONSTANTS.WILDCARD&&(t=null),n===a.CONSTANTS.WILDCARD&&(n=null),!r)throw new Error("Name required to get request listener");var s=i.global.requestListeners[r];if(s)for(var c=[t,i.global.WINDOW_WILDCARD],l=0;l<c.length;l++){var f=c[l],d=f&&s.get(f);if(d){if(n&&"string"==typeof n){if(d[n])return d[n];if(d[u]){var h=d[u],y=Array.isArray(h),p=0;for(h=y?h:h[Symbol.iterator]();;){var m;if(y){if(p>=h.length)break;m=h[p++]}else{if((p=h.next()).done)break;m=p.value}var _=m,v=_.regex,g=_.listener;if((0,o.matchDomain)(v,n))return g}}}if(d[a.CONSTANTS.WILDCARD])return d[a.CONSTANTS.WILDCARD]}}}},"./src/drivers/receive/index.js":function(e,r,t){r.__esModule=!0;var n="function"==typeof Symbol&&"symbol"==i(Symbol.iterator)?function(e){return void 0===e?"undefined":i(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":i(e)};r.receiveMessage=l,r.messageListener=f,r.listenForMessages=function(){(0,a.addEventListener)(window,"message",f)};var o=t("./node_modules/cross-domain-utils/src/index.js"),s=t("./src/conf/index.js"),a=t("./src/lib/index.js"),u=t("./src/global.js"),c=t("./src/drivers/receive/types.js");function l(e){if(!window||window.closed)throw new Error("Message recieved in closed window");try{if(!e.source)return}catch(e){return}var r=e.source,t=e.origin,i=function(e){var r=void 0;try{r=(0,a.jsonParse)(e)}catch(e){return}if(r&&"object"===(void 0===r?"undefined":n(r))&&null!==r&&(r=r[s.CONSTANTS.WINDOW_PROPS.POSTROBOT])&&"object"===(void 0===r?"undefined":n(r))&&null!==r&&r.type&&"string"==typeof r.type&&c.RECEIVE_MESSAGE_TYPES[r.type])return r}(e.data);if(i){if(!i.sourceDomain||"string"!=typeof i.sourceDomain)throw new Error("Expected message to have sourceDomain");if(0!==i.sourceDomain.indexOf(s.CONSTANTS.MOCK_PROTOCOL)&&0!==i.sourceDomain.indexOf(s.CONSTANTS.FILE_PROTOCOL)||(t=i.sourceDomain),0===i.sourceDomain.indexOf(s.CONSTANTS.ABOUT_PROTOCOL)&&(t="*"),-1===u.global.receivedMessages.indexOf(i.id)){u.global.receivedMessages.push(i.id);var l;l=-1!==s.POST_MESSAGE_NAMES_LIST.indexOf(i.name)||i.type===s.CONSTANTS.POST_MESSAGE_TYPE.ACK?"debug":"error"===i.ack?"error":"info",a.log.logLevel(l,["\n\n\t","#receive",i.type.replace(/^postrobot_message_/,""),"::",i.name,"::",t,"\n\n",i]),!(0,o.isWindowClosed)(r)||i.fireAndForget?(i.data&&(i.data=(0,a.deserializeMethods)(r,t,i.data)),c.RECEIVE_MESSAGE_TYPES[i.type](r,t,i)):a.log.debug("Source window is closed - can not send "+i.type+" "+i.name)}}}function f(e){try{(0,a.noop)(e.source)}catch(e){return}l({source:e.source||e.sourceElement,origin:e.origin||e.originalEvent&&e.originalEvent.origin,data:e.data})}u.global.receivedMessages=u.global.receivedMessages||[],u.global.receiveMessage=l},"./src/drivers/receive/types.js":function(e,r,t){r.__esModule=!0,r.RECEIVE_MESSAGE_TYPES=void 0;var n,o=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},i=t("./node_modules/zalgo-promise/src/index.js"),s=t("./node_modules/cross-domain-utils/src/index.js"),a=t("./src/conf/index.js"),u=t("./src/lib/index.js"),c=t("./src/drivers/send/index.js"),l=t("./src/drivers/listeners.js");r.RECEIVE_MESSAGE_TYPES=((n={})[a.CONSTANTS.POST_MESSAGE_TYPE.ACK]=function(e,r,t){if(!(0,l.isResponseListenerErrored)(t.hash)){var n=(0,l.getResponseListener)(t.hash);if(!n)throw new Error("No handler found for post message ack for message: "+t.name+" from "+r+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!(0,s.matchDomain)(n.domain,r))throw new Error("Ack origin "+r+" does not match domain "+n.domain.toString());n.ack=!0}},n[a.CONSTANTS.POST_MESSAGE_TYPE.REQUEST]=function(e,r,t){var n=(0,l.getRequestListener)({name:t.name,win:e,domain:r});function f(n){return t.fireAndForget||(0,s.isWindowClosed)(e)?i.ZalgoPromise.resolve():(0,c.sendMessage)(e,o({target:t.originalSource,hash:t.hash,name:t.name},n),r)}return i.ZalgoPromise.all([f({type:a.CONSTANTS.POST_MESSAGE_TYPE.ACK}),i.ZalgoPromise.try(function(){if(!n)throw new Error("No handler found for post message: "+t.name+" from "+r+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!(0,s.matchDomain)(n.domain,r))throw new Error("Request origin "+r+" does not match domain "+n.domain.toString());var o=t.data;return n.handler({source:e,origin:r,data:o})}).then(function(e){return f({type:a.CONSTANTS.POST_MESSAGE_TYPE.RESPONSE,ack:a.CONSTANTS.POST_MESSAGE_ACK.SUCCESS,data:e})},function(e){var r=(0,u.stringifyError)(e).replace(/^Error: /,""),t=e.code;return f({type:a.CONSTANTS.POST_MESSAGE_TYPE.RESPONSE,ack:a.CONSTANTS.POST_MESSAGE_ACK.ERROR,error:r,code:t})})]).then(u.noop).catch(function(e){if(n&&n.handleError)return n.handleError(e);u.log.error((0,u.stringifyError)(e))})},n[a.CONSTANTS.POST_MESSAGE_TYPE.RESPONSE]=function(e,r,t){if(!(0,l.isResponseListenerErrored)(t.hash)){var n=(0,l.getResponseListener)(t.hash);if(!n)throw new Error("No handler found for post message response for message: "+t.name+" from "+r+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!(0,s.matchDomain)(n.domain,r))throw new Error("Response origin "+r+" does not match domain "+(0,s.stringifyDomainPattern)(n.domain));if((0,l.deleteResponseListener)(t.hash),t.ack===a.CONSTANTS.POST_MESSAGE_ACK.ERROR){var o=new Error(t.error);return t.code&&(o.code=t.code),n.respond(o,null)}if(t.ack===a.CONSTANTS.POST_MESSAGE_ACK.SUCCESS){var i=t.data||t.response;return n.respond(null,{source:e,origin:r,data:i})}}},n)},"./src/drivers/send/index.js":function(e,r,t){r.__esModule=!0;var n=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e};r.sendMessage=function(e,r,t){return i.ZalgoPromise.try(function(){var c;r=function(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=(0,a.uniqueID)(),s=(0,a.getWindowType)(),u=(0,o.getDomain)(window);return n({},r,t,{sourceDomain:u,id:r.id||i,windowType:s})}(e,r,{data:(0,a.serializeMethods)(e,t,r.data),domain:t});var l;if(l=-1!==s.POST_MESSAGE_NAMES_LIST.indexOf(r.name)||r.type===s.CONSTANTS.POST_MESSAGE_TYPE.ACK?"debug":"error"===r.ack?"error":"info",a.log.logLevel(l,["\n\n\t","#send",r.type.replace(/^postrobot_message_/,""),"::",r.name,"::",t||s.CONSTANTS.WILDCARD,"\n\n",r]),e===window&&!s.CONFIG.ALLOW_SAME_ORIGIN)throw new Error("Attemping to send message to self");if((0,o.isWindowClosed)(e))throw new Error("Window is closed");a.log.debug("Running send message strategies",r);var f=[],d=(0,a.jsonStringify)(((c={})[s.CONSTANTS.WINDOW_PROPS.POSTROBOT]=r,c),null,2);return i.ZalgoPromise.map(Object.keys(u.SEND_MESSAGE_STRATEGIES),function(r){return i.ZalgoPromise.try(function(){if(!s.CONFIG.ALLOWED_POST_MESSAGE_METHODS[r])throw new Error("Strategy disallowed: "+r);return u.SEND_MESSAGE_STRATEGIES[r](e,d,t)}).then(function(){return f.push(r+": success"),!0},function(e){return f.push(r+": "+(0,a.stringifyError)(e)+"\n"),!1})}).then(function(e){var t=e.some(Boolean),n=r.type+" "+r.name+" "+(t?"success":"error")+":\n  - "+f.join("\n  - ")+"\n";if(a.log.debug(n),!t)throw new Error(n)})})};var o=t("./node_modules/cross-domain-utils/src/index.js"),i=t("./node_modules/zalgo-promise/src/index.js"),s=t("./src/conf/index.js"),a=t("./src/lib/index.js"),u=t("./src/drivers/send/strategies.js")},"./src/drivers/send/strategies.js":function(e,r,t){r.__esModule=!0,r.SEND_MESSAGE_STRATEGIES=void 0;var n=t("./node_modules/cross-domain-utils/src/index.js"),o=t("./src/conf/index.js");(r.SEND_MESSAGE_STRATEGIES={})[o.CONSTANTS.SEND_STRATEGIES.POST_MESSAGE]=function(e,r,t){(Array.isArray(t)?t:"string"==typeof t?[t]:[o.CONSTANTS.WILDCARD]).map(function(r){if(0===r.indexOf(o.CONSTANTS.MOCK_PROTOCOL)){if(window.location.protocol===o.CONSTANTS.FILE_PROTOCOL)return o.CONSTANTS.WILDCARD;if(!(0,n.isActuallySameDomain)(e))throw new Error("Attempting to send messsage to mock domain "+r+", but window is actually cross-domain");return(0,n.getActualDomain)(e)}return 0===r.indexOf(o.CONSTANTS.FILE_PROTOCOL)?o.CONSTANTS.WILDCARD:r}).forEach(function(t){return e.postMessage(r,"null"===t?"*":t)})}},"./src/global.js":function(e,r,t){r.__esModule=!0,r.global=void 0;var n=t("./src/conf/index.js");(r.global=window[n.CONSTANTS.WINDOW_PROPS.POSTROBOT]=window[n.CONSTANTS.WINDOW_PROPS.POSTROBOT]||{}).registerSelf=function(){}},"./src/index.js":function(e,r,t){r.__esModule=!0;var n=t("./src/interface.js");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}})});var o=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}(n);r.default=o},"./src/interface.js":function(e,r,t){r.__esModule=!0,r.bridge=r.Promise=r.cleanUpWindow=void 0;var n=t("./src/public/index.js");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}})});var o=t("./src/clean.js");Object.defineProperty(r,"cleanUpWindow",{enumerable:!0,get:function(){return o.cleanUpWindow}});var i=t("./node_modules/zalgo-promise/src/index.js");Object.defineProperty(r,"Promise",{enumerable:!0,get:function(){return i.ZalgoPromise}}),r.init=c;var s=t("./src/lib/index.js"),a=t("./src/drivers/index.js"),u=t("./src/global.js");function c(){u.global.initialized||((0,a.listenForMessages)(),(0,s.initOnReady)(),(0,s.listenForMethods)({on:n.on,send:n.send})),u.global.initialized=!0}r.bridge=null,c()},"./src/lib/index.js":function(e,r,t){r.__esModule=!0;var n=t("./src/lib/util.js");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}})});var o=t("./src/lib/log.js");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return o[e]}})});var i=t("./src/lib/serialize.js");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return i[e]}})});var s=t("./src/lib/ready.js");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return s[e]}})})},"./src/lib/log.js":function(e,r,t){r.__esModule=!0,r.log=void 0;var n="function"==typeof Symbol&&"symbol"==i(Symbol.iterator)?function(e){return void 0===e?"undefined":i(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":i(e)},o=t("./src/conf/index.js"),s=t("./src/lib/util.js"),a=["debug","info","warn","error"];Function.prototype.bind&&window.console&&"object"===n(console.log)&&["log","info","warn","error"].forEach(function(e){console[e]=this.bind(console[e],console)},Function.prototype.call);var u=r.log={clearLogs:function(){if(window.console&&window.console.clear&&window.console.clear(),o.CONFIG.LOG_TO_PAGE){var e=document.getElementById("postRobotLogs");e&&e.parentNode&&e.parentNode.removeChild(e)}},writeToPage:function(e,r){setTimeout(function(){var t=document.getElementById("postRobotLogs");t||((t=document.createElement("div")).id="postRobotLogs",t.style.cssText="width: 800px; font-family: monospace; white-space: pre-wrap;",document.body&&document.body.appendChild(t));var n=document.createElement("div"),o=(new Date).toString().split(" ")[4],i=Array.prototype.slice.call(r).map(function(e){if("string"==typeof e)return e;if(!e)return Object.prototype.toString.call(e);var r=void 0;try{r=(0,s.jsonStringify)(e,null,2)}catch(e){r="[object]"}return"\n\n"+r+"\n\n"}).join(" "),a=o+" "+e+" "+i;n.innerHTML=a;var u={log:"#ddd",warn:"orange",error:"red",info:"blue",debug:"#aaa"}[e];n.style.cssText="margin-top: 10px; color: "+u+";",t.childNodes.length?t.insertBefore(n,t.childNodes[0]):t.appendChild(n)})},logLevel:function(e,r){setTimeout(function(){try{var t=window.LOG_LEVEL||o.CONFIG.LOG_LEVEL;if("disabled"===t||a.indexOf(e)<a.indexOf(t))return;if((r=Array.prototype.slice.call(r)).unshift(""+window.location.host+window.location.pathname),r.unshift("::"),r.unshift(""+(0,s.getWindowType)().toLowerCase()),r.unshift("[post-robot]"),o.CONFIG.LOG_TO_PAGE&&u.writeToPage(e,r),!window.console)return;if(window.console[e]||(e="log"),!window.console[e])return;window.console[e].apply(window.console,r)}catch(e){}},1)},debug:function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];u.logLevel("debug",r)},info:function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];u.logLevel("info",r)},warn:function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];u.logLevel("warn",r)},error:function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];u.logLevel("error",r)}}},"./src/lib/ready.js":function(e,r,t){r.__esModule=!0,r.onHello=l,r.sayHello=f,r.initOnReady=function(){l(function(e){var r=e.source,t=e.origin,n=a.global.readyPromises.get(r)||new i.ZalgoPromise;n.resolve({origin:t}),a.global.readyPromises.set(r,n)});var e=(0,o.getAncestor)();e&&f(e).catch(function(e){u.log.debug((0,c.stringifyError)(e))})},r.onChildWindowReady=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Window",n=a.global.readyPromises.get(e);return n||(n=new i.ZalgoPromise,a.global.readyPromises.set(e,n),-1!==r&&setTimeout(function(){return n.reject(new Error(t+" did not load after "+r+"ms"))},r),n)};var n=t("./node_modules/cross-domain-safe-weakmap/src/index.js"),o=t("./node_modules/cross-domain-utils/src/index.js"),i=t("./node_modules/zalgo-promise/src/index.js"),s=t("./src/conf/index.js"),a=t("./src/global.js"),u=t("./src/lib/log.js"),c=t("./src/lib/util.js");function l(e){a.global.on(s.CONSTANTS.POST_MESSAGE_NAMES.HELLO,{domain:s.CONSTANTS.WILDCARD},function(r){var t=r.source,n=r.origin;return e({source:t,origin:n})})}function f(e){return a.global.send(e,s.CONSTANTS.POST_MESSAGE_NAMES.HELLO,{},{domain:s.CONSTANTS.WILDCARD,timeout:-1}).then(function(e){return{origin:e.origin}})}a.global.readyPromises=a.global.readyPromises||new n.WeakMap},"./src/lib/serialize.js":function(e,r,t){r.__esModule=!0,r.listenForMethods=void 0;var n="function"==typeof Symbol&&"symbol"==i(Symbol.iterator)?function(e){return void 0===e?"undefined":i(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":i(e)};r.serializeMethod=h,r.serializeMethods=function(e,r,t){return(0,l.replaceObject)({obj:t},function(t,n){return"function"==typeof t?h(e,r,t,n.toString()):t instanceof Error?(o=t,{__type__:u.CONSTANTS.SERIALIZATION_TYPES.ERROR,__message__:(0,l.stringifyError)(o),__code__:o.code}):window.Promise&&t instanceof window.Promise?function(e,r,t,n){return{__type__:u.CONSTANTS.SERIALIZATION_TYPES.PROMISE,__then__:h(e,r,function(e,r){return t.then(e,r)},n+".then")}}(e,r,t,n.toString()):a.ZalgoPromise.isPromise(t)?function(e,r,t,n){return{__type__:u.CONSTANTS.SERIALIZATION_TYPES.ZALGO_PROMISE,__then__:h(e,r,function(e,r){return t.then(e,r)},n+".then")}}(e,r,t,n.toString()):(0,l.isRegex)(t)?(i=t,{__type__:u.CONSTANTS.SERIALIZATION_TYPES.REGEX,__source__:i.source}):void 0;var o,i}).obj},r.deserializeMethod=y,r.deserializeError=p,r.deserializeZalgoPromise=m,r.deserializePromise=_,r.deserializeRegex=v,r.deserializeMethods=function(e,r,t){return(0,l.replaceObject)({obj:t},function(t){if("object"===(void 0===t?"undefined":n(t))&&null!==t)return d(t,u.CONSTANTS.SERIALIZATION_TYPES.METHOD)?y(e,r,t):d(t,u.CONSTANTS.SERIALIZATION_TYPES.ERROR)?p(e,r,t):d(t,u.CONSTANTS.SERIALIZATION_TYPES.PROMISE)?_(e,r,t):d(t,u.CONSTANTS.SERIALIZATION_TYPES.ZALGO_PROMISE)?m(e,r,t):d(t,u.CONSTANTS.SERIALIZATION_TYPES.REGEX)?v(e,r,t):void 0}).obj};var o=t("./node_modules/cross-domain-safe-weakmap/src/index.js"),s=t("./node_modules/cross-domain-utils/src/index.js"),a=t("./node_modules/zalgo-promise/src/index.js"),u=t("./src/conf/index.js"),c=t("./src/global.js"),l=t("./src/lib/util.js"),f=t("./src/lib/log.js");function d(e,r){return"object"===(void 0===e?"undefined":n(e))&&null!==e&&e.__type__===r}function h(e,r,t,n){var o=(0,l.uniqueID)(),i=c.global.methods.get(e);return i||(i={},c.global.methods.set(e,i)),i[o]={domain:r,method:t},{__type__:u.CONSTANTS.SERIALIZATION_TYPES.METHOD,__id__:o,__name__:n}}function y(e,r,t){function n(){var n=Array.prototype.slice.call(arguments);return f.log.debug("Call foreign method",t.__name__,n),c.global.send(e,u.CONSTANTS.POST_MESSAGE_NAMES.METHOD,{id:t.__id__,name:t.__name__,args:n},{domain:r,timeout:-1}).then(function(e){var r=e.data;return f.log.debug("Got foreign method result",t.__name__,r.result),r.result},function(e){throw f.log.debug("Got foreign method error",(0,l.stringifyError)(e)),e})}return n.__name__=t.__name__,n.__xdomain__=!0,n.source=e,n.origin=r,n}function p(e,r,t){var n=new Error(t.__message__);return t.__code__&&(n.code=t.__code__),n}function m(e,r,t){return new a.ZalgoPromise(function(n,o){return y(e,r,t.__then__)(n,o)})}function _(e,r,t){return window.Promise?new window.Promise(function(n,o){return y(e,r,t.__then__)(n,o)}):m(e,r,t)}function v(e,r,t){return new RegExp(t.__source__)}c.global.methods=c.global.methods||new o.WeakMap,r.listenForMethods=(0,l.once)(function(){c.global.on(u.CONSTANTS.POST_MESSAGE_NAMES.METHOD,{origin:u.CONSTANTS.WILDCARD},function(e){var r=e.source,t=e.origin,n=e.data,o=c.global.methods.get(r);if(!o)throw new Error("Could not find any methods this window has privileges to call");var i=o[n.id];if(!i)throw new Error("Could not find method with id: "+n.id);if(!(0,s.matchDomain)(i.domain,t))throw new Error("Method domain "+i.domain+" does not match origin "+t);return f.log.debug("Call local method",n.name,n.args),a.ZalgoPromise.try(function(){return i.method.apply({source:r,origin:t,data:n},n.args)}).then(function(e){return{result:e,id:n.id,name:n.name}})})})},"./src/lib/util.js":function(e,r,t){r.__esModule=!0,r.weakMapMemoize=r.once=void 0;var n="function"==typeof Symbol&&"symbol"==i(Symbol.iterator)?function(e){return void 0===e?"undefined":i(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":i(e)};r.stringifyError=function e(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(t>=3)return"stringifyError stack overflow";try{if(!r)return"<unknown error: "+Object.prototype.toString.call(r)+">";if("string"==typeof r)return r;if(r instanceof Error){var n=r&&r.stack,o=r&&r.message;if(n&&o)return-1!==n.indexOf(o)?n:o+"\n"+n;if(n)return n;if(o)return o}return"function"==typeof r.toString?r.toString():Object.prototype.toString.call(r)}catch(r){return"Error while stringifying error: "+e(r,t+1)}},r.noop=function(){},r.addEventListener=function(e,r,t){return e.addEventListener?e.addEventListener(r,t):e.attachEvent("on"+r,t),{cancel:function(){e.removeEventListener?e.removeEventListener(r,t):e.detachEvent("on"+r,t)}}},r.uniqueID=function(){var e="0123456789abcdef";return"xxxxxxxxxx".replace(/./g,function(){return e.charAt(Math.floor(Math.random()*e.length))})},r.eachArray=u,r.eachObject=c,r.each=l,r.replaceObject=function e(r,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(o>=100)throw new Error("Self-referential object passed, or object contained too many layers");var i=void 0;if("object"!==(void 0===r?"undefined":n(r))||null===r||Array.isArray(r)){if(!Array.isArray(r))throw new TypeError("Invalid type: "+(void 0===r?"undefined":n(r)));i=[]}else i={};return l(r,function(r,s){var a=t(r,s);void 0!==a?i[s]=a:"object"===(void 0===r?"undefined":n(r))&&null!==r?i[s]=e(r,t,o+1):i[s]=r}),i},r.safeInterval=function(e,r){var t=void 0;return t=setTimeout(function n(){t=setTimeout(n,r),e.call()},r),{cancel:function(){clearTimeout(t)}}},r.isRegex=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},r.getWindowType=function(){return(0,s.isPopup)()?a.CONSTANTS.WINDOW_TYPES.POPUP:(0,s.isIframe)()?a.CONSTANTS.WINDOW_TYPES.IFRAME:a.CONSTANTS.WINDOW_TYPES.FULLPAGE},r.jsonStringify=function(e,r,t){var n=void 0,o=void 0;try{if("{}"!==JSON.stringify({})&&(n=Object.prototype.toJSON,delete Object.prototype.toJSON),"{}"!==JSON.stringify({}))throw new Error("Can not correctly serialize JSON objects");if("[]"!==JSON.stringify([])&&(o=Array.prototype.toJSON,delete Array.prototype.toJSON),"[]"!==JSON.stringify([]))throw new Error("Can not correctly serialize JSON objects")}catch(e){throw new Error("Can not repair JSON.stringify: "+e.message)}var i=JSON.stringify.call(this,e,r,t);try{n&&(Object.prototype.toJSON=n),o&&(Array.prototype.toJSON=o)}catch(e){throw new Error("Can not repair JSON.stringify: "+e.message)}return i},r.jsonParse=function(e){return JSON.parse(e)};var o=t("./node_modules/cross-domain-safe-weakmap/src/index.js"),s=t("./node_modules/cross-domain-utils/src/index.js"),a=t("./src/conf/index.js");function u(e,r){for(var t=0;t<e.length;t++)r(e[t],t)}function c(e,r){for(var t in e)e.hasOwnProperty(t)&&r(e[t],t)}function l(e,r){Array.isArray(e)?u(e,r):"object"===(void 0===e?"undefined":n(e))&&null!==e&&c(e,r)}r.once=function(e){if(!e)return e;var r=!1;return function(){if(!r)return r=!0,e.apply(this,arguments)}},r.weakMapMemoize=function(e){var r=new o.WeakMap;return function(t){var n=r.get(t);return void 0!==n?n:(void 0!==(n=e.call(this,t))&&r.set(t,n),n)}}},"./src/public/client.js":function(e,r,t){r.__esModule=!0,r.send=void 0,r.request=l,r.sendToParent=function(e,r,t){var n=(0,i.getAncestor)();return n?f(n,e,r,t):new o.ZalgoPromise(function(e,r){return r(new Error("Window does not have a parent"))})},r.client=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.window)throw new Error("Expected options.window");var r=e.window;return{send:function(t,n){return f(r,t,n,e)}}};var n=t("./node_modules/cross-domain-safe-weakmap/src/index.js"),o=t("./node_modules/zalgo-promise/src/index.js"),i=t("./node_modules/cross-domain-utils/src/index.js"),s=t("./src/conf/index.js"),a=t("./src/drivers/index.js"),u=t("./src/lib/index.js"),c=t("./src/global.js");function l(e){return o.ZalgoPromise.try(function(){if(!e.name)throw new Error("Expected options.name");var r=e.name,t=void 0,n=void 0;if("string"==typeof e.window){var l=document.getElementById(e.window);if(!l)throw new Error("Expected options.window "+Object.prototype.toString.call(e.window)+" to be a valid element id");if("iframe"!==l.tagName.toLowerCase())throw new Error("Expected options.window "+Object.prototype.toString.call(e.window)+" to be an iframe");if(!l.contentWindow)throw new Error("Iframe must have contentWindow.  Make sure it has a src attribute and is in the DOM.");t=l.contentWindow}else if(e.window instanceof HTMLIFrameElement){if("iframe"!==e.window.tagName.toLowerCase())throw new Error("Expected options.window "+Object.prototype.toString.call(e.window)+" to be an iframe");if(e.window&&!e.window.contentWindow)throw new Error("Iframe must have contentWindow.  Make sure it has a src attribute and is in the DOM.");e.window&&e.window.contentWindow&&(t=e.window.contentWindow)}else t=e.window;if(!t)throw new Error("Expected options.window to be a window object, iframe, or iframe element id.");var f=t;n=e.domain||s.CONSTANTS.WILDCARD;var d=e.name+"_"+(0,u.uniqueID)();if((0,i.isWindowClosed)(f))throw new Error("Target window is closed");var h=!1,y=c.global.requestPromises.get(f);y||(y=[],c.global.requestPromises.set(f,y));var p=o.ZalgoPromise.try(function(){if((0,i.isAncestor)(window,f))return(0,u.onChildWindowReady)(f,e.timeout||s.CONFIG.CHILD_WINDOW_TIMEOUT)}).then(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).origin;if((0,u.isRegex)(n)&&!e)return(0,u.sayHello)(f)}).then(function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).origin;if((0,u.isRegex)(n)){if(!(0,i.matchDomain)(n,t))throw new Error("Remote window domain "+t+" does not match regex: "+n.toString());n=t}if("string"!=typeof n&&!Array.isArray(n))throw new TypeError("Expected domain to be a string or array");var c=n;return new o.ZalgoPromise(function(t,n){var o=void 0;if(e.fireAndForget||(o={name:r,window:f,domain:c,respond:function(e,r){e||(h=!0,y.splice(y.indexOf(p,1))),e?n(e):t(r)}},(0,a.addResponseListener)(d,o)),(0,a.sendMessage)(f,{type:s.CONSTANTS.POST_MESSAGE_TYPE.REQUEST,hash:d,name:r,data:e.data,fireAndForget:e.fireAndForget},c).catch(n),e.fireAndForget)return t();var u=s.CONFIG.ACK_TIMEOUT,l=e.timeout||s.CONFIG.RES_TIMEOUT,m=100;setTimeout(function t(){if(!h){if((0,i.isWindowClosed)(f))return o.ack?n(new Error("Window closed for "+r+" before response")):n(new Error("Window closed for "+r+" before ack"));if(u=Math.max(u-m,0),-1!==l&&(l=Math.max(l-m,0)),o.ack){if(-1===l)return;m=Math.min(l,2e3)}else{if(0===u)return n(new Error("No ack for postMessage "+r+" in "+(0,i.getDomain)()+" in "+s.CONFIG.ACK_TIMEOUT+"ms"));if(0===l)return n(new Error("No response for postMessage "+r+" in "+(0,i.getDomain)()+" in "+(e.timeout||s.CONFIG.RES_TIMEOUT)+"ms"))}setTimeout(t,m)}},m)})});return p.catch(function(){(0,a.markResponseListenerErrored)(d),(0,a.deleteResponseListener)(d)}),y.push(p),p})}function f(e,r,t,n){return(n=n||{}).window=e,n.name=r,n.data=t,l(n)}c.global.requestPromises=c.global.requestPromises||new n.WeakMap,r.send=f,c.global.send=f},"./src/public/config.js":function(e,r,t){r.__esModule=!0,r.CONSTANTS=r.CONFIG=void 0;var n=t("./src/conf/index.js");Object.defineProperty(r,"CONFIG",{enumerable:!0,get:function(){return n.CONFIG}}),Object.defineProperty(r,"CONSTANTS",{enumerable:!0,get:function(){return n.CONSTANTS}}),r.disable=function(){delete window[n.CONSTANTS.WINDOW_PROPS.POSTROBOT],window.removeEventListener("message",o.messageListener)};var o=t("./src/drivers/index.js")},"./src/public/index.js":function(e,r,t){r.__esModule=!0,r.parent=void 0;var n=t("./src/public/client.js");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}})});var o=t("./src/public/server.js");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return o[e]}})});var i=t("./src/public/config.js");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return i[e]}})});var s=t("./node_modules/cross-domain-utils/src/index.js");r.parent=(0,s.getAncestor)()},"./src/public/server.js":function(e,r,t){r.__esModule=!0,r.on=void 0;var n="function"==typeof Symbol&&"symbol"==i(Symbol.iterator)?function(e){return void 0===e?"undefined":i(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":i(e)};r.listen=f,r.once=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments[2];"function"==typeof r&&(t=r,r={}),r=r||{},t=t||r.handler;var n=r.errorHandler,o=new s.ZalgoPromise(function(o,i){(r=r||{}).name=e,r.once=!0,r.handler=function(e){if(o(e),t)return t(e)},r.errorHandler=function(e){if(i(e),n)return n(e)}}),i=f(r);return o.cancel=i.cancel,o},r.listener=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{on:function(r,t){return d(r,e,t)}}};var o=t("./node_modules/cross-domain-utils/src/index.js"),s=t("./node_modules/zalgo-promise/src/index.js"),a=t("./src/lib/index.js"),u=t("./src/drivers/index.js"),c=t("./src/conf/index.js"),l=t("./src/global.js");function f(e){if(!e.name)throw new Error("Expected options.name");if(!e.handler)throw new Error("Expected options.handler");var r=e.name,t=e.window,i=e.domain,s={handler:e.handler,handleError:e.errorHandler||function(e){throw e},window:t,domain:i||c.CONSTANTS.WILDCARD,name:r},l=(0,u.addRequestListener)({name:r,win:t,domain:i},s);if(e.once){var f=s.handler;s.handler=(0,a.once)(function(){return l.cancel(),f.apply(this,arguments)})}if(s.window&&e.errorOnClose)var d=(0,a.safeInterval)(function(){t&&"object"===(void 0===t?"undefined":n(t))&&(0,o.isWindowClosed)(t)&&(d.cancel(),s.handleError(new Error("Post message target window is closed")))},50);return{cancel:function(){l.cancel()}}}function d(e,r,t){return"function"==typeof r&&(t=r,r={}),(r=r||{}).name=e,r.handler=t||r.handler,f(r)}r.on=d,l.global.on=d}})})}).call(this,t(10)(e))},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),o=c(t(3)),i=c(t(2)),s=c(t(9)),a=c(t(8)),u=c(t(5));function c(e){return e&&e.__esModule?e:{default:e}}var l=new(c(t(4)).default),f=function(){function e(r){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=r.data.config,this.currentUser=r.data.user,this.type=r.data.type||"FIELD",this.entry=new u.default(r,o.default,l),"FIELD"===this.type&&(r.data.self=!0,this.field=new i.default(r,o.default,l)),this.window=new s.default(o.default),this.stack=new a.default(r.data.stack,o.default),o.default.on("extensionEvent",function(e){"entrySave"===e.data.name&&(l.emitEvent("entrySave",[{data:e.data.data}]),l.emitEvent("updateFields",[{data:e.data.data}]))})}return n(e,[{key:"setReady",value:function(){return o.default.sendToParent("ready")}}],[{key:"initialize",value:function(){return o.default.sendToParent("init",{})}}]),e}();r.default=f},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),o=i(t(12));function i(e){return e&&e.__esModule?e:{default:e}}i(t(3)).default.CONFIG.LOG_LEVEL="error";var s=function(){function e(){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,null,[{key:"init",value:function(){var e=this;return this._extension?Promise.resolve(this._extension):o.default.initialize().then(function(r){return e._extension=new o.default(r),Promise.resolve(e._extension)}).catch(function(e){return Promise.reject(e)})}},{key:"SDK_VERSION",get:function(){return"1.1.0"}}]),e}();r.default=s},function(e,r,t){"use strict";e.exports=t(13).default}])});
//# sourceMappingURL=ui-extension-sdk.js.map